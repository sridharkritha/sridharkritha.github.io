<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="../../../../../../schema.org/WebPage.html">

<!-- Mirrored from sites.google.com/site/sridharkritha/home/javascript/nodejs/summary by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 10:31:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { /*

Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="../../../../../../www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/sridharkritha/home","deleted":false,"title":"home","dir":"ltr"},{"path":"/site/sridharkritha/home/javascript","deleted":false,"title":"Javascript","dir":"ltr"},{"path":"/site/sridharkritha/home/javascript/nodejs","deleted":false,"title":"nodejs","dir":"ltr"},{"path":"/site/sridharkritha/home/javascript/nodejs/summary","deleted":false,"title":"summary","dir":"ltr"}];
  var JOT_clearDotPath = '../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":false,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://2002889378-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"sridharkritha","experiments":{"enableSubpagesGadgetInTakeout":true,"DisableSiteEditingFeature__disable_site_editing":true,"disableDomainEditing":false},"jot2atari":{"eligibility":"INELIGIBLE"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"moreMobileStyleImprovements":null,"subscriptionDataMigrationInProgress":null,"plusBadge":false},"configProperties":{"disableSiteEditing":null},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary\u0026service\u003djotspot","analyticsAccountId":"","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/a71eef/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/a71eef/system/js/codemirror.js","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codemirror_css.css","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/js/trog_edit__en.js","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/trogedit.css","../../../_/rsrc/1624520311000/system/app/css/editor.css","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codeeditor.css","/site/sridharkritha/_/rsrc/1624520311000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/sridharkritha","name":"sridharkritha","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/home/javascript/nodejs","parentWuid":"wuid:gx:4550c9d9b9cac947","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"summary","locale":"en","wuid":"wuid:gx:1580e36e3fa6f565","revision":41,"path":"/home/javascript/nodejs/summary","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"summary","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/site/sridharkritha/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="summary - sridharkritha" />
<meta itemprop="name" content="summary - sridharkritha" />
<meta property="og:title" content="summary - sridharkritha" />
<meta name="description" content="Information Bank - Computer Science" />
<meta itemprop="description" content="Information Bank - Computer Science" />
<meta id="meta-tag-description" property="og:description" content="Information Bank - Computer Science" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/themes/ember/standard-css-ember-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1624520311000/system/app/css/overlaydd2a.css?cb=ember150goog-ws-noside" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1624520311000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/sridharkritha/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>summary - sridharkritha</title>
<meta itemprop="image" content="https://sites.google.com/site/sridharkritha/_/rsrc/1589454472082/home/javascript/nodejs/summary/httpClasses.jpg" />
<meta property="og:image" content="https://sites.google.com/site/sridharkritha/_/rsrc/1589454472082/home/javascript/nodejs/summary/httpClasses.jpg" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2></h2></div></td><td class="sites-layout-searchbox  "></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="display: none; width: 150px">
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../home.html" dir="ltr">home</A>‎ &gt; ‎<A href="../../javascript.html" dir="ltr">Javascript</A>‎ &gt; ‎<A href="../nodejs.html" dir="ltr">nodejs</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">summary</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-left-sidebar-hf sites-layout-vbox"><div class="sites-layout-tile sites-tile-name-header sites-layout-empty-tile"><div dir="ltr"><br /></div></div><table cellspacing="0" class="sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1 sites-canvas-sidebar"><div dir="ltr"><br /><div><br /></div><div><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/node-interview-question">node Interview Quest</a></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><span style="font-size:13.3333px"><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/restful-webservices-with-node-js-and-express">RESTful WebServices with Node.js and Express</a></span></div><div><br /></div><div><br /></div><div><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/express-js">Express.js</a></div></div></td><td class="sites-layout-tile sites-tile-name-content-2"><div dir="ltr">Nodejs Summary:<div><br /></div><div><br /></div><div><div><span style="font-size:13.3333px">Upgrade the 'npm' to version 6.14.0</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px;white-space:pre"><div style="font-size:16px;line-height:22px"><span style="color:#6a9955">     npm i -g npm@6.14.0</span></div></div></div><div><span style="background-color:transparent">View the latest available 'npm' version from web</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px;white-space:pre"><span style="color:#6a9955">    </span><span style="color:rgb(106,153,85);font-size:16px"> npm view npm versions</span></div></div><div><span style="background-color:transparent">Update the "node" to latest 'stable' version</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">    npm install -g node stable</span></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">Install:</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    npm i express@latest</span></div><div><span style="color:#6a9955">    npm i express@4.5.6</span></div><div><span style="color:#6a9955">    npm i express@4        // latest of '4'  =&gt; 4.8.12</span></div></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">List all the installed modules/dependency tree</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">    npm ls </span></div></div><div><span style="font-size:13.3333px">List the packages which are outdated/will be updated if do 'npm update'</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">    npm outdated</span></div></div><div><span style="font-size:13.3333px">Update the packages with respect to sematic version(~,^,=)</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">    npm update</span></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">show the version history/latest version of any module</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">    npm show express version</span></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><b>nvm:</b> Node version Manager- You need to install by window installer <b>NOT </b>by 'npm'</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">Switch to different version of "node"</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    nvm list</span></div><div><span style="color:#6a9955">    nvm use 12.2.0</span></div></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">  Location of storage:  C:\Users\&lt;NAME&gt;\AppData\Roaming\nvm</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><b>module semantic versioning:</b></span></div><div><span style="font-size:13.3333px">ex:  4.5.6  =&gt; <b>major.minor.patch</b></span></div><div><span style="font-size:13.3333px">major: Breaking changes so most probably you need to update your own code to adopt it.</span></div><div><span style="font-size:13.3333px">minor: Backward compatible changes only allowed</span></div><div><span style="font-size:13.3333px">patch: minor bug fixes</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955"><span>    </span>~4.5.6 =&gt; upgrade to latest "patch" version ex: 4.5.18</span></div><div><span style="color:#6a9955"><span>    </span>^4.5.6 =&gt; upgrade to higher "minor" version ex: 4.8.2</span></div><div><span style="color:#6a9955"><span>    </span>=4.5.6 =&gt; exactly install the same version  ex: 4.5.6</span></div><div><span style="color:#6a9955"><span>    </span>4.5.6  =&gt; exactly install the same version  ex: 4.5.6</span></div></div></div><div><br /></div><div><span style="font-size:13.3333px"><b>Publish a package:</b></span></div><div><span style="font-size:13.3333px">1. Create a folder and do 'npm init' (NOT with -y ) and give an unique 'name' (name : 'sridhar_remote_provider' ) for the module.</span></div><div><span style="font-size:13.3333px">2. create a 'index.js' and write your functions and the export the public functions using exports [ module.exports = printFunc; ]</span></div><div><span style="font-size:13.3333px">3.  <b>npm login</b></span></div><div><span style="font-size:13.3333px">            &lt;type username, password, email address&gt;</span></div><div><span style="font-size:13.3333px">    <b>npm publish</b></span></div><div><span style="font-size:13.3333px">Check the publish content in the npm website:</span></div><div><span style="font-size:13.3333px">    // https://www.npmjs.com/package/sridhar_remote_provider</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">To start <b>REPL </b>(read eval print loop) session - for quick test of node/javascript commands :</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    node</span></div><div><span style="color:#6a9955">    &gt;Math.random()  </span></div></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><b>'tab' :</b> to list all global available functions and auto completion</span></div><div><span style="font-size:13.3333px"><b>'-' </b>   : stores last value</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">To start the REPL editor:</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    .editor</span></div><br /><div><span style="color:#6a9955">    function fun() {</span></div><div><span style="color:#6a9955">        return "sridhar";</span></div><div><span style="color:#6a9955">    }</span></div></div></div><div><span style="font-size:13.3333px">    Exit the editor by ^D and run the function in REPL</span></div><div><span style="font-size:13.3333px">        fun()</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><div><b>Module: Folder with source files.</b></div><div><br /></div><div>Ex 1:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// moduleTest.js</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">b</span> = <span style="color:#b5cea8">20</span>;  <span style="color:#6a9955">// Here 'module.exports' is an 'Object' by default. </span></div><div>    <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">a</span> = <span style="color:#b5cea8">10</span>;         <span style="color:#6a9955">// Alias - same as above</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// app.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">moduleApi</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./moduleTest'</span>);</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleApi</span>);  <span style="color:#6a9955">// { b: 20, a: 10 }</span></div></div></div><div><br /></div><div>Ex 2: What is hidden inside the module ?</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// function(exports, module, require, __filename, __dirname) { // hidden wrapping function</span></div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#569cd6">arguments</span>); <span style="color:#6a9955">// exports, module, require, __filename, __dirname</span></div><div>                                <span style="color:#6a9955">// They are NOT global variables. It is the arguments of hidden wrapper function</span></div><div><span style="color:#6a9955">// return module.exports; }     // hidden return statement</span></div></div></div><div><br /></div><div>Ex 3:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// function(exports, module, require, __filename, __dirname) { // hidden wrapping function</span></div><br /><div>        <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">g</span> = <span style="color:#b5cea8">9</span>; <span style="color:#6a9955">// It is NOT a global variable in Node (Unlike browser). It is defined inside the hidden wrapper function.</span></div><div>        <span style="color:#9cdcfe">global</span>.<span style="color:#9cdcfe">answer</span> = <span style="color:#b5cea8">42</span>; <span style="color:#6a9955">// Global variable. 'global' object here is like 'window' object in browser</span></div><div>        <span style="color:#9cdcfe">question</span> = <span style="color:#b5cea8">25</span>;      <span style="color:#6a9955">// Global variable - without 'let'</span></div><br /><div>        <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">b</span> = <span style="color:#b5cea8">20</span>;  <span style="color:#6a9955">// Here 'module.exports' is an 'Object' by default. </span></div><div>        <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">a</span> = <span style="color:#b5cea8">10</span>;         <span style="color:#6a9955">// Alias - same as above</span></div><br /><div>        <span style="color:#6a9955">// module.exports: default 'object' can be changed into 'function' or 'array' or 'string' or overwrites to another 'object' [Note: These actions will BREAK </span></div><div><span style="color:#6a9955">        // exports and module.exports alias relationship]</span></div><div>        <span style="color:#6a9955">// Change the 'module.exports' object to function</span></div><div>        <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span> = () <span style="color:#569cd6">=&gt;</span> {}; <span style="color:#6a9955">// Here 'module.exports' is an 'function'</span></div><div>        <span style="color:#6a9955">// exports = () =&gt; {};     // ERROR - alias - NOT work here.</span></div><br /><div><span style="color:#6a9955">// return module.exports; }   // hidden return statement</span></div></div></div><div><br /></div><div>Ex 1: <b>Global variables</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// moduleGlobal.js</span></div><div>    <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">g</span> = <span style="color:#b5cea8">9</span>;      <span style="color:#6a9955">// NOT a global variable. Local to the module</span></div><div>    <span style="color:#9cdcfe">global</span>.<span style="color:#9cdcfe">p</span> = <span style="color:#b5cea8">50</span>; <span style="color:#6a9955">// Global variable. 'global' object here is like 'window' object in browser</span></div><div>    <span style="color:#9cdcfe">q</span> = <span style="color:#b5cea8">100</span>;       <span style="color:#6a9955">// Global variable like browser - without 'let'</span></div><br /><div>    <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">a</span> = <span style="color:#b5cea8">1</span>;                <span style="color:rgb(106,153,85)">// { a: 1}  exports is a alias of module.exports.</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">b</span> = <span style="color:#b5cea8">2</span>;         <span style="color:rgb(106,153,85)">// { a: 1, b: 4 }</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span> = { <span style="color:#9cdcfe">c</span><span style="color:#9cdcfe">:</span> <span style="color:#b5cea8">2</span>};     <span style="color:#6a9955">// OVERWRITES previous the object. (</span><span style="color:rgb(106,153,85)">exports is NO longer a alias of module.exports)</span></div><div>    <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">d</span> = <span style="color:#b5cea8">3</span>;</div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">e</span> = <span style="color:#b5cea8">4</span>;        <span style="color:#6a9955">// inject the value to existing object -  { c: 2, e: 4 }</span></div><div>    <span style="color:#6a9955">// module.exports = { f: 5}; // overwrites the previous object</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// app.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">moduleGlobalApi</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./moduleGlobal'</span>);</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleGlobalApi</span>);  <span style="color:#6a9955">// { c: 2, e: 4 }</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleGlobalApi</span>.<span style="color:#9cdcfe">g</span>);  <span style="color:#6a9955">// undefined</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">g</span>);  <span style="color:#6a9955">// error</span></div><br /><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleGlobalApi</span>.<span style="color:#9cdcfe">p</span>); <span style="color:#6a9955">// undefined</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">p</span>);  <span style="color:#6a9955">// 50 - you can directly access the global variables once it's module has been defined.</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">q</span>);  <span style="color:#6a9955">// 100</span></div></div></div><div><br /></div><div>Ex 4: 'module.exports' as<b> 'object':</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// moduleObject.js</span></div><div>    <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">a</span> = <span style="color:#b5cea8">10</span>; <span style="color:#6a9955">// no need to use  'module.exports.a = 10;' - it is optional</span></div><div>    <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">b</span> = <span style="color:#b5cea8">20</span>;</div><div>    <span style="color:#4ec9b0">exports</span>.<span style="color:#9cdcfe">c</span> = <span style="color:#b5cea8">30</span>;</div></div></div><div><br /></div><div>Ex 5: 'module.exports' as <b>'array':</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// moduleArray.js</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span> = [<span style="color:#b5cea8">10</span>,<span style="color:#b5cea8">20</span>,<span style="color:#b5cea8">30</span>]; <span style="color:#6a9955">// you SHOULD use 'module.exports' bcos it is NOT used as an object</span></div></div></div><div><br /></div><div>Ex 6: 'module.exports' as 'string':</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// moduleString.js</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span> = <span style="color:#ce9178">" Hello World "</span>; <span style="color:#6a9955">// you SHOULD use 'module.exports' bcos it is NOT used as an object</span></div></div></div><div><br /></div><div>Ex 6: 'module.exports' as <b>'function':</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// moduleFunction.js</span></div><div>    <span style="color:#6a9955">// you SHOULD use 'module.exports' bcos it is NOT used as an object</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span> = <span style="color:#9cdcfe">title</span> <span style="color:#569cd6">=&gt;</span> <span style="color:#ce9178">`</span></div><div><span style="color:#ce9178">    &lt;!DOCTYPE html&gt;</span></div><div><span style="color:#ce9178">    &lt;html lang="en"&gt;</span></div><div><span style="color:#ce9178">    &lt;head&gt;</span></div><div><span style="color:#ce9178">        &lt;title&gt;</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">title</span><span style="color:#569cd6">}</span><span style="color:#ce9178">&lt;/title&gt;</span></div><div><span style="color:#ce9178">    &lt;/head&gt;</span></div><div><span style="color:#ce9178">    &lt;body&gt;  &lt;/body&gt;</span></div><div><span style="color:#ce9178">    &lt;/html&gt;</span></div><div><span style="color:#ce9178">    `</span>;</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955"><span>    </span>// app.js</span></div><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">moduleObjectApi</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./moduleObject'</span>);</div><div><span style="color:#9cdcfe"><span>    </span>console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleObjectApi</span>);  <span style="color:#6a9955">// {  a: 10, b: 20, c: 30 }</span></div><br /><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">moduleArrayApi</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./moduleArray'</span>);</div><div><span style="color:#9cdcfe"><span>    </span>console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleArrayApi</span>);  <span style="color:#6a9955">// [10, 20, 30]</span></div><br /><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">moduleStringApi</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./moduleString'</span>);</div><div><span style="color:#9cdcfe"><span>    </span>console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">moduleStringApi</span>);  <span style="color:#6a9955">//  Hello World</span></div><br /><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">moduleFunctionApi</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./moduleFunction'</span>);</div><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">myTemplate</span> = <span style="color:#9cdcfe">moduleFunctionApi</span>(<span style="color:#ce9178">'****** Hello Jay Bose! ********'</span>); <span style="color:#6a9955">// passing argument</span></div><div><span style="color:#9cdcfe"><span>    </span>console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">myTemplate</span>);</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Output:</span></div><div>&lt;!<span style="color:#9cdcfe">DOCTYPE</span> <span style="color:#9cdcfe">html</span>&gt;</div><div>  <span style="color:#808080">&lt;</span><span style="color:#569cd6">html</span> <span style="color:#9cdcfe">lang</span>=<span style="color:#ce9178">"en"</span><span style="color:#808080">&gt;</span></div><div>  <span style="color:#808080">&lt;</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span>****** Hello Jay Bose! ********<span style="color:#808080">&lt;/</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span></div><div>  <span style="color:#808080">&lt;/</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>  <span style="color:#808080">&lt;</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span>  <span style="color:#808080">&lt;/</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>  <span style="color:#808080">&lt;/</span><span style="color:#569cd6">html</span><span style="color:#808080">&gt;</span></div></div></div><div><br /></div><div><b>console usage:</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">assert</span>(<span style="color:#b5cea8">3</span> === <span style="color:#ce9178">'3'</span>);</div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Hello %s"</span>, <span style="color:#ce9178">'world'</span>); <span style="color:#6a9955">// Hello world</span></div><div>    <span style="color:#569cd6">var</span> <span style="color:#9cdcfe">util</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'util'</span>);</div><div>    <span style="color:#9cdcfe">util</span>.<span style="color:#dcdcaa">format</span>(<span style="color:#ce9178">"Hello %s"</span>, <span style="color:#ce9178">'world'</span>); <span style="color:#6a9955">// Hello world</span></div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>({<span style="color:#ce9178">"name"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"sridhar"</span>,  <span style="color:#ce9178">"address"</span><span style="color:#9cdcfe">:</span> {<span style="color:#ce9178">"street"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"Mosque Garden"</span>}});</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">dir</span>({<span style="color:#ce9178">"name"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"sridhar"</span>,  <span style="color:#ce9178">"address"</span><span style="color:#9cdcfe">:</span> {<span style="color:#ce9178">"street"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"Mosque Garden"</span>}}, {<span style="color:#9cdcfe">depth</span><span style="color:#9cdcfe">:</span> <span style="color:#b5cea8">0</span>});</div><div>    <span style="color:#9cdcfe">util</span>.<span style="color:#dcdcaa">inspect</span>({<span style="color:#ce9178">"name"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"sridhar"</span>, <span style="color:#ce9178">"address"</span><span style="color:#9cdcfe">:</span> {<span style="color:#ce9178">"street"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"Mosque Garden"</span>}}, {<span style="color:#9cdcfe">depth</span><span style="color:#9cdcfe">:</span> <span style="color:#b5cea8">0</span>});</div></div></div><div><br /></div><div><b style="background-color:transparent;font-size:10pt">Synchronous Pattern:</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span>   = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">data</span> = <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFileSync</span>(<span style="color:#9cdcfe">__filename</span>); <span style="color:#6a9955">// Synchronous - NOT goes to the Event loop. Wait until OS return the file data </span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'File data is'</span>, <span style="color:#9cdcfe">data</span>);</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'TEST'</span>);</div></div></div><div><br /></div><div><b>Asynchronous Patterns:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Method 1 - Using Callback:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#9cdcfe">__filename</span>, <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">cb</span>(<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) { <span style="color:#6a9955">// asynchronous - "Event loop" and "OS" interaction will takes place</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'File data is'</span>, <span style="color:#9cdcfe">data</span>);</div><div>    });</div><br /><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'TEST'</span>);</div></div></div><div><br /></div><div><b>Note:</b></div><div>          Async function always has 'callback' function as their 'last' argument. ex: fs.readFile(__filename, cb);</div><div>          Callback function alway has 'error' object as their 'first' argument (Error first Callback pattern). ex: function cb(err, data) { }</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Method 2 - Using Promise:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span>   = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">util</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'util'</span>); <span style="color:#6a9955">// promisify function defined</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">readFilePromised</span> = <span style="color:#9cdcfe">util</span>.<span style="color:#dcdcaa">promisify</span>(<span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>);</div><br /><div>    <span style="color:#569cd6">async</span> <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">main</span>() {</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">data</span> = <span style="color:#c586c0">await</span> <span style="color:#dcdcaa">readFilePromised</span>(<span style="color:#9cdcfe">__filename</span>);</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'File data is'</span>, <span style="color:#9cdcfe">data</span>);</div><div>    }</div><br /><div>    <span style="color:#dcdcaa">main</span>();</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'TEST'</span>);</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Method 3 - Using Native Promise Modules:</span></div><div>    <span style="color:#569cd6">const</span> { <span style="color:#9cdcfe">readFilePromised</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>).<span style="color:#4ec9b0">promises</span>; <span style="color:#6a9955">// Native promise 'fs' module</span></div><br /><div>    <span style="color:#569cd6">async</span> <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">main</span>() {</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">data</span> = <span style="color:#c586c0">await</span> <span style="color:#dcdcaa">readFilePromised</span>(<span style="color:#9cdcfe">__filename</span>);</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'File data is'</span>, <span style="color:#9cdcfe">data</span>);</div><div>    }</div><br /><div>    <span style="color:#dcdcaa">main</span>();</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'TEST'</span>);</div></div></div><div><br /></div><div><b>Nesting Asynchronous :</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div>    <span style="color:#6a9955">// Method 1 - using callbacks:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#9cdcfe">__filename</span>, <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">cb1</span>(<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) {</div><div>    <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">writeFile</span>(<span style="color:#9cdcfe">__filename</span> + <span style="color:#ce9178">'.copy'</span>, <span style="color:#9cdcfe">data</span>, <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">cb2</span>(<span style="color:#9cdcfe">err</span>) {</div><div>        <span style="color:#6a9955">// Nest more callbacks here...</span></div><div>    });</div><div>    });</div><br /><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'TEST'</span>);</div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Method 2 - Using Native Promise Modules:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>).<span style="color:#4ec9b0">promises</span>;</div><div>    <span style="color:#569cd6">async</span> <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">main</span>() {</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">data</span> = <span style="color:#c586c0">await</span> <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#9cdcfe">__filename</span>);</div><div>    <span style="color:#c586c0">await</span> <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">writeFile</span>(<span style="color:#9cdcfe">__filename</span> + <span style="color:#ce9178">'.copy'</span>, <span style="color:#9cdcfe">data</span>);</div><div>    <span style="color:#6a9955">// More awaits here...</span></div><div>    }</div><br /><div>    <span style="color:#dcdcaa">main</span>();</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'TEST'</span>);</div></div></div><div><br /></div><div><b style="background-color:transparent;font-size:10pt">More Examples: Read a file in 4 different asynchronous methods</b></div><div><b style="background-color:transparent;font-size:10pt">1. Callback</b></div><div><b style="background-color:transparent;font-size:10pt">2. Promise</b></div><div><b style="background-color:transparent;font-size:10pt">3. Mix of Callback and Promise</b></div><div><b style="background-color:transparent;font-size:10pt">4. Async</b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Number (input file)</span></div><div><span style="color:#6a9955">    101</span></div><div><span style="color:#6a9955">    102</span></div><div><span style="color:#6a9955">    103</span></div><div><span style="color:#6a9955">    104</span></div><div><span style="color:#6a9955">    105</span></div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">1. Callback:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">readFileAsArray</span> = <span style="color:#569cd6">function</span>(<span style="color:#9cdcfe">file</span>, <span style="color:#9cdcfe">cb</span>) {</div><div>    <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#9cdcfe">file</span>, <span style="color:#569cd6">function</span>(<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) {</div><div>        <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>)  <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">cb</span>(<span style="color:#9cdcfe">err</span>);</div><br /><div>        <span style="color:#6a9955">// toString() : Converts the binary data to human readable string</span></div><div>        <span style="color:#6a9955">// split('\n'): Converts the long string into array of strings by '\n'</span></div><div>        <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">lines</span> = <span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>().<span style="color:#dcdcaa">trim</span>().<span style="color:#dcdcaa">split</span>(<span style="color:#ce9178">'</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>        <span style="color:#9cdcfe">cb</span>(<span style="color:#569cd6">null</span>, <span style="color:#9cdcfe">lines</span>);</div><div>    });</div><div>    };</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// callback function caller</span></div><div>    <span style="color:#dcdcaa">readFileAsArray</span>(<span style="color:#ce9178">'./numbers'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">lines</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><br /><div>        <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">numbers</span> = <span style="color:#9cdcfe">lines</span>.<span style="color:#dcdcaa">map</span>(<span style="color:#4ec9b0">Number</span>); <span style="color:#6a9955">// converts the array of strings to array of numbers</span></div><div>        <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">oddNumbers</span> = <span style="color:#9cdcfe">numbers</span>.<span style="color:#dcdcaa">filter</span>(<span style="color:#9cdcfe">number</span> <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">number</span> % <span style="color:#b5cea8">2</span> === <span style="color:#b5cea8">1</span>); <span style="color:#6a9955">// filter to array of even numbers only</span></div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'odd numbers count:'</span>, <span style="color:#9cdcfe">oddNumbers</span>.<span style="color:#9cdcfe">length</span>);</div><div>    });</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">2. Promise</b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">readFileAsArray</span> = <span style="color:#569cd6">function</span>(<span style="color:#9cdcfe">file</span>) {</div><div>        <span style="color:#c586c0">return</span> <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Promise</span>((<span style="color:#9cdcfe">resolve</span>, <span style="color:#9cdcfe">reject</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#9cdcfe">file</span>, <span style="color:#569cd6">function</span>(<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) {</div><div>                <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">reject</span>(<span style="color:#9cdcfe">err</span>);</div><br /><div>                <span style="color:#6a9955">// toString() : Converts the binary data to human readable string</span></div><div>                <span style="color:#6a9955">// split('\n'): Converts the long string into array of strings by '\n'</span></div><div>                <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">lines</span> = <span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>().<span style="color:#dcdcaa">trim</span>().<span style="color:#dcdcaa">split</span>(<span style="color:#ce9178">'</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>                <span style="color:#9cdcfe">resolve</span>(<span style="color:#9cdcfe">lines</span>); <span style="color:#6a9955">// calls '.then'</span></div><div>            });</div><div>        });</div><div>    };</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:rgb(106,153,85)">// promised function caller</span></div><div>    <span style="color:#dcdcaa">readFileAsArray</span>(<span style="color:#ce9178">'./numbers'</span>)</div><div>    .<span style="color:#dcdcaa">then</span>(<span style="color:#9cdcfe">lines</span> <span style="color:#569cd6">=&gt;</span> {</div><div>                    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">numbers</span> = <span style="color:#9cdcfe">lines</span>.<span style="color:#dcdcaa">map</span>(<span style="color:#4ec9b0">Number</span>); <span style="color:#6a9955">// converts the array of strings to array of numbers</span></div><div>                    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">oddNumbers</span> = <span style="color:#9cdcfe">numbers</span>.<span style="color:#dcdcaa">filter</span>(<span style="color:#9cdcfe">number</span> <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">number</span> % <span style="color:#b5cea8">2</span> === <span style="color:#b5cea8">1</span>); <span style="color:#6a9955">// filter to array of even numbers only</span></div><div>                    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'odd numbers count:'</span>, <span style="color:#9cdcfe">oddNumbers</span>.<span style="color:#9cdcfe">length</span>);</div><div>                    })</div><div>    .<span style="color:#dcdcaa">catch</span>(<span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">error</span>);</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="font-size:10pt;background-color:transparent">3. Mix of Callback and Promise: </b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">readFileAsArray</span> = <span style="color:#569cd6">function</span>(<span style="color:#9cdcfe">file</span>, <span style="color:#9cdcfe">cb</span> = () <span style="color:#569cd6">=&gt;</span> {}) {</div><div>        <span style="color:#c586c0">return</span> <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Promise</span>((<span style="color:#9cdcfe">resolve</span>, <span style="color:#9cdcfe">reject</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#9cdcfe">file</span>, <span style="color:#569cd6">function</span>(<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) {</div><div>                <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) {</div><div>                    <span style="color:#9cdcfe">reject</span>(<span style="color:#9cdcfe">err</span>);</div><div>                    <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">cb</span>(<span style="color:#9cdcfe">err</span>);</div><div>                }</div><br /><div>                <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">lines</span> = <span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>().<span style="color:#dcdcaa">trim</span>().<span style="color:#dcdcaa">split</span>(<span style="color:#ce9178">'</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>                <span style="color:#9cdcfe">resolve</span>(<span style="color:#9cdcfe">lines</span>);</div><div>                <span style="color:#9cdcfe">cb</span>(<span style="color:#569cd6">null</span>, <span style="color:#9cdcfe">lines</span>);</div><div>            });</div><div>        });</div><div>    };</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">    <span style="color:#6a9955">// Both callback caller and promised function callers works perfectly</span></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="font-size:10pt;background-color:transparent">4. Async</b></div><div><b style="font-size:10pt;background-color:transparent"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// async function -  allows us to consider the 'async function' as 'sync function' using 'async and await'</span></div><div>    <span style="color:#569cd6">async</span> <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">countOdd</span> () {                                <span style="color:#6a9955">// Note: 'async' </span></div><div>        <span style="color:#c586c0">try</span> {</div><div>            <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">lines</span> = <span style="color:#c586c0">await</span> <span style="color:#dcdcaa">readFileAsArray</span>(<span style="color:#ce9178">'./numbers'</span>);   <span style="color:#6a9955">// Note: 'await'</span></div><div>            <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">numbers</span> = <span style="color:#9cdcfe">lines</span>.<span style="color:#dcdcaa">map</span>(<span style="color:#4ec9b0">Number</span>);</div><div>            <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">oddCount</span> = <span style="color:#9cdcfe">numbers</span>.<span style="color:#dcdcaa">filter</span>(<span style="color:#9cdcfe">number</span> <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">number</span> % <span style="color:#b5cea8">2</span> === <span style="color:#b5cea8">1</span>).<span style="color:#9cdcfe">length</span>;</div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'odd numbers count:'</span>, <span style="color:#9cdcfe">oddCount</span>);</div><div>        } </div><div>        <span style="color:#c586c0">catch</span>(<span style="color:#9cdcfe">err</span>) {</div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">error</span>(<span style="color:#9cdcfe">err</span>);</div><div>        }</div><div>    }</div><br /><div>    <span style="color:#dcdcaa">countOdd</span>();</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">6. File System:</b></div><div><b>Task 1: Truncate all the file content(size) into half the size inside a directory called 'tempDir'.</b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">path</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'path'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">dirname</span> = <span style="color:#51b6c4">path</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#9cdcfe">__dirname</span>, <span style="color:#ce9178">'tempDir'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">files</span> = <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readdirSync</span>(<span style="color:#51b6c4">dirname</span>); <span style="color:#6a9955">// read the file names (NOT the full path) from the directory</span></div><br /><div>    <span style="color:#51b6c4">files</span>.<span style="color:#dcdcaa">forEach</span>(<span style="color:#9cdcfe">file</span> <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">filePath</span> = <span style="color:#51b6c4">path</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#51b6c4">dirname</span>, <span style="color:#9cdcfe">file</span>); <span style="color:#6a9955">// file full path </span></div><div>        <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">stat</span>(<span style="color:#51b6c4">filePath</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">stats</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>            <span style="color:#6a9955">// Truncate the file into half the size</span></div><div>            <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">truncate</span>(<span style="color:#51b6c4">filePath</span>, <span style="color:#9cdcfe">stats</span>.<span style="color:#9cdcfe">size</span>/<span style="color:#b5cea8">2</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>                <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>            });</div><div>        });</div><div>    });</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="font-size:10pt;background-color:transparent">Task 2: Create a directory 'tempDir' and create 10 empty files with different creation day.</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">path</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'path'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">dirname</span> = <span style="color:#51b6c4">path</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#9cdcfe">__dirname</span>, <span style="color:#ce9178">'tempDir'</span>);</div><br /><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">mkdirSync</span>(<span style="color:#51b6c4">dirname</span>);  <span style="color:#6a9955">// Creates a directory</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">ms1Day</span> = <span style="color:#b5cea8">24</span>*<span style="color:#b5cea8">60</span>*<span style="color:#b5cea8">60</span>*<span style="color:#b5cea8">1000</span>;</div><br /><div>    <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span>=<span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span> &lt; <span style="color:#b5cea8">10</span>; <span style="color:#9cdcfe">i</span>++) {</div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">filePath</span> = <span style="color:#51b6c4">path</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#51b6c4">dirname</span>, <span style="color:#ce9178">`file</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">i</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>        <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">writeFile</span>(<span style="color:#51b6c4">filePath</span>, <span style="color:#9cdcfe">i</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {        <span style="color:#6a9955">// creates 10 empty files</span></div><div>            <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>            <span style="color:#569cd6">const</span> <span style="color:#51b6c4">time</span> = (<span style="color:#4ec9b0">Date</span>.<span style="color:#dcdcaa">now</span>() - <span style="color:#9cdcfe">i</span>*<span style="color:#51b6c4">ms1Day</span>)/<span style="color:#b5cea8">1000</span>;</div><div>            <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">utimes</span>(<span style="color:#51b6c4">filePath</span>, <span style="color:#51b6c4">time</span>, <span style="color:#51b6c4">time</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {  <span style="color:#6a9955">// utimes - change the file creation time</span></div><div>                <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>            });</div><div>        });</div><div>    }</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">Task 3: Delete all the files in a directory 'tempDir' which are 7 days old.</b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">path</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'path'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">dirname</span> = <span style="color:#51b6c4">path</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#9cdcfe">__dirname</span>, <span style="color:#ce9178">'tempDir'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">files</span> = <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readdirSync</span>(<span style="color:#51b6c4">dirname</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">ms1Day</span> = <span style="color:#b5cea8">24</span>*<span style="color:#b5cea8">60</span>*<span style="color:#b5cea8">60</span>*<span style="color:#b5cea8">1000</span>; <span style="color:#6a9955">// milli seconds per day</span></div><br /><div>    <span style="color:#51b6c4">files</span>.<span style="color:#dcdcaa">forEach</span>(<span style="color:#9cdcfe">file</span> <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">filePath</span> = <span style="color:#51b6c4">path</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#51b6c4">dirname</span>, <span style="color:#9cdcfe">file</span>);</div><div>        <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">stat</span>(<span style="color:#51b6c4">filePath</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">stats</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><br /><div>            <span style="color:#c586c0">if</span> ((<span style="color:#4ec9b0">Date</span>.<span style="color:#dcdcaa">now</span>() - <span style="color:#9cdcfe">stats</span>.<span style="color:#9cdcfe">mtime</span>.<span style="color:#dcdcaa">getTime</span>() &gt; <span style="color:#b5cea8">7</span>*<span style="color:#51b6c4">ms1Day</span>)) {</div><div>                <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">unlink</span>(<span style="color:#51b6c4">filePath</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {          <span style="color:#6a9955">// Delete the file which is 7 days old.</span></div><div>                    <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>                    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`deleted </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">filePath</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>                });</div><div>            }</div><div>        });</div><div>    });</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">Note: fs module has another useful function for the directory which watches any change inside the files in a directory. </b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">watch</span>(<span style="color:#51b6c4">dirname</span>, (<span style="color:#9cdcfe">eventType</span>, <span style="color:#9cdcfe">filename</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">eventType</span> === <span style="color:#ce9178">'rename'</span>) { </div><div>        <span style="color:#6a9955">// add or delete of file(s) in a directory</span></div><div>      }</div><div>      <span style="color:#c586c0">else</span> {</div><div>        <span style="color:#6a9955">// any file content has changed</span></div><div>      }</div><div>    });</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">Task 4: Create a file with 1 Million lines of text.</b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">file</span> = <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createWriteStream</span>(<span style="color:#ce9178">'./big.file'</span>);</div><br /><div>    <span style="color:#6a9955">// writing 1 Million lines </span></div><div>    <span style="color:#c586c0">for</span>(<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span>=<span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt;= <span style="color:#b5cea8">1e6</span>; <span style="color:#9cdcfe">i</span>++) {</div><div>      <span style="color:#51b6c4">file</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>    }</div><br /><div>    <span style="color:#51b6c4">file</span>.<span style="color:#dcdcaa">end</span>();</div></div></div><div><br /></div><div><b style="background-color:transparent;font-size:10pt">Task 5: Create a Server which send the <font color="#ff0000">response </font>of 1 Million lines of text content from a <font color="#ff0000">file </font>to the client:</b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Solution 1: Really bad approach !!!. It may leads to memory overflow/crash.</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>).<span style="color:#dcdcaa">createServer</span>();</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#6a9955">// readFile - Load the full file content(data) into RAM memory before sending into response msg. NOT doing any streaming</span></div><div>        <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readFile</span>(<span style="color:#ce9178">'./big.file'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>        </div><div>            <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#9cdcfe">data</span>);</div><div>        });</div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>);</div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div>    <span style="color:#6a9955">// Solution 2: Streaming the data instead of storing all in RAM - Most efficient.</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>).<span style="color:#dcdcaa">createServer</span>();</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#6a9955">// createReadStream: Reads in file data in chunks and streams the chuck of data one after another as response.</span></div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">src</span> = <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createReadStream</span>(<span style="color:#ce9178">'./big.file'</span>);</div><div>        <span style="color:#51b6c4">src</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">res</span>); <span style="color:#6a9955">// Note: res obj is a writeable stream</span></div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>);</div></div></div></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt"><br /></b></div><div><b style="background-color:transparent;font-size:10pt">Event Emitter:</b></div><div><br /></div><div>Streams are Event Emitters</div><div>Ex 1: process.stdin, process.stdout are event emitters</div><div><br /></div><div>Ex 2:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">EventEmitter</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">myEmitter</span> = <span style="color:#569cd6">new</span> <span style="color:#9cdcfe">EventEmitter</span>();</div><br /><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'TEST_EVENT'</span>); <span style="color:#6a9955">// fires the event 'TEST_EVENT'</span></div><br /><div>    <span style="color:#6a9955">// subscribes for the event 'TEST_EVENT' </span></div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'TEST_EVENT'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>                                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Fired 'TEST_EVENT' by 'emit' method is capture here by 'on' method"</span>);</div><div>                                    });</div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'TEST_EVENT'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>                                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Fired 'TEST_EVENT' by 'emit' method is capture here by 'on' method"</span>);</div><div>                                    });</div><div>    <span style="color:#6a9955">// Note: Above subscribe methods will not capture the fired event bcos it is subscribed after the event emit.</span></div><div>    <span style="color:#6a9955">// So either those methods should be moved above emit() or emit method should be inside the setTimeout.</span></div></div></div><div><br /></div><div>Solution 1:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">EventEmitter</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">myEmitter</span> = <span style="color:#569cd6">new</span> <span style="color:#9cdcfe">EventEmitter</span>();</div><br /><div>    <span style="color:#6a9955">// subscribes for the event 'TEST_EVENT' </span></div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'TEST_EVENT'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>                                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Fired 'TEST_EVENT' by 'emit' method is capture here by 'on' method"</span>);</div><div>                                    });</div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'TEST_EVENT'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>                                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Fired 'TEST_EVENT' by 'emit' method is capture here by 'on' method"</span>);</div><div>                                    });</div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'TEST_EVENT'</span>); <span style="color:#6a9955">// fires the event 'TEST_EVENT'</span></div></div></div><div><br /></div><div>Solution 2:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">EventEmitter</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">myEmitter</span> = <span style="color:#569cd6">new</span> <span style="color:#9cdcfe">EventEmitter</span>();</div><div>    <span style="color:#dcdcaa">setTimeout</span>(() <span style="color:#569cd6">=&gt;</span> {</div><div>                        <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'TEST_EVENT'</span>); <span style="color:#6a9955">// fires the event 'TEST_EVENT'</span></div><div>                    }, <span style="color:#b5cea8">0</span>)</div><br /><div>    <span style="color:#6a9955">// subscribes for the event 'TEST_EVENT' </span></div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'TEST_EVENT'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>                                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Fired 'TEST_EVENT' by 'emit' method is capture here by 'on' method"</span>);</div><div>                                    });</div><div>    <span style="color:#9cdcfe">myEmitter</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'TEST_EVENT'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>                                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Fired 'TEST_EVENT' by 'emit' method is capture here by 'on' method"</span>);</div><div>                                    });</div></div></div><div><br /></div><div>Extending Event:</div><div><br /></div><div>1. Emit and Catch the custom events:</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">EventEmitter</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Printer</span> <span style="color:#569cd6">extends</span> <span style="color:#9cdcfe">EventEmitter</span> {  <span style="color:#6a9955">// Extend the EventEmitter class</span></div><div>        <span style="color:#dcdcaa">bar</span>(<span style="color:#9cdcfe">taskFunc</span>) {</div><div>            <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'BEGIN_PRINT_EVT'</span>);         <span style="color:#6a9955">// Fire an Event</span></div><div>            <span style="color:#9cdcfe">taskFunc</span>();</div><div>            <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'END_PRINT_EVT'</span>);           <span style="color:#6a9955">// Fire an Event</span></div><div>        }</div><div>    }</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">print</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Printer</span>();</div><div>    <span style="color:#6a9955">// Register the event handler</span></div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'BEGIN_PRINT_EVT'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'BEGIN_PRINT_EVT - event fired'</span>));</div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'END_PRINT_EVT'</span>,   () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'END_PRINT_EVT - event fired'</span>));</div><br /><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">bar</span>(() <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'*** Executing task function ***'</span>));</div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    BEGIN_PRINT_EVT - event fired</span></div><div><span style="color:#6a9955">    *** Executing task function ***</span></div><div><span style="color:#6a9955">    END_PRINT_EVT - event fired</span></div></div></div><div><br /></div><div><br /></div><div>2. Reading the source file:</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">EventEmitter</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Printer</span> <span style="color:#569cd6">extends</span> <span style="color:#9cdcfe">EventEmitter</span> {</div><div>        <span style="color:#dcdcaa">bar</span>(<span style="color:#9cdcfe">someAsyncFunc</span>, ...<span style="color:#9cdcfe">args</span>) {</div><div>            <span style="color:#9cdcfe">someAsyncFunc</span>(...<span style="color:#9cdcfe">args</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>                <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) {</div><div>                    <span style="color:#c586c0">return</span> <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'SOME_DATA_READ_ERROR_EVT'</span>, <span style="color:#9cdcfe">err</span>); <span style="color:#6a9955">// emit user defined event - 'SOME_DATA_READ_ERROR_EVT'</span></div><div>                }</div><br /><div>                <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'SOME_DATA_READ_COMPLETE_EVT'</span>, <span style="color:#9cdcfe">data</span>); <span style="color:#6a9955">// emit the user defined event once reading is completed</span></div><div>            });</div><div>        }</div><div>    }</div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:rgb(86,156,214)">const</span> <span style="color:rgb(156,220,254)">print</span> = <span style="color:rgb(86,156,214)">new</span> <span style="color:rgb(78,201,176)">Printer</span>();</div><div style="line-height:22px"><br /><div>    <span style="color:#6a9955">// All are listening to same event</span></div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'SOME_DATA_READ_COMPLETE_EVT'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Bytes - Length:     </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span>.<span style="color:#9cdcfe">length</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); });</div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'SOME_DATA_READ_COMPLETE_EVT'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Show the Content:   </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>()<span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); });</div><div>    <span style="color:#6a9955">// prependListener - event handler gets called first for the event 'SOME_DATA_READ_COMPLETE_EVT' even though it is down the line !</span></div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">prependListener</span>(<span style="color:#ce9178">'SOME_DATA_READ_COMPLETE_EVT'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Charaters - Length: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>().<span style="color:#9cdcfe">length</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); }); </div><br /><div>    <span style="color:#6a9955">// Listener can be remove by 'removeListener' method</span></div><div>    <span style="color:#6a9955">// print.removeListener('SOME_DATA_READ_COMPLETE_EVT')</span></div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Handling Error !</span></div><div>    <span style="color:#6a9955">// Method 1: Listen for 'custom error' event</span></div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'SOME_DATA_READ_ERROR_EVT'</span>, <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">error</span>);</div><div>    </div><div>    <span style="color:#6a9955">// Method 2: Listen for 'uncaughtException' from the Node process.</span></div><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">once</span>(<span style="color:#ce9178">'uncaughtException'</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#6a9955">// once - it is executed only once and do a one time cleanup.</span></div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">err</span>);</div><div>        <span style="color:#6a9955">// do some cleanup</span></div><div>        <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">exit</span>(<span style="color:#b5cea8">1</span>); <span style="color:#6a9955">// exit with the status 1 (unsuccessful status)</span></div><div>    });</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// print.bar(fs.readFile, ''); // this makes the NODE process to crash and throws an exception. It needs to be caught.</span></div><div>    <span style="color:#9cdcfe">print</span>.<span style="color:#dcdcaa">bar</span>(<span style="color:#9cdcfe">fs</span>.<span style="color:#dcdcaa">readFile</span>, <span style="color:#9cdcfe">__filename</span>); <span style="color:#6a9955">// read the this 'source file'</span></div></div></div><div><br /></div><div><b>2 ways Server and Client Communication using Events:</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955"><span>    </span>// clients.js</span></div><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">EventEmitter</span>  = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">readline</span>      = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'readline'</span>); <span style="color:#6a9955">// reading/writing the input/output streams(command prompt)</span></div><br /><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">rLn</span> = <span style="color:#9cdcfe">readline</span>.<span style="color:#dcdcaa">createInterface</span>({</div><div>                                       <span>    </span> <span style="color:#9cdcfe">input</span><span style="color:#9cdcfe">:</span>  <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdin</span>,</div><div>                                      <span>    </span>  <span style="color:#9cdcfe">output</span><span style="color:#9cdcfe">:</span> <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span></div><div>                                  <span>    </span>  });</div><br /><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">client</span> = <span style="color:#569cd6">new</span> <span style="color:#9cdcfe">EventEmitter</span>();</div><div><span style="color:#569cd6"><span>    </span>const</span> <span style="color:#9cdcfe">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./server'</span>)(<span style="color:#9cdcfe">client</span>); <span style="color:#6a9955">// 2-way client-server communication</span></div><br /><div><span style="color:#6a9955"><span>    </span>// takes an input from 'USER' and send to 'SERVER'</span></div><div><span style="color:#9cdcfe"><span>    </span>rLn</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'line'</span>, (<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {                   <span style="color:#6a9955">// 'line' - Event is NOT a user defined. </span></div><div>    <span>    </span><span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`clientSide: user input to Client: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">res</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><br /><div>    <span>    </span><span style="color:#569cd6">let</span> <span style="color:#9cdcfe">first</span>, <span style="color:#9cdcfe">restAll</span>;</div><div>   <span>    </span> [<span style="color:#9cdcfe">first</span>, ...<span style="color:#9cdcfe">restAll</span>] = <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">split</span>(<span style="color:#ce9178">' '</span>); <span style="color:#6a9955">// add 2 3 4 5 6 =&gt; add   |    2,3,4,5,6</span></div><br /><div>    <span>    </span><span style="color:#6a9955">// SEND msg from 'CLIENT' to 'SERVER' </span></div><div>    <span>    </span><span style="color:#9cdcfe">client</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'SOME_CLIENT_EVT'</span>, <span style="color:#9cdcfe">first</span>, <span style="color:#9cdcfe">restAll</span>);      <span style="color:#6a9955">// notify the server</span></div><div><span>    </span>});</div><br /><div><span style="color:#6a9955"><span>    </span>// Receive msg from 'SERVER' to 'CLIENT'</span></div><div><span style="color:#9cdcfe"><span>    </span>server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'SOME_SERVER_EVT'</span>, (<span style="color:#9cdcfe">msg</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`clientSide: msg from Server: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">msg</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); });</div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// server.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">EventEmitter</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'events'</span>);</div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Server</span> <span style="color:#569cd6">extends</span> <span style="color:#9cdcfe">EventEmitter</span> {</div><div>        <span style="color:#569cd6">constructor</span>(<span style="color:#9cdcfe">client</span>) {</div><div>            <span style="color:#569cd6">super</span>();</div><br /><div>            <span style="color:#6a9955">// NOTE: nextTick is MUST. Bcos client registers handle for this event bit late.</span></div><div>            <span style="color:#6a9955">// SEND msg from 'SERVER' to 'CLIENT'</span></div><div>            <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">nextTick</span>(() <span style="color:#569cd6">=&gt;</span> {</div><div>                <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">emit</span>(<span style="color:#ce9178">'SOME_SERVER_EVT'</span>, <span style="color:#ce9178">"WELCOME"</span>);      <span style="color:#6a9955">// notify the client</span></div><div>            });</div><br /><div>            <span style="color:#6a9955">// RECEIVE msg from 'CLIENT' to 'SERVER'</span></div><div>            <span style="color:#9cdcfe">client</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'SOME_CLIENT_EVT'</span>, (<span style="color:#9cdcfe">first</span>, <span style="color:#9cdcfe">restAll</span>) <span style="color:#569cd6">=&gt;</span> { </div><div>                    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`serverSide: msg from Client: first: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">first</span><span style="color:#569cd6">}</span><span style="color:#ce9178">  restAll: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">restAll</span>.<span style="color:#dcdcaa">join</span>(<span style="color:#ce9178">' '</span>)<span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); </div><div>                });</div><div>                <span style="color:#6a9955">// restAll           = 1,2,3,4,5,6</span></div><div>                <span style="color:#6a9955">// restAll.join(' ') = 1 2 3 4 5 6</span></div><div>        }</div><div>    }</div><br /><div>    <span style="color:#6a9955">// export a function which takes an  argument. Instantiate a server object by client object</span></div><div>    <span style="color:#4ec9b0">module</span>.<span style="color:#4ec9b0">exports</span> = (<span style="color:#9cdcfe">client</span>) <span style="color:#569cd6">=&gt;</span> <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Server</span>(<span style="color:#9cdcfe">client</span>); <span style="color:#6a9955">// get input from client</span></div><br /></div></div><div><b><br /></b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">C:\Users\skrishnan\Documents\GitHub\sridharkritha.github.io\nodejs\tutorials-nodejs\advanced-nodejs\3.4&gt;node client.js</span></div><div><span style="color:#6a9955">clientSide: msg from Server: WELCOME</span></div><div><span style="color:#6a9955">hello sridhar</span></div><div><span style="color:#6a9955">clientSide: user input to Client: hello sridhar</span></div><div><span style="color:#6a9955">serverSide: msg from Client: first: hello  restAll: sridhar</span></div><div><span style="color:#6a9955">add 1 2 3 4 5</span></div><div><span style="color:#6a9955">clientSide: user input to Client: add 1 2 3 4 5</span></div><div><span style="color:#6a9955">serverSide: msg from Client: first: add  restAll: 1 2 3 4 5</span></div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><b><br /></b></div><div><b><br /></b></div><div><b>2 ways Server(1) and Clients(n) Communication using TCP Sockets:</b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// 1 server, n clients communication</span></div><div><div style="line-height:22px"><span style="color:#6a9955">    // net.js</span></div></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'net'</span>).<span style="color:#dcdcaa">createServer</span>();</div><div>    <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">counter</span> = <span style="color:#b5cea8">0</span>;</div><br /><div>    <span style="color:#6a9955">// 'connection' event fired when client's connect to the server</span></div><div>    <span style="color:#6a9955">// For each client connect a dedicated socket will be created between the server and client.</span></div><div>    <span style="color:#6a9955">// socket - is a duplex stream interface</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'connection'</span>, <span style="color:#9cdcfe">socket</span> <span style="color:#569cd6">=&gt;</span> {      </div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#9cdcfe">id</span> = <span style="color:#9cdcfe">counter</span>++;                  <span style="color:#6a9955">// assign a id for the created socket</span></div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Client connected'</span>);        <span style="color:#6a9955">// writes to server side</span></div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'Welcome new client!</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);  <span style="color:#6a9955">// writes to Telnet client from Server</span></div><br /><div>        <span style="color:#6a9955">// 'data' event fired when client's writes something to the 'socket' data buffer through the telnet client.</span></div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, <span style="color:#9cdcfe">data</span> <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'data is:'</span>, <span style="color:#9cdcfe">data</span>);      <span style="color:#6a9955">// &lt;Buffer 6c 86 6c 0a&gt; : data will be in 'binary format' inside the  buffer memory</span></div><br /><div>            <span style="color:#6a9955">// Echo back to the user (Telnet client)</span></div><div>            <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">`Socket: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">socket</span>.<span style="color:#9cdcfe">id</span><span style="color:#569cd6">}</span><span style="color:#ce9178">: `</span>); </div><div>            <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#9cdcfe">data</span>);                 <span style="color:#6a9955">// write the data back to client. Now data is converted to UTF-8(by default)</span></div><div>                                                <span style="color:#6a9955">//  Hello World (not in binary format)</span></div><div>            <span style="color:#6a9955">// socket.write(data, 'utf8');      // 'utf8' - is default</span></div><div>        });</div><br /><div>        <span style="color:#6a9955">// socket.setEncoding('utf8');          // Globally set all encoding 'utf8'. So buffer data NO longer be Binary. It will be STRING.</span></div><br /><div>        <span style="color:#6a9955">// 'end' event fired when the user disconnected the connection with the server</span></div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'end'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Client disconnected'</span>);</div><div>        });</div><div>    });</div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Server bound'</span>));</div></div></div><div><b><br /></b></div><div><b>1. Start the server in cmd:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">  node net.js</span></div></div><div><b><br /></b></div><div><b>2. Start the Telnet Client in another cmd:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    telnet</span></div><div><span style="color:#6a9955">    open localhost 8000</span></div></div></div><div>       </div><div>         type some thing once the connection has been established.</div><div><br /></div><div><div><b>3. Start the one more Telnet Client in yet another cmd:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:rgb(106,153,85)">    telnet</span></div><div><span style="color:rgb(106,153,85)">    open localhost 8000</span></div></div></div><div><b><br /></b></div><div>       type some thing once the connection has been established.</div></div><div><br /></div><div><b>Note:</b> TELNET - is an application level protocol over TCP. It provides a command line interface for connecting the remote host. It's default port number is 23. Think like doing remote login to the server from the client's command line terminal. Ex: PuTTy, VLC</div><div><br /></div><div><b><br /></b></div><div><b>Group Chat:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// 1 server, n clients communication - GROUP CHAT</span></div><div>    <span style="color:#6a9955">// chat.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'net'</span>).<span style="color:#dcdcaa">createServer</span>(); <span style="color:#6a9955">// Create a central server(1)</span></div><div>    <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">counter</span> = <span style="color:#b5cea8">0</span>;</div><div>    <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">sockets</span> = {};</div><br /><div>    <span style="color:#6a9955">// Each client connection to server creates a dedicated Sockets for communication</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'connection'</span>, <span style="color:#9cdcfe">socket</span> <span style="color:#569cd6">=&gt;</span> {      </div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#9cdcfe">id</span> = <span style="color:#9cdcfe">counter</span>++;                  <span style="color:#6a9955">// assign a id for the newly created socket</span></div><div>        <span style="color:#9cdcfe">sockets</span>[<span style="color:#9cdcfe">socket</span>.<span style="color:#9cdcfe">id</span>] = <span style="color:#9cdcfe">socket</span>;            <span style="color:#6a9955">// collect all sockets in global object</span></div><br /><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Client connected'</span>);        <span style="color:#6a9955">// writes to server side</span></div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'Welcome new client!</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);  <span style="color:#6a9955">// writes to the connected Telnet client from Server</span></div><br /><div>        <span style="color:#6a9955">// 'data' event fired when client's writes something to the 'socket' data buffer through the telnet client.</span></div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, <span style="color:#9cdcfe">data</span> <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#4ec9b0">Object</span>.<span style="color:#dcdcaa">entries</span>(<span style="color:#9cdcfe">sockets</span>).<span style="color:#dcdcaa">forEach</span>(([<span style="color:#9cdcfe">key</span>, <span style="color:#9cdcfe">s</span>]) <span style="color:#569cd6">=&gt;</span> {</div><div>                <span style="color:#9cdcfe">s</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">`Socket: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">socket</span>.<span style="color:#9cdcfe">id</span><span style="color:#569cd6">}</span><span style="color:#ce9178">: `</span>);</div><div>                <span style="color:#9cdcfe">s</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#9cdcfe">data</span>);                      <span style="color:#6a9955">// Broadcast the data received one client to all the connected clients</span></div><div>            });</div><div>        });</div><br /><div>        <span style="color:#6a9955">// 'end' event fired when the user disconnected the connection with the server</span></div><div>        <span style="color:#9cdcfe">socket</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'end'</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#569cd6">delete</span> <span style="color:#9cdcfe">sockets</span>[<span style="color:#9cdcfe">socket</span>.<span style="color:#9cdcfe">id</span>]; <span style="color:#6a9955">// MUST deleted the closed socket, otherwise it will get crash</span></div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Client disconnected'</span>);</div><div>        });</div><div>    });</div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Server bound'</span>));</div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">CMD1                    CMD2                        CMD2                            CMD2</span></div><div><span style="color:#6a9955">node chat.js            open localhost 8000         open localhost 8000             open localhost 8000</span></div><br /><div><span style="color:#6a9955">Server bound            Welcom new client!          Welcom new client!              Welcom new client!</span></div><div><span style="color:#6a9955">                        sridhar</span></div><div><span style="color:#6a9955">Client connected        0: sridhar                  0: sridhar                      0: sridhar</span></div><div><span style="color:#6a9955">                                                    kavitha</span></div><div><span style="color:#6a9955">Client connected        1: kavitha                  1: kavitha                      1: kavitha</span></div><div><span style="color:#6a9955">                                                                                    muthu</span></div><div><span style="color:#6a9955">Client connected        2: muthu                    2: muthu                        2: muthu</span></div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><b><br /></b></div><div><b>Server - Client Communication using UDP sockets:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    // udp.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">dgram</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'dgram'</span>); <span style="color:#6a9955">// UDP Datagram Sockets</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">PORT</span> = <span style="color:#b5cea8">3333</span>;</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">HOST</span> = <span style="color:#ce9178">'127.0.0.1'</span>;</div><br /><div>    <span style="color:#6a9955">//////////////////////////////////////////////////////////////////////////////////////////////////</span></div><div>    <span style="color:#6a9955">// Server</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#51b6c4">dgram</span>.<span style="color:#dcdcaa">createSocket</span>(<span style="color:#ce9178">'udp4'</span>); <span style="color:#6a9955">// or   'udp6'</span></div><div>    <span style="color:#6a9955">// 'listening' event fired whenever the UDP server starts listening</span></div><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'listening'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'UDP Server listening'</span>));</div><div>    <span style="color:#6a9955">// 'message' event fired whenever the socket receives the msg. </span></div><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'message'</span>, (<span style="color:#9cdcfe">msg</span>, <span style="color:#9cdcfe">remoteInfo</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">remoteInfo</span>.<span style="color:#9cdcfe">address</span><span style="color:#569cd6">}</span><span style="color:#ce9178">:</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">remoteInfo</span>.<span style="color:#9cdcfe">port</span><span style="color:#569cd6">}</span><span style="color:#ce9178"> - </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">msg</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">bind</span>(<span style="color:#51b6c4">PORT</span>, <span style="color:#51b6c4">HOST</span>);</div><br /><div>    <span style="color:#6a9955">//////////////////////////////////////////////////////////////////////////////////////////////////</span></div><div>    <span style="color:#6a9955">// Client</span></div><div>    <span style="color:#6a9955">// Create a client, send a msg and close it. Do it for 3 times. </span></div><div>    <span style="color:#6a9955">// It creates 3 different clients with different socket with DIFFERENT PORT NUMBERS.</span></div><div>    <span style="color:#c586c0">for</span>(<span style="color:#569cd6">var</span> <span style="color:#9cdcfe">i</span> = <span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span> &lt; <span style="color:#b5cea8">3</span>; ++<span style="color:#9cdcfe">i</span>) {</div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">client</span> = <span style="color:#51b6c4">dgram</span>.<span style="color:#dcdcaa">createSocket</span>(<span style="color:#ce9178">'udp4'</span>);</div><div>        <span style="color:#6a9955">// 1. Sending 'string' directly </span></div><div>        <span style="color:#51b6c4">client</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#ce9178">"Sridhar Krishnan"</span>, <span style="color:#51b6c4">PORT</span>, <span style="color:#51b6c4">HOST</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>            <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'UDP message sent'</span>);</div><div>            <span style="color:#51b6c4">client</span>.<span style="color:#dcdcaa">close</span>(); <span style="color:#6a9955">// close the socket</span></div><div>        });</div><div>    }</div><br /><div>    <span style="color:#6a9955">// 2. Sending buffer data fully/partially </span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">msg</span> = <span style="color:#4ec9b0">Buffer</span>.<span style="color:#dcdcaa">from</span>(<span style="color:#ce9178">'Pluralsight rocks'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">client</span> = <span style="color:#51b6c4">dgram</span>.<span style="color:#dcdcaa">createSocket</span>(<span style="color:#ce9178">'udp4'</span>);</div><div>    <span style="color:#51b6c4">client</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#51b6c4">msg</span>, <span style="color:#b5cea8">0</span>, <span style="color:#b5cea8">11</span>, <span style="color:#51b6c4">PORT</span>, <span style="color:#51b6c4">HOST</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {        <span style="color:#6a9955">// Pluralsight</span></div><div>        <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'UDP message sent'</span>);</div><br /><div>        <span style="color:#51b6c4">client</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#51b6c4">msg</span>, <span style="color:#b5cea8">11</span>, <span style="color:#b5cea8">6</span>, <span style="color:#51b6c4">PORT</span>, <span style="color:#51b6c4">HOST</span>, (<span style="color:#9cdcfe">err</span>) <span style="color:#569cd6">=&gt;</span> {      <span style="color:#6a9955">// rocks</span></div><div>            <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) <span style="color:#c586c0">throw</span> <span style="color:#9cdcfe">err</span>;     </div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'UDP message sent'</span>);</div><div>            <span style="color:#51b6c4">client</span>.<span style="color:#dcdcaa">close</span>();</div><div>        });</div><div>    });</div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    node udp.js</span></div><div><span style="color:#6a9955">    UDP Server listening</span></div><div><span style="color:#6a9955">    UDP message sent</span></div><div><span style="color:#6a9955">    UDP message sent</span></div><div><span style="color:#6a9955">    UDP message sent</span></div><div><span style="color:#6a9955">    UDP message sent</span></div><div><span style="color:#6a9955">    UDP message sent</span></div><div><span style="color:#6a9955">    127.0.0.1:61797 - Sridhar Krishnan</span></div><div><span style="color:#6a9955">    127.0.0.1:61798 - Sridhar Krishnan</span></div><div><span style="color:#6a9955">    127.0.0.1:61799 - Sridhar Krishnan</span></div><div><span style="color:#6a9955">    127.0.0.1:61800 - Pluralsight</span></div><div><span style="color:#6a9955">    127.0.0.1:61800 -  rocks</span></div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><b>DNS module:</b></div><div><b><br /></b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">const</span> <span style="color:#51b6c4">dns</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'dns'</span>); <span style="color:#6a9955">// webAddressName &lt;-&gt; IpAddresses</span></div><br /><div><span style="color:#6a9955">// 1a. webAddressName to IpAddresses</span></div><div><span style="color:#51b6c4">dns</span>.<span style="color:#dcdcaa">lookup</span>(<span style="color:#ce9178">'pluralsight.com'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">address</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">address</span>); }); <span style="color:#6a9955">// 54.149.92.26</span></div><div><span style="color:#6a9955">// 1b. webAddressName to IpAddresses </span></div><div><span style="color:#51b6c4">dns</span>.<span style="color:#dcdcaa">resolve4</span>(<span style="color:#ce9178">'pluralsight.com'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">address</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">address</span>); }); <span style="color:#6a9955">// [ '52.25.161.103', '52.40.149.203', '54.149.92.26' ]</span></div><div><span style="color:#6a9955">// 1c. webAddressName to IpAddresses (with Mx records)</span></div><div><span style="color:#51b6c4">dns</span>.<span style="color:#dcdcaa">resolveMx</span>(<span style="color:#ce9178">'pluralsight.com'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">address</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">address</span>); });<span style="color:#6a9955">// [{ exchange: 'alt2.aspmx.l.google.com', priority: 5 },</span></div><div>                                                                              <span style="color:#6a9955">//  { exchange: 'aspmx.l.google.com', priority: 1 }]</span></div><div><span style="color:#6a9955">// 2. IpAddresses to webAddressName</span></div><div><span style="color:#51b6c4">dns</span>.<span style="color:#dcdcaa">reverse</span>(<span style="color:#ce9178">'35.161.75.227'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">hostnames</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">hostnames</span>);}); <span style="color:#6a9955">// [ 'ec2-35-161-75-227.us-west-2.compute.amazonaws.com' ]</span></div></div></div><div><b><br /></b></div><div><b><br /></b></div><div><b>Web servers:</b></div><div><br /></div><div><b>Native HTTP server:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Method 1:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">http</span>   = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span> = <span style="color:#9cdcfe">http</span>.<span style="color:#dcdcaa">createServer</span>((<span style="color:#9cdcfe">res</span>,<span style="color:#9cdcfe">req</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">req</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">"Hello Sridhar"</span>); }); <span style="color:#6a9955">// res, req are objects and streams</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">4242</span>, () <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Server is running"</span>)});</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Method 2 - Separate the request listener:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">http</span>            = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">requestListener</span> = (<span style="color:#9cdcfe">res</span>,<span style="color:#9cdcfe">req</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">req</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">"Hello Sridhar"</span>); } <span style="color:#6a9955">// requestListener gets called whenever the 'request' event is fired</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span>          = <span style="color:#9cdcfe">http</span>.<span style="color:#dcdcaa">createServer</span>(<span style="color:#dcdcaa">requestListener</span>);</div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">4242</span>, () <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Server is running"</span>)});</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Meth0d 3 - Event Emitter way:</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">http</span>            = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">requestListener</span> = (<span style="color:#9cdcfe">res</span>,<span style="color:#9cdcfe">req</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">req</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">"Hello Sridhar"</span>); }  <span style="color:#6a9955">// res, req are objects and streams</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span>          = <span style="color:#9cdcfe">http</span>.<span style="color:#dcdcaa">createServer</span>();                        <span style="color:#6a9955">// create a server</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">"request"</span>, <span style="color:#dcdcaa">requestListener</span>);                              <span style="color:#6a9955">// subscribe for the 'request' event</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">4242</span>, () <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Server is running"</span>)});     <span style="color:#6a9955">// run the created server</span></div></div></div><div><br /></div><div><b>Note:</b></div><div>    Functions are the first class Object =&gt; Functions can be passed just like a normal variable(argument) to another function.</div><div>    Higher Order function                =&gt; Function can takes a another function as the argument or return an another function.</div><div>    ex: createServer() - is a higher order function</div><div><br /></div><div><br /></div><div>What (res, req) has under the hood ?</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#4ec9b0">const</span> <span style="color:#9cdcfe">http</span>            = <span style="color:#dcdcaa">require</span>('<span style="color:#4ec9b0">http</span>');</div><br /><div>    <span style="color:#6a9955">// res, req are objects and also it's stream as well.</span></div><div>    <span style="color:#6a9955">// res - readable stream, req - writeable steam. Bcos these are stream are event emitters so you can use 'emit' and 'on' methods</span></div><div>    <span style="color:#4ec9b0">const</span> <span style="color:#dcdcaa">requestListener</span> = (<span style="color:#9cdcfe">res</span>,<span style="color:#9cdcfe">req</span>) =&gt; { </div><div>        <span style="color:#6a9955">//console.log(res);           // plenty of information</span></div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">dir</span>(<span style="color:#9cdcfe">req</span>, {<span style="color:#9cdcfe">depth</span><span style="color:#9cdcfe">:</span> <span style="color:#b5cea8">0</span>}); <span style="color:#6a9955">// print only the first level of the property NOT nested properties</span></div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">req</span>.<span style="color:#9cdcfe">url</span>);         <span style="color:#6a9955">// print the requesting url</span></div><br /><div>        <span style="color:#6a9955">//req.end("Hello Sridhar");  // req: NOT res.end()</span></div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">"Hello Sridhar"</span>);  <span style="color:#6a9955">// res: write the response</span></div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>();                   <span style="color:#6a9955">// res: stream ends here </span></div><div>    }  <span style="color:#6a9955">// res, req are streams</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span>          = <span style="color:#9cdcfe">http</span>.<span style="color:#dcdcaa">createServer</span>();                        <span style="color:#6a9955">// create a server</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">"request"</span>, <span style="color:#dcdcaa">requestListener</span>);                              <span style="color:#6a9955">// subscribe for the 'request' event</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">4242</span>, () <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">"Server is running"</span>)});     <span style="color:#6a9955">// run the created server</span></div></div></div><div><br /></div><div><br /></div><div><b>Streaming using HTTP Server:</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Streaming HTTP Server</span></div><div>    <span style="color:#6a9955">// 1 server - n clients communication using HTTP</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>).<span style="color:#dcdcaa">createServer</span>();</div><div>    <span style="color:#6a9955">// server is a Emitter object so it has '.on' '.emit' method by inheritance</span></div><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>    <span style="color:#6a9955">// Modify response header</span></div><div>    <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">200</span>, { <span style="color:#ce9178">'content-type'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'text/plain'</span> });</div><div>    <span style="color:#6a9955">// stream data (stream video etc)</span></div><div>    <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'Streaming - First - Chunk</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><br /><div>    <span style="color:#6a9955">// Do further streaming till the end of response msg</span></div><div>    <span style="color:#dcdcaa">setTimeout</span>(<span style="color:#569cd6">function</span> () {</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'Streaming - Second - Chunk</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>        <span style="color:#dcdcaa">setTimeout</span>(<span style="color:#569cd6">function</span> () {</div><div>            <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'Streaming - Third - Chunk</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>            <span style="color:#dcdcaa">setTimeout</span>(<span style="color:#569cd6">function</span> () {</div><div>                <span style="color:#6a9955">// end the response but server is still running and listening</span></div><div>                <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">"Ending the HTTP streaming...bye bye"</span>);</div><div>            }, <span style="color:#b5cea8">3000</span>);</div><div>        }, <span style="color:#b5cea8">3000</span>);</div><div>    }, <span style="color:#b5cea8">3000</span>);</div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>);</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    $ curl -i localhost:8000</span></div><div><span style="color:#6a9955">    HTTP/1.1 200 OK</span></div><div><span style="color:#6a9955">    content-type: text/plain</span></div><div><span style="color:#6a9955">    Date: Thu, 14 May 2020 09:57:09 GMT</span></div><div><span style="color:#6a9955">    Connection: keep-alive</span></div><div><span style="color:#6a9955">    Transfer-Encoding: chunked</span></div><br /><div><span style="color:#6a9955">    Streaming - First - Chunk</span></div><div><span style="color:#6a9955">    Streaming - Second - Chunk</span></div><div><span style="color:#6a9955">    Streaming - Third - Chunk</span></div><div><span style="color:#6a9955">    Ending the HTTP streaming...bye bye</span></div></div></div><div><br /></div><div><br /></div><div><b>HTTPS Server:</b></div><div><br /></div><div><div><div><b>HTTP (Hyper Text Transfer Protocol)</b> is the protocol used by your browser and web servers to communicate and exchange information.</div><div><b><br /></b></div><div><b>HTTPS :</b> When that exchange of data is encrypted with <b>SSL/TLS</b>, then we call it HTTPS. The <b>'S'</b> stands for <b>Secure. HTTPS lock icon </b>appears <span style="background-color:transparent;font-size:10pt">in the URL contains </span><span style="background-color:transparent;font-size:10pt">details of the certificate, including the issuing authority and the corporate name of the website owner etc.</span></div><div><br /></div><div><span style="background-color:transparent;font-size:10pt"><b>SSL (Secure Sockets Layer)</b>,</span><span style="background-color:transparent;font-size:10pt">It uses encryption algorithms to scramble data in transit </span><span style="background-color:transparent;font-size:10pt">between two systems and </span><span style="background-color:transparent;font-size:10pt">preventing hackers from reading it. </span></div><div><br /></div><div><b>TLS (Transport Layer Security)</b> is the <b>new name</b> for SSL with minor update. We still refer to our security certificates as SSL because it is a more commonly used term.</div></div></div><div><br /></div><div><div><span style="font-size:13.3333px"><b>openSSL</b>: Tool for creating a<b> 'private key'</b> and <b>'self signed SSL certificate'</b>. Normally SSL certificated purchased from 3rd parties. </span></div><div><span style="font-size:13.3333px">Command below creates both 'private key' and 'self signed SSL certificate' files in the current directory</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#9cdcfe">    $</span> <span style="color:#9cdcfe">openssl</span> <span style="color:#9cdcfe">req</span> -<span style="color:#9cdcfe">x509</span> -<span style="color:#9cdcfe">newkey</span> <span style="color:#c8c8c8">rsa</span>:<span style="color:#b5cea8">4096</span> -<span style="color:#9cdcfe">keyout</span> <span style="color:#9cdcfe">key</span>.<span style="color:#9cdcfe">pem</span> -<span style="color:#9cdcfe">out</span> <span style="color:#9cdcfe">cert</span>.<span style="color:#9cdcfe">pem</span> -<span style="color:#9cdcfe">nodes</span></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><b><br /></b></span></div><div><span style="font-size:13.3333px"><b>Hello World Program using HTTPS server:</b></span></div><div><span style="font-size:13.3333px"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'https'</span>).<span style="color:#dcdcaa">createServer</span>({</div><div>                        <span style="color:#9cdcfe">key</span><span style="color:#9cdcfe">:</span>  <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readFileSync</span>(<span style="color:#ce9178">'./key.pem'</span>),      <span style="color:#6a9955">// private key file generated from 'openssl'</span></div><div>                        <span style="color:#9cdcfe">cert</span><span style="color:#9cdcfe">:</span> <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readFileSync</span>(<span style="color:#ce9178">'./cert.pem'</span>),    <span style="color:#6a9955">// self signed certificate file generated from 'openssl'</span></div><div>                    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>    <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">200</span>, { <span style="color:#ce9178">'content-type'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'text/plain'</span> });</div><div>    <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">'Hello world</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">443</span>); <span style="color:#6a9955">// 443 is HTTPS default port number. You could use other numbers as well.</span></div></div></div><div><br /></div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">    <span style="color:#c8c8c8">https</span>:<span style="color:#6a9955">//localhost/</span></div></div><div><br /></div><div><br /></div><div><br /></div><div>HTTP Module Internals:</div><div><br /></div><div><div style="display:block;text-align:left"><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/httpClasses.jpg?attredirects=0" imageanchor="1"><img border="0" src="https://sites.google.com/site/sridharkritha/_/rsrc/1589454472082/home/javascript/nodejs/summary/httpClasses.jpg" style="width:100%" /></a></div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// request.js - Method 1</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">https</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'https'</span>);</div><div>    <span style="color:#6a9955">// 'req' object is nothing but 'http.ClientRequest'</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">req</span> = <span style="color:#51b6c4">https</span>.<span style="color:#dcdcaa">request</span>(</div><div>                    { <span style="color:#9cdcfe">hostname</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'www.google.com'</span>, <span style="color:#9cdcfe">method</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'GET'</span> },</div><div>                    (<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>                        <span style="color:#6a9955">// 'res' object is nothing but 'http.IncomingMessage' object</span></div><div>                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">res</span>.<span style="color:#9cdcfe">statusCode</span>);</div><div>                        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">res</span>.<span style="color:#9cdcfe">headers</span>);</div><br /><div>                        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#6a9955">// data is a buffer (contains binary data)</span></div><div>                            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>()); <span style="color:#6a9955">// HTML file of google.com page</span></div><div>                        });</div><div>                    }</div><div>                    );</div><br /><div>    <span style="color:#51b6c4">req</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'error'</span>, (<span style="color:#9cdcfe">e</span>) <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">e</span>)); <span style="color:#6a9955">// req object is also a writable stream</span></div><br /><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#51b6c4">req</span>.<span style="color:#9cdcfe">agent</span>); <span style="color:#6a9955">// 'agent' object is nothing but 'http.Agent'.</span></div><div>                            <span style="color:#6a9955">// 'agent' can also be read by REPL using 'http.globalAgent' command</span></div><div>    <span style="color:#51b6c4">req</span>.<span style="color:#dcdcaa">end</span>();</div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// request.js - Method 2</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">https</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'https'</span>);</div><br /><div>    <span style="color:#6a9955">// Directly use the 'get' method.</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">req</span> = <span style="color:#51b6c4">https</span>.<span style="color:#dcdcaa">get</span>(<span style="color:#ce9178">'http://www.google.com'</span>,          <span style="color:#6a9955">// NOTE: http:// must</span></div><div>                            (<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>                                <span style="color:#6a9955">// res: http.IncomingMessage</span></div><div>                                <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">res</span>.<span style="color:#9cdcfe">statusCode</span>);</div><div>                                <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">res</span>.<span style="color:#9cdcfe">headers</span>);</div><br /><div>                                <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>                                <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">data</span>.<span style="color:#dcdcaa">toString</span>());</div><div>                                });</div><div>                            }</div><div>                        );</div><br /><div>    <span style="color:#51b6c4">req</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'error'</span>, (<span style="color:#9cdcfe">e</span>) <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">e</span>));</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#51b6c4">req</span>.<span style="color:#9cdcfe">agent</span>); <span style="color:#6a9955">// http.Agent</span></div><div>    <span style="color:#6a9955">// req.end(); // Not needed</span></div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// server.js</span></div><div>    <span style="color:#6a9955">// "server" object is from "http.Server" class</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>).<span style="color:#dcdcaa">createServer</span>();</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>    <span style="color:#6a9955">// "req": from "http.IncomingMessage"</span></div><div>    <span style="color:#6a9955">// "res": from "http.ServerResponse"</span></div><br /><div>    <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">200</span>, { <span style="color:#ce9178">'Content-Type'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'text/plain'</span> });</div><div>    <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">'Hello world</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">'</span>);</div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>);</div></div></div><div><br /></div><div><br /></div><div><b>Routes / Url:</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div>    <span style="color:#6a9955">&lt;!-- Home Page --&gt;</span></div><div>    <span style="color:#808080">&lt;!</span><span style="color:#569cd6">DOCTYPE</span> <span style="color:#9cdcfe">html</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">charset</span>=<span style="color:#ce9178">"UTF-8"</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span>Home Page<span style="color:#808080">&lt;/</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>        something Home page!!!</div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">html</span><span style="color:#808080">&gt;</span></div></div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">&lt;!-- About Page --&gt;</span></div><div>    <span style="color:#808080">&lt;!</span><span style="color:#569cd6">DOCTYPE</span> <span style="color:#9cdcfe">html</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">charset</span>=<span style="color:#ce9178">"UTF-8"</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span>About Page<span style="color:#808080">&lt;/</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>        something ABOUT page!!!</div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">html</span><span style="color:#808080">&gt;</span></div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// server.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>).<span style="color:#dcdcaa">createServer</span>();</div><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>    <span style="color:#c586c0">switch</span> (<span style="color:#9cdcfe">req</span>.<span style="color:#9cdcfe">url</span>) {</div><div>        <span style="color:#c586c0">case</span> <span style="color:#ce9178">'/'</span>:</div><div>        <span style="color:#6a9955">// http status code 301: redirect the user to another page. Here if url is root then redirect to home page.</span></div><div>        <span style="color:#6a9955">// REPL: http.STATUS_CODES</span></div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">301</span>, { <span style="color:#ce9178">'Location'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'/home'</span> }); </div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>();</div><div>        <span style="color:#c586c0">break</span>; </div><div>    <span style="color:#c586c0">case</span> <span style="color:#ce9178">'/home'</span>:</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">200</span>, { <span style="color:#ce9178">'Content-Type'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'text/html'</span> });</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readFileSync</span>(<span style="color:#ce9178">'./home.html'</span>));</div><div>        <span style="color:#c586c0">break</span>;</div><div>    <span style="color:#c586c0">case</span> <span style="color:#ce9178">'/about'</span>:</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">200</span>, { <span style="color:#ce9178">'Content-Type'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'text/html'</span> });</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">readFileSync</span>(<span style="color:#ce9178">`.</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">req</span>.<span style="color:#9cdcfe">url</span><span style="color:#569cd6">}</span><span style="color:#ce9178">.html`</span>)); <span style="color:#6a9955">// dynamic using template string</span></div><div>        <span style="color:#c586c0">break</span>;</div><div>    <span style="color:#c586c0">case</span> <span style="color:#ce9178">'/api'</span>:</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">200</span>, { <span style="color:#ce9178">'Content-Type'</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'application/json'</span> }); <span style="color:#6a9955">// response data to json</span></div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">data</span> = {<span style="color:#ce9178">"name"</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">"sridhar"</span>};</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#9cdcfe">JSON</span>.<span style="color:#dcdcaa">stringify</span>(<span style="color:#51b6c4">data</span>));</div><div>        <span style="color:#c586c0">break</span>;</div><br /><div>    <span style="color:#c586c0">default</span>:</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">writeHead</span>(<span style="color:#b5cea8">404</span>); <span style="color:#6a9955">// if requested url is doesn't exist. Update the status code</span></div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>();</div><div>    }</div><div>    });</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8000</span>);</div></div></div><div><br /></div><div><b>Parsing Url:</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Url Parsing</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">url</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'url'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">urlString</span> = <span style="color:#ce9178">'https://www.pluralsight.com/search?q=buna'</span>;</div><br /><div>    <span style="color:#6a9955">// URL to Object</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#51b6c4">url</span>.<span style="color:#dcdcaa">parse</span>(<span style="color:#51b6c4">urlString</span>, <span style="color:#569cd6">true</span>));</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">urlObject</span> = { <span style="color:#9cdcfe">protocol</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'https'</span>,</div><div>                        <span style="color:#9cdcfe">host</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'www.pluralsight.com'</span>,</div><div>                        <span style="color:#9cdcfe">search</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'?q=buna'</span>,</div><div>                        <span style="color:#9cdcfe">query</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'q=buna'</span>,</div><div>                        <span style="color:#9cdcfe">pathname</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'/search'</span>,</div><div>                        <span style="color:#9cdcfe">path</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'/search?q=buna'</span></div><div>                        };</div><br /><div>    <span style="color:#6a9955">// Object to URL</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#51b6c4">url</span>.<span style="color:#dcdcaa">format</span>(<span style="color:#51b6c4">urlObject</span>)); <span style="color:#6a9955">// https://www.pluralsight.com/search?q=buna</span></div></div></div><div><br /></div><div><br /></div><div><b>Parsing Query String:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Parsing Query String</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">querystring</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'querystring'</span>);</div><br /><div>    <span style="color:#6a9955">// name=Samer%20Buna&amp;website=jsComplete.com%2Fsamer-buna</span></div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>( <span style="color:#51b6c4">querystring</span>.<span style="color:#dcdcaa">stringify</span>({ <span style="color:#9cdcfe">name</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'Samer Buna'</span>, <span style="color:#9cdcfe">website</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'jsComplete.com/samer-buna'</span>})); </div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>( <span style="color:#51b6c4">querystring</span>.<span style="color:#dcdcaa">parse</span>(<span style="color:#ce9178">'name=Samer%20Buna&amp;website=jsComplete.com%2Fsamer-buna'</span>)); </div><div>    <span style="color:#6a9955">// { name: 'Samer Buna', website: 'jsComplete.com/samer-buna'}</span></div></div></div><div><br /></div><div><br /></div><div>Stream Internals:</div><div><br /></div><div>Stream: Collection of data that might not be available all at once and don't have to fit fully in memory.</div><div><br /></div><div><div><span style="font-size:13.3333px"><b>    4 types of Streams:</b></span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><b>    1. Readable Stream</b> - ex: fs.createReadStream</span></div><div><span style="font-size:13.3333px"><b>    2. Writable Stream</b> - ex: fs.createWriteStream</span></div><div><span style="font-size:13.3333px">   <b> 3. Duplex Stream</b> (readable and Writable stream) - ex: net.Socket</span></div><div><span style="font-size:13.3333px"><b>    4. Transform Stream</b> (Duplex stream which modify/transform the data) - ex: zlib.createGzip</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><b>Note:</b></div><div><span style="font-size:13.3333px">    All steams are instance of <b>EventEmitters</b>. So you can use <b>events </b>for data transfer between streams.</span></div><div><span style="font-size:13.3333px">    Also streams supports </span><b style="font-size:13.3333px">pipe</b><span style="font-size:13.3333px">. So you can transfer the one stream to another even </span><b style="font-size:13.3333px">without </b><span style="font-size:13.3333px">using Events. Do NOT mix event &amp; pipe. Only mix if it is really necessary!.</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">            <span style="color:#9cdcfe">src</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">dst</span>);</div></div><div><span style="font-size:13.3333px">    </span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#c8c8c8">ex</span>: <span style="color:#9cdcfe">a</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">b</span>).<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">c</span>).<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">d</span>);</div><div>    <span style="color:#6a9955">// or</span></div><div>    <span style="color:#9cdcfe">a</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">b</span>);</div><div>    <span style="color:#9cdcfe">b</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">c</span>);</div><div>    <span style="color:#9cdcfe">c</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">d</span>);</div><div>    <span style="color:#c586c0">if</span> <span style="color:#9cdcfe">b</span> &amp; <span style="color:#9cdcfe">c</span> <span style="color:#9cdcfe">are</span> <span style="color:#9cdcfe">duplex</span> <span style="color:#9cdcfe">streams</span></div></div></div></div><div><br /></div><div><b><br /></b></div><div><b>2 things we can do with the Steams:</b></div><div><b><br /></b></div><div><b><span>    1. Creating/ Implementing  Stream - it needs require('stream' ); module.</span><br /></b></div><div><b><span>    2. Consuming Stream - Use piping/events.</span></b></div><div><b><span><br /></span></b></div><div><b><span><br /></span></b></div><div><b><span><div style="display:block;text-align:left"><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/readStream.jpg?attredirects=0" imageanchor="1"><img border="0" src="https://sites.google.com/site/sridharkritha/_/rsrc/1589476385691/home/javascript/nodejs/summary/readStream.jpg" style="width:100%" /></a></div><br /></span></b></div><div><b><br /></b></div><div><b><br /></b></div><div><b style="background-color:transparent;font-size:10pt">Below are the example of some of the build in modules which supports stream:</b></div><div><br /></div><div><div style="display:block;text-align:left"><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/streams.jpg?attredirects=0" imageanchor="1"><img border="0" src="https://sites.google.com/site/sridharkritha/_/rsrc/1589475642527/home/javascript/nodejs/summary/streams.jpg" /></a></div><br /></div><div>Writable Stream:</div><div><br /></div><div>Task: Echo the user input in the console</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Solution 1: Echo program by stdin and stdout</span></div><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdin</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>);</div></div></div><div><br /></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Solution 2: Echo program by writable stream</span></div><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Writable</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>); <span style="color:#6a9955">// extract Writable interface from stream</span></div><div>    </div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">outStream</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Writable</span>({ <span style="color:#dcdcaa">write</span>(<span style="color:#9cdcfe">chunk</span>, <span style="color:#9cdcfe">encoding</span>, <span style="color:#dcdcaa">callback</span>) {</div><div>                                                <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">chunk</span>.<span style="color:#dcdcaa">toString</span>()); <span style="color:#6a9955">// echo the data from stream</span></div><div>                                                <span style="color:#dcdcaa">callback</span>();</div><div>                                            }</div><div>                                    });</div><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdin</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">outStream</span>); <span style="color:#6a9955">// user input to writable 'outStream'</span></div></div></div><div><br /></div><div><br /></div><div>Readable Stream:</div><div><br /></div><div>Task: Push the data in a stream to terminal</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div style="line-height:22px"><div>    <span style="color:#6a9955">// Solution 1: Bad. Pushing all the data in one go</span></div><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Readable</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>); <span style="color:#6a9955">// extract Readable interface from stream</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">inStream</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Readable</span>();</div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#ce9178">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span>); <span style="color:#6a9955">// push all the data to stream</span></div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#569cd6">null</span>); <span style="color:#6a9955">// signal stream doesn't have any more data</span></div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>); <span style="color:#6a9955">// send the data to terminal for display</span></div></div></div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div>    <span style="color:#6a9955">// Solution 1: Bad. Pushing all the data in one go</span></div><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Readable</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>); <span style="color:#6a9955">// extract Readable interface from stream</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">inStream</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Readable</span>();</div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#ce9178">'ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span>); <span style="color:#6a9955">// push all the data to stream</span></div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#569cd6">null</span>); <span style="color:#6a9955">// signal stream doesn't have any more data</span></div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>); <span style="color:#6a9955">// send the data to terminal for display</span></div><br /><div>    <span style="color:#6a9955">// Solution 2: Good Approach. Pushing 1 character after another with the interval of 100ms</span></div><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Readable</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>); <span style="color:#6a9955">// extract Readable interface from stream</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">inStream</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Readable</span>({</div><div>      <span style="color:#dcdcaa">read</span>(<span style="color:#9cdcfe">size</span>) {</div><div>        <span style="color:#dcdcaa">setTimeout</span>(() <span style="color:#569cd6">=&gt;</span> {</div><div>          <span style="color:#c586c0">if</span> (<span style="color:#569cd6">this</span>.<span style="color:#9cdcfe">currentCharCode</span> &gt; <span style="color:#b5cea8">90</span>) {</div><div>            <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#569cd6">null</span>);</div><div>            <span style="color:#c586c0">return</span>;</div><div>          }</div><div>          <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#4ec9b0">String</span>.<span style="color:#dcdcaa">fromCharCode</span>(<span style="color:#569cd6">this</span>.<span style="color:#9cdcfe">currentCharCode</span>++)); <span style="color:#6a9955">// generate(A B C...etc) and push one character at a time</span></div><div>        }, <span style="color:#b5cea8">100</span>);</div><div>      }</div><div>    });</div><br /><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#9cdcfe">currentCharCode</span> = <span style="color:#b5cea8">65</span>;</div><div>    <span style="color:#51b6c4">inStream</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>); <span style="color:#6a9955">// consume one character at a time</span></div></div></div></div><div><br /></div><div><br /></div><div><b>Duplex Stream:</b></div><div><b><br /></b></div><div><b>Task: Implement the above readable and writable streams in a single duplex stream.</b></div><div><b><br /></b></div><div><span style="font-size:13.3333px"><b>Note:</b> Readable and Writable Streams in Duplex are completely independent even though it comes under a single Duplex interface.</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Duplex</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>); <span style="color:rgb(106,153,85)">// extract the duplex stream</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">inoutStream</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Duplex</span>({</div><div>        <span style="color:#6a9955">// Must implement both 'write' and 'read' method without fails</span></div><div>        <span style="color:#dcdcaa">write</span>(<span style="color:#9cdcfe">chunk</span>, <span style="color:#9cdcfe">encoding</span>, <span style="color:#dcdcaa">callback</span>) {</div><div>            <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">chunk</span>.<span style="color:#dcdcaa">toString</span>());</div><div>            <span style="color:#dcdcaa">callback</span>();</div><div>        },</div><br /><div>        <span style="color:#dcdcaa">read</span>(<span style="color:#9cdcfe">size</span>) {</div><div>            <span style="color:#c586c0">if</span> (<span style="color:#569cd6">this</span>.<span style="color:#9cdcfe">currentCharCode</span> &gt; <span style="color:#b5cea8">90</span>) {</div><div>                <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#569cd6">null</span>);</div><div>                <span style="color:#c586c0">return</span>;</div><div>            }</div><div>            <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#4ec9b0">String</span>.<span style="color:#dcdcaa">fromCharCode</span>(<span style="color:#569cd6">this</span>.<span style="color:#9cdcfe">currentCharCode</span>++)); <span style="color:#6a9955">// generate(A B C...etc) and push one character at a time</span></div><div>        }</div><div>    });</div><br /><div>    <span style="color:#51b6c4">inoutStream</span>.<span style="color:#9cdcfe">currentCharCode</span> = <span style="color:#b5cea8">65</span>;</div><div>    <span style="color:#6a9955">// Connect read and write stream</span></div><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdin</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">inoutStream</span>).<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>); <span style="color:#6a9955">// Echo the user input</span></div></div></div><div><br /></div><div><b>Transform Stream:</b> Convert one stream input into another</div><div><b>Task:</b> Echo the user input into upper case</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Transform</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>); <span style="color:#6a9955">// Extract the Transform stream</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">upperCaseTr</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Transform</span>({</div><div>    <span style="color:#6a9955">// transform method: Compute the output from the input.</span></div><div>    <span style="color:#dcdcaa">transform</span>(<span style="color:#9cdcfe">chunk</span>, <span style="color:#9cdcfe">encoding</span>, <span style="color:#dcdcaa">callback</span>) {</div><div>                <span style="color:#569cd6">this</span>.<span style="color:#dcdcaa">push</span>(<span style="color:#9cdcfe">chunk</span>.<span style="color:#dcdcaa">toString</span>().<span style="color:#dcdcaa">toUpperCase</span>()); <span style="color:#6a9955">// input char to upper case</span></div><div>                <span style="color:#dcdcaa">callback</span>();</div><div>    }</div><div>    });</div><br /><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdin</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">upperCaseTr</span>).<span style="color:#dcdcaa">pipe</span>(<span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>); <span style="color:#6a9955">// echo input with upper case conversion</span></div></div></div><div><br /></div><div><br /></div><div>zlib : compress the file:</div><div>Task: Compress( .<span style="background-color:transparent;font-size:10pt">gz</span><span style="background-color:transparent;font-size:10pt">) the file (readme.txt) into (readme.txt.gz)</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">zlib</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'zlib'</span>); <span style="color:#6a9955">// file compression to .gz</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);   </div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">file</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">argv</span>[<span style="color:#b5cea8">2</span>]; <span style="color:#6a9955">// read the file name - readme.txt</span></div><br /><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createReadStream</span>(<span style="color:#51b6c4">file</span>)</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">zlib</span>.<span style="color:#dcdcaa">createGzip</span>())</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createWriteStream</span>(<span style="color:#51b6c4">file</span> + <span style="color:#ce9178">'.gz'</span>)); <span style="color:#6a9955">// readme.txt.gz</span></div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// You can unzip the file using below command</span></div><div>        <span style="color:#9cdcfe">gunzip</span> <span style="color:#9cdcfe">readme</span>.<span style="color:#9cdcfe">txt</span>.<span style="color:#9cdcfe">gz</span></div></div></div><div><br /></div><div><b style="background-color:transparent">Pipe and Events:</b></div><div><div><span style="font-size:13.3333px"><b><br /></b></span></div><div><span style="font-size:13.3333px"><b>Task:    </b>1. Print the<b> in progress</b> by dots</span></div><div><span style="font-size:13.3333px"><span>    </span><span>    </span><span>    </span>2. Print 'Done' once the task has been completed.</span></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">zlib</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'zlib'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">file</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">argv</span>[<span style="color:#b5cea8">2</span>]; </div><br /><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createReadStream</span>(<span style="color:#51b6c4">file</span>)</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">zlib</span>.<span style="color:#dcdcaa">createGzip</span>())</div><div>    .<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'.'</span>)) <span style="color:#6a9955">// 'data' event to show the in progress by dots</span></div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createWriteStream</span>(<span style="color:#51b6c4">file</span> + <span style="color:#ce9178">'.gz'</span>)) </div><div>    .<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'finish'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Done'</span>));    <span style="color:#6a9955">// 'finish' event to inform the user</span></div></div></div><div><br /></div><div><br /></div><div><b>Task: </b>Write the progress event by yourself using <b>Transform stream.</b></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">zlib</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'zlib'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">file</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">argv</span>[<span style="color:#b5cea8">2</span>]; </div><br /><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Transform</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">progress</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Transform</span>({</div><div>        <span style="color:#dcdcaa">transform</span>(<span style="color:#9cdcfe">chunk</span>, <span style="color:#9cdcfe">encoding</span>, <span style="color:#dcdcaa">callback</span>) {</div><div>            <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'.'</span>);</div><div>            <span style="color:#dcdcaa">callback</span>(<span style="color:#569cd6">null</span>, <span style="color:#9cdcfe">chunk</span>);</div><div>        }</div><div>    });</div><br /><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createReadStream</span>(<span style="color:#51b6c4">file</span>)</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">zlib</span>.<span style="color:#dcdcaa">createGzip</span>())</div><div>    <span style="color:#6a9955">//.on('data', () =&gt; process.stdout.write('.'))</span></div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">progress</span>)       <span style="color:#6a9955">// show progress by dots</span></div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createWriteStream</span>(<span style="color:#51b6c4">file</span> + <span style="color:#ce9178">'.gz'</span>)) </div><div>    .<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'finish'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Done'</span>));</div></div></div><div><br /></div><div><b style="background-color:transparent;font-size:10pt">Task:</b><span style="background-color:transparent;font-size:10pt"> </span><b style="background-color:transparent;font-size:10pt">Encrypt </b><span style="background-color:transparent;font-size:10pt">the file and then compress it.</span></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// Encrypt and gzip the file</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">crypto</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'crypto'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">zlib</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'zlib'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">file</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">argv</span>[<span style="color:#b5cea8">2</span>]; </div><br /><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createReadStream</span>(<span style="color:#51b6c4">file</span>)</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">zlib</span>.<span style="color:#dcdcaa">createGzip</span>())</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">crypto</span>.<span style="color:#dcdcaa">createCipher</span>(<span style="color:#ce9178">'aes192'</span>, <span style="color:#ce9178">'sridhar_secret'</span>)) <span style="color:#6a9955">// Cipher(encrypt) the file using secrete key</span></div><div>    .<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'.'</span>))</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createWriteStream</span>(<span style="color:#51b6c4">file</span> + <span style="color:#ce9178">'.abc'</span>))            <span style="color:#6a9955">// .abc = give some extension</span></div><div>    .<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'finish'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Done'</span>)); </div></div></div><div><br /></div><div><b>Task:</b> <b>Decrypt </b>the file.</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">crypto</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'crypto'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">fs</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'fs'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">zlib</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'zlib'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">file</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">argv</span>[<span style="color:#b5cea8">2</span>];</div><br /><div>    <span style="color:#569cd6">const</span> { <span style="color:#4ec9b0">Transform</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'stream'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">progress</span> = <span style="color:#569cd6">new</span> <span style="color:#4ec9b0">Transform</span>({</div><div>        <span style="color:#dcdcaa">transform</span>(<span style="color:#9cdcfe">chunk</span>, <span style="color:#9cdcfe">encoding</span>, <span style="color:#dcdcaa">callback</span>) {</div><div>            <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">write</span>(<span style="color:#ce9178">'.'</span>);</div><div>            <span style="color:#dcdcaa">callback</span>(<span style="color:#569cd6">null</span>, <span style="color:#9cdcfe">chunk</span>);</div><div>        }</div><div>    });</div><br /><div>    <span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createReadStream</span>(<span style="color:#51b6c4">file</span>)</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">crypto</span>.<span style="color:#dcdcaa">createDecipher</span>(<span style="color:#ce9178">'aes192'</span>, <span style="color:#ce9178">'sridhar_secret'</span>)) <span style="color:#6a9955">// Decipher(decrypt) the file</span></div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">zlib</span>.<span style="color:#dcdcaa">createGunzip</span>())</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">progress</span>)</div><div>    .<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">fs</span>.<span style="color:#dcdcaa">createWriteStream</span>(<span style="color:#51b6c4">file</span>.<span style="color:#dcdcaa">slice</span>(<span style="color:#b5cea8">0</span>, -<span style="color:#b5cea8">3</span>)))          <span style="color:#6a9955">// remove the extension</span></div><div>    .<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'finish'</span>, () <span style="color:#569cd6">=&gt;</span> <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Done'</span>));</div></div></div><div><br /></div><div><b style="background-color:transparent;font-size:10pt">Web Server framework:</b></div><div>* 'http' Module- No api support for directly reading the 'body' parameters in the 'post' request. You have to manually parse the 'text'.</div><div>* Famous Web webserver frameworks for rescue - express / meteor.</div><div><br /></div><div><b>express - as web server framework:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">express</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'express'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span>  = <span style="color:#dcdcaa">express</span>();</div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">get</span>(<span style="color:#ce9178">'/'</span>,      (<span style="color:#9cdcfe">req</span>,<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#ce9178">"Hello Express"</span>); });</div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">get</span>(<span style="color:#ce9178">'/about'</span>, (<span style="color:#9cdcfe">req</span>,<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#ce9178">"Hello about page..."</span>); });   <span style="color:#6a9955">// Even you could pass an object</span></div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">4242</span>, () <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Express Server is running...'</span>); });</div></div></div><div><br /></div><div><b>Web template Framework / Server side static HTML Pages rendering:</b></div><div>* Instead of displaying the response in text, for server display the response in the form of static html pages using Web template frameworks.</div><div>* Famous Web template frameworks: ejs, handlebars. JSX</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// index.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">express</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'express'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">server</span>  = <span style="color:#dcdcaa">express</span>();</div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">set</span>(<span style="color:#ce9178">'view engine'</span>, <span style="color:#ce9178">'ejs'</span>); <span style="color:#6a9955">// set the express to use the 'ejs' view engine</span></div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">get</span>(<span style="color:#ce9178">'/'</span>,      (<span style="color:#9cdcfe">req</span>,<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">render</span>(<span style="color:#ce9178">'index'</span>); });  <span style="color:#6a9955">// render the 'ejs' static index.html file from view folder</span></div><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">get</span>(<span style="color:#ce9178">'/about'</span>, (<span style="color:#9cdcfe">req</span>,<span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">render</span>(<span style="color:#ce9178">'about'</span>); });  <span style="color:#6a9955">// render the 'ejs' static about.html file from view folder</span></div><br /><div>    <span style="color:#9cdcfe">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">4242</span>, () <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Express Server is running...'</span>); });</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// views/index.ejs</span></div><div>    &lt;!<span style="color:#9cdcfe">DOCTYPE</span> <span style="color:#9cdcfe">html</span>&gt;</div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">html</span> <span style="color:#9cdcfe">lang</span>=<span style="color:#ce9178">"en"</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>      <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">charset</span>=<span style="color:#ce9178">"UTF-8"</span><span style="color:#808080">&gt;</span></div><div>      <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">name</span>=<span style="color:#ce9178">"viewport"</span> <span style="color:#9cdcfe">content</span>=<span style="color:#ce9178">"width=device-width, initial-scale=1.0"</span><span style="color:#808080">&gt;</span></div><div>      <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">http-equiv</span>=<span style="color:#ce9178">"X-UA-Compatible"</span> <span style="color:#9cdcfe">content</span>=<span style="color:#ce9178">"ie=edge"</span><span style="color:#808080">&gt;</span></div><div>      <span style="color:#808080">&lt;</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span>INDEX<span style="color:#808080">&lt;/</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>      <span style="color:#808080">&lt;</span><span style="color:#569cd6">h2</span><span style="color:#808080">&gt;</span>Hello EJS<span style="color:#808080">&lt;/</span><span style="color:#569cd6">h2</span><span style="color:#808080">&gt;</span></div><div>      <span style="color:#808080">&lt;</span><span style="color:#569cd6">div</span><span style="color:#808080">&gt;</span></div><div>        &lt;!-- write your javascript stuffs --&gt;</div><div>        &lt;%-</div><div>            Math.random()</div><div>        -%&gt;</div><div>      <span style="color:#808080">&lt;/</span><span style="color:#569cd6">div</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">html</span><span style="color:#808080">&gt;</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// views/about.ejs</span></div><div>    &lt;!<span style="color:#9cdcfe">DOCTYPE</span> <span style="color:#9cdcfe">html</span>&gt;</div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">html</span> <span style="color:#9cdcfe">lang</span>=<span style="color:#ce9178">"en"</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">charset</span>=<span style="color:#ce9178">"UTF-8"</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">name</span>=<span style="color:#ce9178">"viewport"</span> <span style="color:#9cdcfe">content</span>=<span style="color:#ce9178">"width=device-width, initial-scale=1.0"</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">meta</span> <span style="color:#9cdcfe">http-equiv</span>=<span style="color:#ce9178">"X-UA-Compatible"</span> <span style="color:#9cdcfe">content</span>=<span style="color:#ce9178">"ie=edge"</span><span style="color:#808080">&gt;</span></div><div>            <span style="color:#808080">&lt;</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span>INDEX<span style="color:#808080">&lt;/</span><span style="color:#569cd6">title</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">head</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>        <span style="color:#808080">&lt;</span><span style="color:#569cd6">h2</span><span style="color:#808080">&gt;</span>About...<span style="color:#808080">&lt;/</span><span style="color:#569cd6">h2</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">body</span><span style="color:#808080">&gt;</span></div><div>    <span style="color:#808080">&lt;/</span><span style="color:#569cd6">html</span><span style="color:#808080">&gt;</span></div></div></div><div><br /></div><div><b>Debug - nodejs code in chrome dev tool:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// convertArrayToObject.js - Convert 'array' into 'object'</span></div><div>    <span style="color:#569cd6">function</span> <span style="color:#dcdcaa">convertArrayToObject</span>(<span style="color:#9cdcfe">arr</span>) {</div><div>    <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">arr</span>.<span style="color:#dcdcaa">reduce</span>((<span style="color:#9cdcfe">acc</span>, <span style="color:#9cdcfe">curr</span>) <span style="color:#569cd6">=&gt;</span> { <span style="color:#9cdcfe">acc</span>[<span style="color:#9cdcfe">curr</span>[<span style="color:#b5cea8">0</span>]] = <span style="color:#9cdcfe">curr</span>[<span style="color:#b5cea8">1</span>]; <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">acc</span>; }, {});</div><div>    }</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#9cdcfe">obj</span> = <span style="color:#dcdcaa">convertArrayToObject</span>([ [<span style="color:#b5cea8">1</span>, <span style="color:#ce9178">'One'</span>], [<span style="color:#b5cea8">2</span>, <span style="color:#ce9178">'Two'</span>], [<span style="color:#b5cea8">3</span>, <span style="color:#ce9178">'Three'</span>]]);</div><div>    <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#9cdcfe">obj</span>);</div></div></div><div>    </div><div>step 1: attact the node debugger </div><div>        <b>node --inspect-brk convertArrayToObject.js</b></div><div>step 2: Go to 'chrome browser' and type the below url. Select 'inspect' from the listed target </div><div>        <b>chrome://inspect/</b></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px">#####################################################################################################################################</span></div><div><br /></div><div>Child Processes:</div><div><div><span style="font-size:13.3333px">Node.js run in a single thread process.</span></div><div><span style="font-size:13.3333px">Application scalability can be done by running the node by different instances on different process, processor cores, machines etc.,</span></div><div><br /></div><div><span style="font-size:13.3333px"><b>4 ways of creating Child process:</b></span></div><div><div><span style="font-size:13.3333px"><b>spawn():</b> This method launches the command in a new process. More efficient do NOT create any shell. It can inherit stdio for streaming.</span></div><div><span style="font-size:13.3333px"><b>fork(): </b>Similar to spawn(). Also it creates communication channel between child and parent process.</span></div><div><span style="font-size:13.3333px"><b>exec(): </b>Creates a new shell for executing the command in a new process. You can directly write the command in the shell.</span></div><div><span style="font-size:13.3333px">        It uses extra buffer for storing full data for the processing. It don't use standard I/O streaming feature.</span></div><div><span style="font-size:13.3333px">        So it is NOT a good candidate for huge data to process. For huge data spawn() method is a good choice.</span></div><div><span style="font-size:13.3333px"><b>execFile(): </b>Similar to exec() but it would NOT create a shell. Execute the file directly which supports execFile() execution. </span></div><div><span style="font-size:13.3333px">            Also do NOT inherit stdio for streaming like exec().</span></div></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="font-size:13.3333px"><b>spawn: </b>Create a child process using spawn() method.</span></div><div><span style="font-size:13.3333px">Task: Print the current directory path.</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">spawn</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">childProcess</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'pwd'</span>); <span style="color:#6a9955">// create a child process using spawn method</span></div><br /><div>    <span style="color:#6a9955">// childProcess is an instance of EventEmitter class</span></div><div>    <span style="color:#51b6c4">childProcess</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`child stdout:</span><span style="color:#d7ba7d">\n</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); <span style="color:#6a9955">// print the current directory</span></div><div>    });</div><br /><div>    <span style="color:#51b6c4">childProcess</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'exit'</span>, <span style="color:#569cd6">function</span> (<span style="color:#9cdcfe">code</span>, <span style="color:#9cdcfe">signal</span>) {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`child process exited with code </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">code</span><span style="color:#569cd6">}</span><span style="color:#ce9178">, signal </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">signal</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); <span style="color:#6a9955">// print the program exit code</span></div><div>    });</div></div></div><div><br /></div><div>Notes:</div><div><div><span style="font-size:13.3333px"><span>    O</span>ther events on child process: disconnect, error, message, close</span></div><div><span style="font-size:13.3333px"><span>    </span>Every child process has <b>stdio objects</b>: child.stdin, child.stdout, child.stderr</span></div><div><span style="font-size:13.3333px"><br /></span></div><div><span style="background-color:transparent">Child Process (<b>Inverse </b>of normal process):</span></div><div><span style="font-size:13.3333px"><span>    </span>child.stdout, child.stderr  - Readable Stream</span></div><div><span style="font-size:13.3333px"><span>    </span>child.stdin                        - Writable Stream</span></div></div><div><span style="font-size:13.3333px"><br /></span></div><div><div>Normal Process:</div><div><span>    </span>process.stdout, process.stderr - Writable Stream</div><div><span style="background-color:transparent;font-size:10pt"><span>    </span>process</span>.stdin                           - Readable Stream</div></div><div><br /></div><div>Task: Find all the files in the current directory.</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">spawn</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">child</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'find'</span>, [<span style="color:#ce9178">'.'</span>, <span style="color:#ce9178">'-type'</span>, <span style="color:#ce9178">'f'</span>]); <span style="color:#6a9955">// equivalent to =&gt; [ find . -type f ]. Find all files in the current directory(.)</span></div><br /><div>    <span style="color:#51b6c4">child</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`child stdout:</span><span style="color:#d7ba7d">\n</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div><br /><div>    <span style="color:#51b6c4">child</span>.<span style="color:#9cdcfe">stderr</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">error</span>(<span style="color:#ce9178">`child stderr:</span><span style="color:#d7ba7d">\n</span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); <span style="color:#6a9955">// only triggered if there is some error</span></div><div>    });</div><br /><div>    <span style="color:#51b6c4">child</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'exit'</span>, <span style="color:#569cd6">function</span> (<span style="color:#9cdcfe">code</span>, <span style="color:#9cdcfe">signal</span>) {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`child process exited with code </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">code</span><span style="color:#569cd6">}</span><span style="color:#ce9178">, signal </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">signal</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div></div></div><div><br /></div><div><br /></div><div>Task: Instead of using child stdio , use process stdio for processing the data </div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:rgb(86,156,214)">    const</span> { <span style="color:rgb(220,220,170)">spawn</span> } = <span style="color:rgb(220,220,170)">require</span>(<span style="color:rgb(206,145,120)">'child_process'</span>);    </div><div><span style="color:#6a9955">    // Using stdio stream </span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">child</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'find'</span>, [<span style="color:#ce9178">'.'</span>, <span style="color:#ce9178">'-type'</span>, <span style="color:#ce9178">'f'</span>], {</div><div>      <span style="color:#9cdcfe">stdio</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'inherit'</span> <span style="color:#6a9955">// 'Data' event triggered and redirected to stdio ( stdin, stdout, stderr)</span></div><div>    });</div></div></div></div><div><br /></div><div><br /></div><div>Task: Create a dedicated shell for writing the commands directly</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">spawn</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><div>    <span style="color:#6a9955">// Create a Shell and type the command directly just like writing in a shell CLI</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">child</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'find . -type f'</span>, {</div><div>      <span style="color:#9cdcfe">stdio</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'inherit'</span>, <span style="color:#6a9955">// 'Data' event triggered and redirected to stdio ( stdin, stdout, stderr)</span></div><div>      <span style="color:#9cdcfe">shell</span><span style="color:#9cdcfe">:</span> <span style="color:#569cd6">true</span></div><div>    });</div></div></div><div><br /></div><div>Task: Create a child process and detach from the parent process. Detached child process should run a node.js program 'timer.js' independently even the parent process is terminated.</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>  <span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">spawn</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><br /><div>  <span style="color:#6a9955">// 'node timer.js' will starts executing independently</span></div><div>  <span style="color:#569cd6">const</span> <span style="color:#51b6c4">child</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'node'</span>, [<span style="color:#ce9178">'timer.js'</span>], {</div><div>    <span style="color:#9cdcfe">detached</span><span style="color:#9cdcfe">:</span> <span style="color:#569cd6">true</span>,   <span style="color:#6a9955">// child process detached from the parent process.</span></div><div>    <span style="color:#9cdcfe">stdio</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'ignore'</span></div><div>  });</div><br /><div>  <span style="color:#51b6c4">child</span>.<span style="color:#dcdcaa">unref</span>();  <span style="color:#6a9955">// child process can continue to run even the parent process is terminated</span></div></div></div><div><br /></div><div>Task: Count the number of files in a current directory using the commands 'find' and 'wc'. Execute those commands in 2 different child process and do the inter-child process communication using Pipes. </div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">spawn</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><div><span style="color:#6a9955">// A new child process spawn with 'find' command</span></div><div><span style="color:#569cd6">const</span> <span style="color:#51b6c4">find</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'find'</span>, [<span style="color:#ce9178">'.'</span>, <span style="color:#ce9178">'-type'</span>, <span style="color:#ce9178">'f'</span>]); <span style="color:#6a9955">// List all the files in current directory (.)</span></div><div><span style="color:#6a9955">// A new child process spawn with 'wc' command</span></div><div><span style="color:#569cd6">const</span> <span style="color:#51b6c4">wc</span> = <span style="color:#dcdcaa">spawn</span>(<span style="color:#ce9178">'wc'</span>, [<span style="color:#ce9178">'-l'</span>]); <span style="color:#6a9955">// 'wc' - count characters, words and lines. Option '-l' show only number of lines.</span></div><div><span style="color:#6a9955">// Inter-child processes communication using pipe</span></div><div><span style="color:#51b6c4">find</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">pipe</span>(<span style="color:#51b6c4">wc</span>.<span style="color:#9cdcfe">stdin</span>);     <span style="color:#6a9955">// wc.stdin - writable stream. Note: process.stdin - readable stream</span></div><div>                                <span style="color:#6a9955">// find.stdout - readable stream</span></div><br /><div><span style="color:#51b6c4">wc</span>.<span style="color:#9cdcfe">stdout</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'data'</span>, (<span style="color:#9cdcfe">data</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>  <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Number of files </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">data</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>});</div></div></div><div><br /></div><div>Task: Do the same above <span style="background-color:transparent;font-size:10pt">task</span><span style="background-color:transparent;font-size:10pt"> </span><span style="background-color:transparent;font-size:10pt">using 'exec'</span></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">const</span> { <span style="color:#51b6c4">exec</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><div>    <span style="color:#6a9955">// Creates a shell, so you can directly write the commands and pipe </span></div><div>    <span style="color:#dcdcaa">exec</span>(<span style="color:#ce9178">'find . -type f | wc -l'</span>, (<span style="color:#9cdcfe">err</span>, <span style="color:#9cdcfe">stdout</span>, <span style="color:#9cdcfe">stderr</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">err</span>) {</div><div>        <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">error</span>(<span style="color:#ce9178">`exec error: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">err</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>        <span style="color:#c586c0">return</span>;</div><div>      }</div><br /><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Number of files </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">stdout</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div></div></div><div><br /></div><div>Fork: Similar to spawn(). Also it creates communication channel between child and parent process. Child and Parent do easy communication.</div><div><br /></div><div>Task: Create a child and parent process and do 2 way communication.</div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// parent.js</span></div><div>    <span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">fork</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">forked</span> = <span style="color:#dcdcaa">fork</span>(<span style="color:#ce9178">'child.js'</span>); <span style="color:#6a9955">// creates a child process and execute the 'node child.js'</span></div><br /><div>    <span style="color:#51b6c4">forked</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'message'</span>, (<span style="color:#9cdcfe">msg</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Message from child'</span>, <span style="color:#9cdcfe">msg</span>); <span style="color:#6a9955">// receives the msg from Child</span></div><div>    });</div><br /><div>    <span style="color:#51b6c4">forked</span>.<span style="color:#dcdcaa">send</span>({ <span style="color:#9cdcfe">hello</span><span style="color:#9cdcfe">:</span> <span style="color:#ce9178">'world'</span> }); <span style="color:#6a9955">// send a msg to child</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// child.js</span></div><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'message'</span>, (<span style="color:#9cdcfe">msg</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">'Message from parent:'</span>, <span style="color:#9cdcfe">msg</span>); <span style="color:#6a9955">// receive the msg from parent</span></div><div>    });</div><br /><div>    <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">counter</span> = <span style="color:#b5cea8">0</span>;</div><br /><div>    <span style="color:#dcdcaa">setInterval</span>(() <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">send</span>({ <span style="color:#9cdcfe">counter</span><span style="color:#9cdcfe">:</span> <span style="color:#9cdcfe">counter</span>++ }); <span style="color:#6a9955">// send a regular interval msg's to parent</span></div><div>    }, <span style="color:#b5cea8">1000</span>);</div></div></div><div><br /></div><div>Task: Move the heavy computation function inside the <span style="background-color:transparent;font-size:10pt">server process to child process. So you can avoid the server busy computation time.</span></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// parent process - server.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">http</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> { <span style="color:#dcdcaa">fork</span> } = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'child_process'</span>);</div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">server</span> = <span style="color:#51b6c4">http</span>.<span style="color:#dcdcaa">createServer</span>();</div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'request'</span>, (<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">req</span>.<span style="color:#9cdcfe">url</span> === <span style="color:#ce9178">'/compute'</span>) {</div><div>        <span style="color:#6a9955">// const sum = longComputation(); // Make the server BUSY</span></div><div>        <span style="color:#6a9955">// return res.end(`Sum is ${sum}`); </span></div><div>        <span style="color:#569cd6">const</span> <span style="color:#51b6c4">compute</span> = <span style="color:#dcdcaa">fork</span>(<span style="color:#ce9178">'compute.js'</span>); <span style="color:#6a9955">// Move to Child process</span></div><div>        <span style="color:#51b6c4">compute</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#ce9178">'start'</span>);</div><div>        <span style="color:#51b6c4">compute</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'message'</span>, <span style="color:#9cdcfe">sum</span> <span style="color:#569cd6">=&gt;</span> {      <span style="color:#6a9955">// Get the result from the child process once it is ready</span></div><div>          <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">`Sum is </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">sum</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>        });</div><div>      } <span style="color:#c586c0">else</span> {</div><div>        <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">'Ok'</span>); </div><div>      }</div><div>    });</div><br /><div>    <span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955">    const longComputation = () =&gt; {</span></div><div><span style="color:#6a9955">      let sum = 0;</span></div><div><span style="color:#6a9955">      for (let i = 0; i &lt; 1e9; i++) { // long computation part</span></div><div><span style="color:#6a9955">        sum += i;</span></div><div><span style="color:#6a9955">      };</span></div><div><span style="color:#6a9955">      return sum;</span></div><div><span style="color:#6a9955">    };</span></div><div><span style="color:#6a9955">    */</span></div><br /><div>    <span style="color:#51b6c4">server</span>.<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">3000</span>);</div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// child process - compute.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#dcdcaa">longComputation</span> = () <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#569cd6">let</span> <span style="color:#9cdcfe">sum</span> = <span style="color:#b5cea8">0</span>;</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span> = <span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span> &lt; <span style="color:#b5cea8">1e9</span>; <span style="color:#9cdcfe">i</span>++) { <span style="color:#6a9955">// long computation part</span></div><div>        <span style="color:#9cdcfe">sum</span> += <span style="color:#9cdcfe">i</span>;</div><div>      };</div><div>      <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">sum</span>;</div><div>    };</div><br /><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'message'</span>, (<span style="color:#9cdcfe">msg</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#569cd6">const</span> <span style="color:#51b6c4">sum</span> = <span style="color:#dcdcaa">longComputation</span>();</div><div>      <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#51b6c4">sum</span>);</div><div>    });</div></div></div><div><br /></div><div><br /></div><div><div><span style="font-size:13.3333px"><b>Load balancing using cluster module and cpu cores:</b></span></div><div><span style="font-size:13.3333px"><span>    * </span>Instead of running <b>one instance </b>of an application (say <b>server</b>) in a <b>computer system.</b> You could run the <b>multiple instance</b> of applications </span><span style="background-color:transparent">independently on </span><b style="background-color:transparent">different cpu cores</b><span style="background-color:transparent"> of the computer system. </span></div><div><span style="background-color:transparent"><span>    * </span>That is clustering the application for load balancing in case of large Number </span><span style="background-color:transparent">of client requests.</span></div><div><span style="font-size:13.3333px"><span>    * </span>In clustering, there will be a <b>one master process</b> and<b> n worker processes</b>.<b> n = no of cpu cores.</b> </span></div><div><span style="font-size:13.3333px"><span>    </span>* Master process will manage the worker processes </span><span style="background-color:transparent">which runs the difference instance of the application.</span></div></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent">Task: Load Balance an HTTP Server using cluster.</span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// server.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">http</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">pid</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">pid</span>;</div><br /><div>    <span style="color:#51b6c4">http</span>.<span style="color:#dcdcaa">createServer</span>((<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span>=<span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt;<span style="color:#b5cea8">1e7</span>; <span style="color:#9cdcfe">i</span>++); <span style="color:#6a9955">// simulate CPU work</span></div><div>      <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">`Handled by process </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">pid</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    }).<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8080</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Started process </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">pid</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div></div></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// cluster.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">cluster</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'cluster'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">os</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'os'</span>);</div><br /><div>    <span style="color:#c586c0">if</span> (<span style="color:#51b6c4">cluster</span>.<span style="color:#51b6c4">isMaster</span>) {</div><div>      <span style="color:#6a9955">// Master process</span></div><div>      <span style="color:#569cd6">const</span> <span style="color:#51b6c4">cpus</span> = <span style="color:#51b6c4">os</span>.<span style="color:#dcdcaa">cpus</span>().<span style="color:#9cdcfe">length</span>; <span style="color:rgb(106,153,85)">// find no.of cpu cores </span></div><br /><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Forking for </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">cpus</span><span style="color:#569cd6">}</span><span style="color:#ce9178"> CPUs`</span>);</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span> = <span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt; <span style="color:#51b6c4">cpus</span>; <span style="color:#9cdcfe">i</span>++) {</div><div>        <span style="color:#51b6c4">cluster</span>.<span style="color:#dcdcaa">fork</span>(); <span style="color:#6a9955">// create n Worker processes. n = no of cpu cores</span></div><div>      }</div><div>    } <span style="color:#c586c0">else</span> {</div><div>      <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./server'</span>); <span style="color:#6a9955">// create independent instance of server on different cpu cores.</span></div><div>    }</div></div></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent">Task: Do a communication between master and child processes inside the cluster.</span></div><div><span style="background-color:transparent"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// server.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">http</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">pid</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">pid</span>;</div><br /><div>    <span style="color:#51b6c4">http</span>.<span style="color:#dcdcaa">createServer</span>((<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span>=<span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt;<span style="color:#b5cea8">1e7</span>; <span style="color:#9cdcfe">i</span>++);</div><div>      <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">`Handled by process </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">pid</span><span style="color:#569cd6">}</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">`</span>);</div><div>    }).<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8080</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Started process </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">pid</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div><br /><div>    <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'message'</span>, <span style="color:#9cdcfe">msg</span> <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Message from master: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">msg</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); <span style="color:#6a9955">// message from master</span></div><div>    });</div></div></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// cluster.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">cluster</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'cluster'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">os</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'os'</span>);</div><br /><div>    <span style="color:#c586c0">if</span> (<span style="color:#51b6c4">cluster</span>.<span style="color:#51b6c4">isMaster</span>) {</div><div>      <span style="color:#569cd6">const</span> <span style="color:#51b6c4">cpus</span> = <span style="color:#51b6c4">os</span>.<span style="color:#dcdcaa">cpus</span>().<span style="color:#9cdcfe">length</span>;</div><br /><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Forking for </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">cpus</span><span style="color:#569cd6">}</span><span style="color:#ce9178"> CPUs`</span>);</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span> = <span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt;<span style="color:#51b6c4">cpus</span>; <span style="color:#9cdcfe">i</span>++) {</div><div>        <span style="color:#51b6c4">cluster</span>.<span style="color:#dcdcaa">fork</span>();</div><div>      }</div><br /><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">dir</span>(<span style="color:#51b6c4">cluster</span>.<span style="color:#51b6c4">workers</span>, {<span style="color:#9cdcfe">depth</span><span style="color:#9cdcfe">:</span> <span style="color:#b5cea8">0</span>}); <span style="color:#6a9955">// cluster.workers - list of workers previously forked</span></div><br /><div>      <span style="color:#4ec9b0">Object</span>.<span style="color:#dcdcaa">values</span>(<span style="color:#51b6c4">cluster</span>.<span style="color:#51b6c4">workers</span>).<span style="color:#dcdcaa">forEach</span>(<span style="color:#9cdcfe">worker</span> <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#9cdcfe">worker</span>.<span style="color:#dcdcaa">send</span>(<span style="color:#ce9178">`Hello Worker </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">worker</span>.<span style="color:#9cdcfe">id</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>); <span style="color:#6a9955">// broadcast a msg to all workers from master</span></div><div>      });</div><div>    } <span style="color:#c586c0">else</span> {</div><div>      <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./server'</span>);</div><div>    }</div></div></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent">Task: Zero down time - Restart the crashed worker process.</span></div><div><span style="background-color:transparent"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// server.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">http</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'http'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">pid</span> = <span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">pid</span>;</div><br /><div>    <span style="color:#51b6c4">http</span>.<span style="color:#dcdcaa">createServer</span>((<span style="color:#9cdcfe">req</span>, <span style="color:#9cdcfe">res</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span>=<span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt;<span style="color:#b5cea8">1e7</span>; <span style="color:#9cdcfe">i</span>++); <span style="color:#6a9955">// simulate CPU work</span></div><div>      <span style="color:#9cdcfe">res</span>.<span style="color:#dcdcaa">end</span>(<span style="color:#ce9178">`Handled by process </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">pid</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    }).<span style="color:#dcdcaa">listen</span>(<span style="color:#b5cea8">8080</span>, () <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Started process </span><span style="color:#569cd6">${</span><span style="color:#51b6c4">pid</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><div>    });</div><br /><div>    <span style="color:#6a9955">// simulate the random crash</span></div><div>    <span style="color:#dcdcaa">setTimeout</span>(() <span style="color:#569cd6">=&gt;</span> {</div><div>      <span style="color:#9cdcfe">process</span>.<span style="color:#dcdcaa">exit</span>(<span style="color:#b5cea8">1</span>) <span style="color:#6a9955">// death by random timeout</span></div><div>    }, <span style="color:#9cdcfe">Math</span>.<span style="color:#dcdcaa">random</span>() * <span style="color:#b5cea8">10000</span>);</div></div></div><div><span style="background-color:transparent"><br /></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#6a9955">// cluster.js</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">cluster</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'cluster'</span>);</div><div>    <span style="color:#569cd6">const</span> <span style="color:#51b6c4">os</span> = <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'os'</span>);</div><br /><div>    <span style="color:#c586c0">if</span> (<span style="color:#51b6c4">cluster</span>.<span style="color:#51b6c4">isMaster</span>) {</div><div>      <span style="color:#569cd6">const</span> <span style="color:#51b6c4">cpus</span> = <span style="color:#51b6c4">os</span>.<span style="color:#dcdcaa">cpus</span>().<span style="color:#9cdcfe">length</span>;</div><div>      <span style="color:#c586c0">for</span> (<span style="color:#569cd6">let</span> <span style="color:#9cdcfe">i</span> = <span style="color:#b5cea8">0</span>; <span style="color:#9cdcfe">i</span>&lt;<span style="color:#51b6c4">cpus</span>; <span style="color:#9cdcfe">i</span>++) {</div><div>        <span style="color:#51b6c4">cluster</span>.<span style="color:#dcdcaa">fork</span>();</div><div>      }</div><div>      <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Master PID: </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">process</span>.<span style="color:#9cdcfe">pid</span><span style="color:#569cd6">}</span><span style="color:#ce9178">`</span>);</div><br /><div>      <span style="color:#6a9955">// Restart the worker process if it is crashed. Do NOT restart if it is closed intentional or error code = 0</span></div><div>      <span style="color:#51b6c4">cluster</span>.<span style="color:#dcdcaa">on</span>(<span style="color:#ce9178">'exit'</span>, (<span style="color:#9cdcfe">worker</span>, <span style="color:#9cdcfe">code</span>, <span style="color:#9cdcfe">signal</span>) <span style="color:#569cd6">=&gt;</span> {</div><div>        <span style="color:#c586c0">if</span> (<span style="color:#9cdcfe">code</span> !== <span style="color:#b5cea8">0</span> &amp;&amp; !<span style="color:#9cdcfe">worker</span>.<span style="color:#9cdcfe">exitedAfterDisconnect</span>) {</div><div>          <span style="color:#9cdcfe">console</span>.<span style="color:#dcdcaa">log</span>(<span style="color:#ce9178">`Worker </span><span style="color:#569cd6">${</span><span style="color:#9cdcfe">worker</span>.<span style="color:#9cdcfe">id</span><span style="color:#569cd6">}</span><span style="color:#ce9178"> crashed. `</span> +</div><div>                      <span style="color:#ce9178">'Starting a new worker...'</span>);</div><div>          <span style="color:#51b6c4">cluster</span>.<span style="color:#dcdcaa">fork</span>(); <span style="color:#6a9955">// restart the crashed worker progress.</span></div><div>        }</div><div>      });</div><div>    } <span style="color:#c586c0">else</span> {</div><div>      <span style="color:#dcdcaa">require</span>(<span style="color:#ce9178">'./server'</span>); <span style="color:#6a9955">// start the server instance</span></div><div>    }</div></div></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><b>Note:</b> Process monitor and down time management can also be done using tools instead writing using cluster module. One of the famous node.js module base tool is <b>PM2. </b></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">    <span style="color:#9cdcfe">npm</span> <span style="color:#9cdcfe">install</span> <span style="color:#9cdcfe">pm2</span></div></div><div><br /></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><span style="background-color:transparent"><br /></span></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div></div></div></td></tr></tbody></table><div class="sites-layout-tile sites-tile-name-footer sites-layout-empty-tile"><div dir="ltr"><br /></div></div></div>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages" class="sites-canvas-bottom-panel-wrapper" style="">
<div class="sites-subpages">
            Subpages <span id="subpages-total-number">(3):</span>
<span>
<a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/express-js" dir="ltr">express.js</a>
</span>
<span>
<a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/node-interview-question" dir="ltr">node Interview Question</a>
</span>
<span>
<a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/restful-webservices-with-node-js-and-express" dir="ltr">RESTful WebServices with Node.js and Express</a>
</span>
</div>
</div>
<div id="sites-attachments-container">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-attachments">
<div class="sites-attachments-row"><div class="sites-attachments-icon" style="left:0px;"><span aria-label="Attachments" title="Attachments"><div class="sites-translucent sites-symbol" aria-hidden="true">Č</div></span></div><div id="sites-attachments-update-div" class="sites-attachments-inner-div" style="display:none;"><span class="sites-attachments-update-icon"><img src="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/spinner.gif" /></span><div class="sites-attachments-update-text">Updating...</div></div></div><div class="sites-attachments-separator"></div>
<div id="attachment-wuid:gx:606acace35b38cff"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name">nodejs-advanced_by_SamerBuna.zip <div class="sites-translucent">(1868k)</div></div><div class="sites-attachments-author">Sridhar Krishnan, <div class="sites-translucent">May 15, 2020, 10:22 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="https://sites.google.com/site/sridharkritha/system/app/pages/admin/revisions?wuid=wuid:gx:606acace35b38cff">v.1</a></div><div id="attachment-download-wuid:gx:606acace35b38cff" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/nodejs-advanced_by_SamerBuna.zip?attredirects=0&amp;d=1" aria-label="Download nodejs-advanced_by_SamerBuna.zip" title="Download" role="button" target="_blank" rel="noopener noreferrer"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div id="attachment-wuid:gx:6510bb433eef06d1"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name">nodejs-getting-started_by_SamerBuna.zip <div class="sites-translucent">(22925k)</div></div><div class="sites-attachments-author">Sridhar Krishnan, <div class="sites-translucent">May 8, 2020, 9:12 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="https://sites.google.com/site/sridharkritha/system/app/pages/admin/revisions?wuid=wuid:gx:6510bb433eef06d1">v.1</a></div><div id="attachment-download-wuid:gx:6510bb433eef06d1" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary/nodejs-getting-started_by_SamerBuna.zip?attredirects=0&amp;d=1" aria-label="Download nodejs-getting-started_by_SamerBuna.zip" title="Download" role="button" target="_blank" rel="noopener noreferrer"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div style="height: 10px"></div>
</div>
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/ServiceLogin?continue=https://sites.google.com/site/sridharkritha/home/javascript/nodejs/summary&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXtASf_M2E6cjJ9Hgufts3RfM7MwuhM--x9xhZTQT2CPHwCLL9fpmO7GNKyzwGCaI0Ty6nKAeieIuxIyDC-W_z3fjSd2sOJJEVbe3n7oqNydO_qLjDjHYQFF8D1NbEAVqGhl3ClN/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
    gsites.Xhr.send('../../../_/tz.html', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, '../../../../../../gg.google.com/csi.gif');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>

<!-- Mirrored from sites.google.com/site/sridharkritha/home/javascript/nodejs/summary by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 10:31:46 GMT -->
</html>
