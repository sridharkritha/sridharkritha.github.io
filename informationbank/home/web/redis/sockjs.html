<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="../../../../../../schema.org/WebPage.html">

<!-- Mirrored from sites.google.com/site/sridharkritha/home/web/redis/sockjs by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 11:36:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { /*

Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="../../../../../../www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/sridharkritha/home","deleted":false,"title":"home","dir":"ltr"},{"path":"/site/sridharkritha/home/web","deleted":false,"title":"Web","dir":"ltr"},{"path":"/site/sridharkritha/home/web/redis","deleted":false,"title":"Redis","dir":"ltr"},{"path":"/site/sridharkritha/home/web/redis/sockjs","deleted":false,"title":"SockJS, Redis, Node.js  [ Chat Application]","dir":"ltr"}];
  var JOT_clearDotPath = '../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":false,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://1994533369-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"sridharkritha","experiments":{"enableSubpagesGadgetInTakeout":true,"DisableSiteEditingFeature__disable_site_editing":true,"disableDomainEditing":false},"jot2atari":{"eligibility":"INELIGIBLE"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"moreMobileStyleImprovements":null,"subscriptionDataMigrationInProgress":null,"plusBadge":false},"configProperties":{"disableSiteEditing":null},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/sridharkritha/home/web/redis/sockjs\u0026service\u003djotspot","analyticsAccountId":"","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/a71eef/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/a71eef/system/js/codemirror.js","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codemirror_css.css","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/js/trog_edit__en.js","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/trogedit.css","../../../_/rsrc/1624520311000/system/app/css/editor.css","../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codeeditor.css","/site/sridharkritha/_/rsrc/1624520311000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/sridharkritha","name":"sridharkritha","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/home/web/redis","parentWuid":"wuid:gx:65013ccad1fcd163","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"SockJS, Redis, Node.js  [ Chat Application]","locale":"en","wuid":"wuid:gx:678380dc9f279984","revision":2,"path":"/home/web/redis/sockjs","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"sockjs","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/site/sridharkritha/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="SockJS, Redis, Node.js  [ Chat Application] - sridharkritha" />
<meta itemprop="name" content="SockJS, Redis, Node.js  [ Chat Application] - sridharkritha" />
<meta property="og:title" content="SockJS, Redis, Node.js  [ Chat Application] - sridharkritha" />
<meta name="description" content="Information Bank - Computer Science" />
<meta itemprop="description" content="Information Bank - Computer Science" />
<meta id="meta-tag-description" property="og:description" content="Information Bank - Computer Science" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/themes/ember/standard-css-ember-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1624520311000/system/app/css/overlaydd2a.css?cb=ember150goog-ws-noside" />
<link rel="stylesheet" type="text/css" href="../../../_/rsrc/1624520311000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/sridharkritha/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>SockJS, Redis, Node.js  [ Chat Application] - sridharkritha</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2></h2></div></td><td class="sites-layout-searchbox  "></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="display: none; width: 150px">
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../../home.html" dir="ltr">home</A>‎ &gt; ‎<A href="../../web.html" dir="ltr">Web</A>‎ &gt; ‎<A href="../redis.html" dir="ltr">Redis</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">SockJS, Redis, Node.js  [ Chat Application]</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-left-sidebar-hf sites-layout-vbox"><div class="sites-layout-tile sites-tile-name-header"><div dir="ltr">Ref:<br />http://jinzhang.me/posts/2013/sockjs-redis-nodejs-tutorial/<br />https://github.com/jinzhangg/sockjs-tutorial<br /></div></div><table cellspacing="0" class="sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1 sites-canvas-sidebar sites-layout-empty-tile"><div dir="ltr"><br /></div></td><td class="sites-layout-tile sites-tile-name-content-2"><div dir="ltr"><div></div>
Sockjs Installation:<br />
<div>
<div>
<pre><code>npm install sockjs<br /><br /></code></pre>
<pre><code>Tutotial:<br /></code></pre>
<br />
<p>I became interested in real-time web applications when I saw an excellent <a href="http://pyvideo.org/video/1798/make-more-responsive-web-applications-with-socket" rel="nofollow">PyCon video</a>
 on Socket.io by Luke Sneeringer. I decided to explore the subject and 
was disappointed to find little to none easy to follow tutorials 
available on the subject. This is not surprising given that WebSockets 
is still in its early stages. There are still issues dealing with proper
 browser support for the WebSockets standard. Libraries such as 
socket.io and SockJS aim to fix this problem by falling back on less 
optimal but more widely support methods to mimic two way communication 
for example by using Flash or long polling and others.</p>
<p>In this tutorial, I will describe how to architect a real-time chat web application using SockJS, Redis, and node.js.</p>
<p>Why use SockJS over socket.io?
Socket.io is certainly the more popular choice with 8k stars on Github 
compared to 1.2k for SockJS. The reader can investigate both frameworks 
and decide for himself which to use but during my research here are the 
main reasons I chose SockJS over socket.io:</p>
<blockquote>
<ol><li><a href="https://groups.google.com/forum/#%21msg/sockjs/lgzxVnlth54/NbQKNEAzB5cJ">Discussion</a> from one of the main SockJS contributors comparing the two frameworks.</li>
<li><a href="http://blog.pythonanywhere.com/27/" rel="nofollow">PythonAnywhere</a> blog post about benchmarking between the two libraries.</li>
<li>This is related to the Python gevent-socketio library. Since I'm a 
Python user, this was the implementation I would use if I selected 
socketio. <a href="https://groups.google.com/d/msg/gevent-socketio/lHhaUZu7tTo/ZRBcohD9A7gJ">Mailing list</a> on April 15, 2013 discussing a possible memory leak which author acknowledges.</li>
</ol>
</blockquote>
<p>We will be using the <a href="http://expressjs.com/" rel="nofollow">Express</a>
 microframework as a layer over Node. Express provides some background 
lifting which will help us write a typical web application easier. I am 
only using Express in order to keep this tutorial as simple as possible.
 In a production setting, it is a common idea to use the web framework 
of your choice (Django, Flask, Rails, etc.) to handle the non-websockets
 section of your website and only use node.js with SockJS as necessary 
to provide real time functionality.</p>
<p>We will be extending one of the official SockJS chat server examples 
to use the Redis pub/sub system which will be closer to a real 
deployment situation. The pub/sub system is used to relay messages 
between the server and clients.</p>
<p>I will be using a Ubuntu 12.04 server from <a href="https://www.digitalocean.com/?refcode=34ed21971862" rel="nofollow">DigitalOcean</a>. On a fresh machine do the following:</p>
<div>
<pre><span>$</span> <span>sudo</span> <span>apt</span><span>-</span><span>get</span> <span>update</span>
<span>$</span> <span>sudo</span> <span>apt</span><span>-</span><span>get</span> <span>install</span> <span>build</span><span>-</span><span>essential</span>
</pre>
</div>
<p>Install packages we will be using:</p>
<div>
<pre><span>#</span> <span>Install</span> <span>package</span> <span>required</span> <span>to</span> <span>use</span> <span>add</span><span>-</span><span>apt</span><span>-</span><span>repository</span>
<span>$</span> <span>sudo</span> <span>apt</span><span>-</span><span>get</span> <span>install</span> <span>python</span><span>-</span><span>software</span><span>-</span><span>properties</span>
<span>#</span> <span>Node</span><span>.</span><span>js</span> <span>0.10</span><span>.</span><span>4</span>
<span>$</span> <span>sudo</span> <span>add</span><span>-</span><span>apt</span><span>-</span><span>repository</span> <span>ppa</span><span>:</span><span>chris</span><span>-</span><span>lea</span><span>/</span><span>node</span><span>.</span><span>js</span>
<span>#</span> <span>Redis</span><span>-</span><span>server</span> <span>2.6</span><span>.</span><span>12</span>
<span>$</span> <span>sudo</span> <span>add</span><span>-</span><span>apt</span><span>-</span><span>repository</span> <span>ppa</span><span>:</span><span>chris</span><span>-</span><span>lea</span><span>/</span><span>redis</span><span>-</span><span>server</span>
<span>#</span> <span>Update</span> <span>apt</span><span>-</span><span>get</span>
<span>$</span> <span>sudo</span> <span>apt</span><span>-</span><span>get</span> <span>update</span>
<span>#</span> <span>Now</span> <span>install</span> <span>our</span> <span>packages</span>
<span>$</span> <span>sudo</span> <span>apt</span><span>-</span><span>get</span> <span>install</span> <span>nodejs</span> <span>redis</span><span>-</span><span>server</span>
</pre>
</div>
<p>Create a directory called <code>sockjs-tutorial</code> to hold our project. Inside the directory create a file called <code>package.json</code>. This is a node.js specific file containing details about which package we will be using.</p>
<div>
<pre><span>{</span>
    <span>"name"</span><span>:</span> <span>"sockjs-express"</span><span>,</span>
    <span>"version"</span><span>:</span> <span>"0.0.0-unreleasable"</span><span>,</span>
    <span>"dependencies"</span><span>:</span> <span>{</span>
        <span>"express"</span><span>:</span> <span>"~3*"</span><span>,</span>
        <span>"sockjs"</span><span>:</span> <span>"*"</span><span>,</span>
        <span>"hiredis"</span><span>:</span> <span>"*"</span><span>,</span>
        <span>"redis"</span><span>:</span> <span>"*"</span>
    <span>}</span>
<span>}</span>
</pre>
</div>
<p>Now we can install them using this command: <code>$ npm install</code></p>
<p>Next create a file called server.js which will contain our node.js server code.
Inside the file, declare which packages we will be using:</p>
<div>
<pre><span>var</span> <span>express</span> <span>=</span> <span>require</span><span>(</span><span>'express'</span><span>);</span>
<span>var</span> <span>sockjs</span>  <span>=</span> <span>require</span><span>(</span><span>'sockjs'</span><span>);</span>
<span>var</span> <span>http</span>    <span>=</span> <span>require</span><span>(</span><span>'http'</span><span>);</span>
<span>var</span> <span>redis</span>   <span>=</span> <span>require</span><span>(</span><span>'redis'</span><span>);</span>
</pre>
</div>
<p>Create one publisher Redis client where we will push all user messages to.</p>
<div>
<pre><span>var</span> <span>publisher</span> <span>=</span> <span>redis</span><span>.</span><span>createClient</span><span>();</span>
</pre>
</div>
<p>Create the Sockjs server</p>
<div>
<pre><span>var</span> <span>sockjs_opts</span> <span>=</span> <span>{</span><span>sockjs_url</span><span>:</span> <span>"http://cdn.sockjs.org/sockjs-0.3.min.js"</span><span>};</span>
<span>var</span> <span>sockjs_chat</span> <span>=</span> <span>sockjs</span><span>.</span><span>createServer</span><span>(</span><span>sockjs_opts</span><span>);</span>
</pre>
</div>
<p>Next is where the real work happens.</p>
<div>
<pre><span>sockjs_chat</span><span>.</span><span>on</span><span>(</span><span>'connection'</span><span>,</span> <span>function</span><span>(</span><span>conn</span><span>)</span> <span>{</span>
    <span>var</span> <span>browser</span> <span>=</span> <span>redis</span><span>.</span><span>createClient</span><span>();</span>
    <span>browser</span><span>.</span><span>subscribe</span><span>(</span><span>'chat_channel'</span><span>);</span>

    <span>// When we see a message on chat_channel, send it to the browser</span>
    <span>browser</span><span>.</span><span>on</span><span>(</span><span>"message"</span><span>,</span> <span>function</span><span>(</span><span>channel</span><span>,</span> <span>message</span><span>){</span>
        <span>conn</span><span>.</span><span>write</span><span>(</span><span>message</span><span>);</span>
    <span>});</span>

    <span>// When we receive a message from browser, send it to be published</span>
    <span>conn</span><span>.</span><span>on</span><span>(</span><span>'data'</span><span>,</span> <span>function</span><span>(</span><span>message</span><span>)</span> <span>{</span>
        <span>publisher</span><span>.</span><span>publish</span><span>(</span><span>'chat_channel'</span><span>,</span> <span>message</span><span>);</span>
    <span>});</span>
<span>});</span>
</pre>
</div>
<p>Node.js is based on event programming meaning certain actions will emit an event when they trigger. One of the events is called <code>connection</code>.
 This will trigger when a browser client makes the initial connection to
 our node.js server. When this event triggers, we want to execute the 
anonymous function inside giving us a handle to the connection object 
called <code>conn</code>.</p>
<p>When the browser client connects, we want to create a new Redis 
client which will subscribe to our publisher we created earlier using 
the channel <code>chat_channel</code>.</p>
<div>
<pre><span>browser</span><span>.</span><span>on</span><span>(</span><span>"message"</span><span>,</span> <span>function</span><span>(</span><span>channel</span><span>,</span> <span>message</span><span>){</span>
    <span>conn</span><span>.</span><span>write</span><span>(</span><span>message</span><span>);</span>
<span>});</span>
</pre>
</div>
<p>This part of the code is the Redis subscriber client. When the 
channel we're subscribed to has a new message event, we want to grab 
that message and send it back to the browser using the SockJS <code>conn</code> object.</p>
<div>
<pre><span>conn</span><span>.</span><span>on</span><span>(</span><span>'data'</span><span>,</span> <span>function</span><span>(</span><span>message</span><span>)</span> <span>{</span>
        <span>publisher</span><span>.</span><span>publish</span><span>(</span><span>'chat_channel'</span><span>,</span> <span>message</span><span>);</span>
    <span>});</span>
</pre>
</div>
<p>Now we're coding on the connection object and when the connection 
receives data from the browser client, we're going to publish it to our 
Redis publisher on the channel <code>chat_channel</code>. When we publish it to the channel, all current subscribers to that channel will trigger their <code>on("message")</code> event. In our code, we want that event to also send a message to browser containing the message.</p>
<p>The last part of our code simply contains the Express and node.js framework boilerplate code which we need to serve a HTML file.</p>
<div>
<pre><span>// Express server</span>
<span>var</span> <span>app</span> <span>=</span> <span>express</span><span>();</span>
<span>var</span> <span>server</span> <span>=</span> <span>http</span><span>.</span><span>createServer</span><span>(</span><span>app</span><span>);</span>

<span>sockjs_chat</span><span>.</span><span>installHandlers</span><span>(</span><span>server</span><span>,</span> <span>{</span><span>prefix</span><span>:</span><span>'/chat'</span><span>});</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>' [*] Listening on 0.0.0.0:9001'</span> <span>);</span>
<span>server</span><span>.</span><span>listen</span><span>(</span><span>9001</span><span>,</span> <span>'0.0.0.0'</span><span>);</span>

<span>app</span><span>.</span><span>get</span><span>(</span><span>'/'</span><span>,</span> <span>function</span> <span>(</span><span>req</span><span>,</span> <span>res</span><span>)</span> <span>{</span>
    <span>res</span><span>.</span><span>sendfile</span><span>(</span><span>__dirname</span> <span>+</span> <span>'/index.html'</span><span>);</span>
<span>});</span>
</pre>
</div>
<p>The one SockJS part in there is the <code>sockjs_chat.installHandlers</code> code. We are simply binding our SockJS code to the server using the prefix <code>/chat</code>.
 We will need to use this prefix in our browser client javascript code 
which we will write next. The final <b>server.js</b> file should look like 
below:</p>
<p>
</p>
<font face="monospace">
<font color="#008b8b">var</font> express = require(<font color="#ff00ff">'express'</font>);<br />
<font color="#008b8b">var</font> sockjs  = require(<font color="#ff00ff">'sockjs'</font>);<br />
<font color="#008b8b">var</font> http    = require(<font color="#ff00ff">'http'</font>);<br />
<font color="#008b8b">var</font> redis   = require(<font color="#ff00ff">'redis'</font>);<br />
<br />
<br />
<font color="#0000ff">// Redis publisher</font><br />
<font color="#008b8b">var</font> publisher = redis.createClient();<br />
<br />
<font color="#0000ff">// Sockjs server</font><br />
<font color="#008b8b">var</font> sockjs_opts = <font color="#008b8b">{</font>sockjs_url: <font color="#ff00ff">"<a href="http://cdn.sockjs.org/sockjs-0.3.min.js" rel="nofollow">http://cdn.sockjs.org/sockjs-0.3.min.js</a>"</font><font color="#008b8b">}</font>;<br />
<font color="#008b8b">var</font> sockjs_chat = sockjs.createServer(sockjs_opts);<br />
sockjs_chat.on(<font color="#ff00ff">'connection'</font>, <font color="#008b8b">function</font>(conn) <font color="#008b8b">{</font><br />
    <font color="#008b8b">var</font> browser = redis.createClient();<br />
    browser.subscribe(<font color="#ff00ff">'chat_channel'</font>);<br />
<br />
    <font color="#0000ff">// When we see a message on chat_channel, send it to the browser</font><br />
    browser.on(<font color="#ff00ff">"message"</font>, <font color="#008b8b">function</font>(channel, message)<font color="#008b8b">{</font><br />
        conn.write(message);<br />
    <font color="#008b8b">}</font>);<br />
<br />
    <font color="#0000ff">// When we receive a message from browser, send it to be published</font><br />
    conn.on(<font color="#ff00ff">'data'</font>, <font color="#008b8b">function</font>(message) <font color="#008b8b">{</font><br />
        publisher.publish(<font color="#ff00ff">'chat_channel'</font>, message);<br />
    <font color="#008b8b">}</font>);<br />
<font color="#008b8b">}</font>);<br />
<br />
<font color="#0000ff">// Express server</font><br />
<font color="#008b8b">var</font> app = express();<br />
<font color="#008b8b">var</font> server = http.createServer(app);<br />
<br />
sockjs_chat.installHandlers(server, <font color="#008b8b">{</font>prefix:<font color="#ff00ff">'/chat'</font><font color="#008b8b">}</font>);<br />
<br />
console.log(<font color="#ff00ff">' [*] Listening on 0.0.0.0:9001'</font> );<br />
server.listen(9001, <font color="#ff00ff">'0.0.0.0'</font>);<br />
<br />
app.get(<font color="#ff00ff">'/'</font>, <font color="#008b8b">function</font> (req, res) <font color="#008b8b">{</font><br />
    res.sendfile(__dirname + <font color="#ff00ff">'/index.html'</font>);<br />
<font color="#008b8b">}</font>);</font>
<div>
</div>
<p>Now create a file called<b> index.html </b>and copy-paste the following code:<br />
<font face="monospace">
<font color="#0000ff">&lt;!doctype html&gt;</font><br />
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>html</b></font><font color="#008b8b">&gt;&lt;</font><font color="#a52a2a"><b>head</b></font><font color="#008b8b">&gt;</font><br />
<font color="#a020f0">    </font><font color="#008b8b">&lt;</font><font color="#a52a2a"><b>script</b></font><font color="#008b8b"> </font><font color="#2e8b57"><b>src</b></font><font color="#008b8b">=</font><font color="#ff00ff">"<a href="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js</a>"</font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>script</b></font><font color="#008b8b">&gt;</font><br />
<font color="#a020f0">    </font><font color="#008b8b">&lt;</font><font color="#a52a2a"><b>script</b></font><font color="#008b8b"> </font><font color="#2e8b57"><b>src</b></font><font color="#008b8b">=</font><font color="#ff00ff">"<a href="http://cdn.sockjs.org/sockjs-0.3.min.js" rel="nofollow">http://cdn.sockjs.org/sockjs-0.3.min.js</a>"</font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>script</b></font><font color="#008b8b">&gt;</font><br />
<font color="#a020f0">    </font><font color="#008b8b">&lt;</font><font color="#a52a2a"><b>style</b></font><font color="#008b8b">&gt;</font><br />
        <font color="#008b8b">.box</font> <font color="#008b8b">{</font><br />
            <font color="#2e8b57"><b>width</b></font>: <font color="#ff00ff">300px</font>;<br />
            <font color="#2e8b57"><b>float</b></font>: <font color="#2e8b57"><b>left</b></font>;<br />
            <font color="#2e8b57"><b>margin</b></font>: <font color="#ff00ff">0</font> <font color="#ff00ff">20px</font> <font color="#ff00ff">0</font> <font color="#ff00ff">20px</font>;<br />
        <font color="#008b8b">}</font><br />
        <font color="#008b8b">.box</font> <font color="#a52a2a"><b>div</b></font>, <font color="#008b8b">.box</font> <font color="#a52a2a"><b>input</b></font> <font color="#008b8b">{</font><br />
            <font color="#2e8b57"><b>border</b></font>: <font color="#ff00ff">1px</font> <font color="#2e8b57"><b>solid</b></font>;<br />
            -moz-<font color="#2e8b57"><b>border</b></font>-radius: <font color="#ff00ff">4px</font>;<br />
            <font color="#2e8b57"><b>border</b></font>-radius: <font color="#ff00ff">4px</font>;<br />
            <font color="#2e8b57"><b>width</b></font>: <font color="#ff00ff">100%</font>;<br />
            <font color="#2e8b57"><b>padding</b></font>: <font color="#ff00ff">0px</font>;<br />
            <font color="#2e8b57"><b>margin</b></font>: <font color="#ff00ff">5px</font>;<br />
        <font color="#008b8b">}</font><br />
        <font color="#008b8b">.box</font> <font color="#a52a2a"><b>div</b></font> <font color="#008b8b">{</font><br />
            <font color="#2e8b57"><b>border-color</b></font>: grey;<br />
            <font color="#2e8b57"><b>height</b></font>: <font color="#ff00ff">300px</font>;<br />
            <font color="#2e8b57"><b>overflow</b></font>: <font color="#2e8b57"><b>auto</b></font>;<br />
        <font color="#008b8b">}</font><br />
        <font color="#008b8b">.box</font> <font color="#a52a2a"><b>input</b></font> <font color="#008b8b">{</font><br />
            <font color="#2e8b57"><b>height</b></font>: <font color="#ff00ff">30px</font>;<br />
        <font color="#008b8b">}</font><br />
        <font color="#a52a2a"><b>h1</b></font> <font color="#008b8b">{</font><br />
            <font color="#2e8b57"><b>margin-left</b></font>: <font color="#ff00ff">30px</font>;<br />
        <font color="#008b8b">}</font><br />
        <font color="#a52a2a"><b>body</b></font> <font color="#008b8b">{</font><br />
            <font color="#2e8b57"><b>background-color</b></font>: <font color="#ff00ff">#F0F0F0</font>;<br />
            <font color="#2e8b57"><b>font-family</b></font>: <font color="#ff00ff">"Arial"</font>;<br />
        <font color="#008b8b">}</font><br />
    <font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>style</b></font><font color="#008b8b">&gt;</font><br />
<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>head</b></font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;</font><font color="#a52a2a"><b>body</b></font><font color="#008b8b"> </font><font color="#2e8b57"><b>lang</b></font><font color="#008b8b">=</font><font color="#ff00ff">"en"</font><font color="#008b8b">&gt;</font><br />
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>h1</b></font><font color="#008b8b">&gt;</font><font color="#ff00ff"><b>SockJS, Redis, Node.js Tutorial</b></font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>h1</b></font><font color="#008b8b">&gt;</font><br />
<br />
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>div</b></font><font color="#008b8b"> </font><font color="#2e8b57"><b>id</b></font><font color="#008b8b">=</font><font color="#ff00ff">"first"</font><font color="#008b8b"> </font><font color="#2e8b57"><b>class</b></font><font color="#008b8b">=</font><font color="#ff00ff">"box"</font><font color="#008b8b">&gt;</font><br />
    <font color="#008b8b">&lt;</font><font color="#a52a2a"><b>div</b></font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>div</b></font><font color="#008b8b">&gt;</font><br />
    <font color="#008b8b">&lt;</font><font color="#a52a2a"><b>form</b></font><font color="#008b8b">&gt;&lt;</font><font color="#a52a2a"><b>input</b></font><font color="#008b8b"> autocomplete=</font><font color="#ff00ff">"off"</font><font color="#008b8b">&gt;</font><font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>input</b></font><font color="#008b8b">&gt;&lt;/</font><font color="#a52a2a"><b>form</b></font><font color="#008b8b">&gt;</font><br />
<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>div</b></font><font color="#008b8b">&gt;</font><br />
<br />
<font color="#008b8b">&lt;</font><font color="#a52a2a"><b>script</b></font><font color="#008b8b">&gt;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> sockjs_url = </font><font color="#ff00ff">'/chat'</font><font color="#6a5acd">;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> sockjs = </font><font color="#a52a2a"><b>new</b></font><font color="#6a5acd"> SockJS</font>(<font color="#6a5acd">sockjs_url</font>)<font color="#6a5acd">;</font><br />
<br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> userid = </font><font color="#ff00ff">'guest'</font><font color="#6a5acd"> + </font><font color="#a52a2a"><b>new</b></font><font color="#6a5acd"> </font><font color="#2e8b57"><b>Date</b></font>()<font color="#6a5acd">.getSeconds</font>()<font color="#6a5acd">;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> div  = $</font>(<font color="#ff00ff">'#first div'</font>)<font color="#6a5acd">;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> inp  = $</font>(<font color="#ff00ff">'#first input'</font>)<font color="#6a5acd">;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> form = $</font>(<font color="#ff00ff">'#first form'</font>)<font color="#6a5acd">;</font><br />
<br />
<font color="#6a5acd">    </font><font color="#008b8b">var</font><font color="#6a5acd"> print = </font><font color="#008b8b">function</font>(<font color="#6a5acd">message</font>)<font color="#008b8b">{</font><br />
<font color="#6a5acd">        div.append</font>(<font color="#6a5acd">$</font>(<font color="#ff00ff">"&lt;code&gt;"</font>)<font color="#6a5acd">.text</font>(<font color="#6a5acd">message</font>))<font color="#6a5acd">;</font><br />
<font color="#6a5acd">        div.append</font>(<font color="#6a5acd">$</font>(<font color="#ff00ff">"&lt;br&gt;"</font>))<font color="#6a5acd">;</font><br />
<font color="#6a5acd">        div.scrollTop</font>(<font color="#6a5acd">div.scrollTop</font>()<font color="#6a5acd">+</font>10000)<font color="#6a5acd">;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">}</font><br />
<br />
<font color="#6a5acd">    sockjs.onopen    = </font><font color="#008b8b">function</font>()<font color="#6a5acd">  </font><font color="#008b8b">{</font><font color="#6a5acd">print</font>(<font color="#ff00ff">'Connected.'</font>)<font color="#6a5acd">;</font><font color="#008b8b">}</font><font color="#6a5acd">;</font><br />
<font color="#6a5acd">    sockjs.onmessage = </font><font color="#008b8b">function</font>(<font color="#6a5acd">e</font>)<font color="#6a5acd"> </font><font color="#008b8b">{</font><font color="#6a5acd">print</font>(<font color="#6a5acd">e.data</font>)<font color="#6a5acd">;</font><font color="#008b8b">}</font><font color="#6a5acd">;</font><br />
<font color="#6a5acd">    sockjs.onclose   = </font><font color="#008b8b">function</font>()<font color="#6a5acd">  </font><font color="#008b8b">{</font><font color="#6a5acd">print</font>(<font color="#ff00ff">'Closing Connection.'</font>)<font color="#6a5acd">;</font><font color="#008b8b">}</font><font color="#6a5acd">;</font><br />
<br />
<font color="#6a5acd">    form.submit</font>(<font color="#008b8b">function</font>()<font color="#6a5acd"> </font><font color="#008b8b">{</font><br />
<font color="#6a5acd">        print</font>(<font color="#ff00ff">'Sending to server...'</font>)<font color="#6a5acd">;</font><br />
<font color="#6a5acd">        sockjs.send</font>(<font color="#6a5acd">userid + </font><font color="#ff00ff">': '</font><font color="#6a5acd"> + inp.val</font>())<font color="#6a5acd">;</font><br />
<font color="#6a5acd">        inp.val</font>(<font color="#ff00ff">''</font>)<font color="#6a5acd">;</font><br />
<font color="#6a5acd">        </font><font color="#a52a2a"><b>return</b></font><font color="#6a5acd"> </font><font color="#ff00ff">false</font><font color="#6a5acd">;</font><br />
<font color="#6a5acd">    </font><font color="#008b8b">}</font>)<font color="#6a5acd">;</font><br />
<br />
<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>script</b></font><font color="#008b8b">&gt;</font><br />
<font color="#008b8b">&lt;/</font><font color="#a52a2a"><b>body</b></font><font color="#008b8b">&gt;&lt;/</font><font color="#a52a2a"><b>html</b></font><font color="#008b8b">&gt;</font><br />
</font>
</p>
<div>
</div>
<p>The SockJS part that we are interested in is the three lines below:</p>
<div>
<pre><span>sockjs</span><span>.</span><span>onopen</span>    <span>=</span> <span>function</span><span>()</span>  <span>{</span><span>print</span><span>(</span><span>'Connected.'</span><span>);};</span>
<span>sockjs</span><span>.</span><span>onmessage</span> <span>=</span> <span>function</span><span>(</span><span>e</span><span>)</span> <span>{</span><span>print</span><span>(</span><span>e</span><span>.</span><span>data</span><span>);};</span>
<span>sockjs</span><span>.</span><span>onclose</span>   <span>=</span> <span>function</span><span>()</span>  <span>{</span><span>print</span><span>(</span><span>'Closing Connection.'</span><span>);};</span>
</pre>
</div>
<p>These are three events that SockJS will emit during the lifetime of 
the connection. When the connection is first established between the 
SockJS browser client and the Node.js server, it will trigger the <code>sockjs.onopen</code> function. Any messages sent from the server to the browser during this connection will trigger the <code>sockjs.onmessage</code> function, which we simply ask Javascript to print to our browser. Finally, when the connection is closed, we will trigger the <code>sockjs.onclose</code> function.</p>
<p>The last piece to discuss is sending data from the browser back to the server. This work is done in this function:</p>
<div>
<pre><span>form</span><span>.</span><span>submit</span><span>(</span><span>function</span><span>()</span> <span>{</span>
    <span>print</span><span>(</span><span>'Sending to server...'</span><span>);</span>
    <span>sockjs</span><span>.</span><span>send</span><span>(</span><span>userid</span> <span>+</span> <span>': '</span> <span>+</span> <span>inp</span><span>.</span><span>val</span><span>());</span>
    <span>inp</span><span>.</span><span>val</span><span>(</span><span>''</span><span>);</span>
    <span>return</span> <span>false</span><span>;</span>
<span>});</span>
</pre>
</div>
<p>We simply call <code>sockjs.send("some message here")</code> in order
 to send data back to Node.js. In our case, we send a variable called 
userid which we simply define as a "guest" string plus a random number 
using the current time in seconds. We add this to the form's input value
 to complete the message.</p>
<p>Now for the fun part. Start our node.js server by entering the command into your terminal:</p>
<div>
<pre><span>$</span> <span>node</span> <span>server</span><span>.</span><span>js</span>
</pre>
</div>
<p>Open up two browsers and navigate to <a href="http://localhost:9001/" rel="nofollow">http://localhost:9001</a>. When you type in a message from one browser, the second browser will receive the message almost instantaneously!</p>
<p>That's it. We have just made a real-time web application that can 
utilize a two-way communication link between the server and browser. I 
think that's pretty cool. This is the future of the web and just as we 
moved from static HTML pages to dynamic database driven websites, we 
will move towards real-time web applications.</p>
<p>In the future, I will make another post describing how to put 
everything together and deploy using Nginx and either Flask or Django as
 the main web framework with node.js only handling the WebSockets 
section of our website.</p>
<p>You can view the source code on <a href="https://github.com/jinzhangg/sockjs-tutorial" rel="nofollow">GitHub</a>.</p>
<br />
</div>
</div></div></td></tr></tbody></table><div class="sites-layout-tile sites-tile-name-footer sites-layout-empty-tile"><div dir="ltr"><br /></div></div></div>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-attachments">
<div class="sites-attachments-row"><div class="sites-attachments-icon" style="left:0px;"><span aria-label="Attachments" title="Attachments"><div class="sites-translucent sites-symbol" aria-hidden="true">Č</div></span></div><div id="sites-attachments-update-div" class="sites-attachments-inner-div" style="display:none;"><span class="sites-attachments-update-icon"><img src="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/spinner.gif" /></span><div class="sites-attachments-update-text">Updating...</div></div></div><div class="sites-attachments-separator"></div>
<div id="attachment-wuid:gx:7d475bcf05572535"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name"><a href="https://docs.google.com/viewer?a=v&amp;pid=sites&amp;srcid=ZGVmYXVsdGRvbWFpbnxzcmlkaGFya3JpdGhhfGd4OjdkNDc1YmNmMDU1NzI1MzU" target="_blank" rel="noopener noreferrer">index.html</a> <div class="sites-translucent">(2k)</div></div><div class="sites-attachments-author">Sridhar Krishnan, <div class="sites-translucent">Dec 29, 2013, 11:09 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="https://sites.google.com/site/sridharkritha/system/app/pages/admin/revisions?wuid=wuid:gx:7d475bcf05572535">v.1</a></div><div id="attachment-download-wuid:gx:7d475bcf05572535" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="https://sites.google.com/site/sridharkritha/home/web/redis/sockjs/index.html?attredirects=0&amp;d=1" aria-label="Download index.html" title="Download" role="button" target="_blank" rel="noopener noreferrer"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div id="attachment-wuid:gx:4eaa40c0c887c570"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name">package.json <div class="sites-translucent">(0k)</div></div><div class="sites-attachments-author">Sridhar Krishnan, <div class="sites-translucent">Dec 29, 2013, 11:09 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="https://sites.google.com/site/sridharkritha/system/app/pages/admin/revisions?wuid=wuid:gx:4eaa40c0c887c570">v.1</a></div><div id="attachment-download-wuid:gx:4eaa40c0c887c570" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="https://sites.google.com/site/sridharkritha/home/web/redis/sockjs/package.json?attredirects=0&amp;d=1" aria-label="Download package.json" title="Download" role="button" target="_blank" rel="noopener noreferrer"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div id="attachment-wuid:gx:2d5e74dce2d8247e"><div class="sites-attachments-row"><div class="sites-attachments-icon sites-attachments-icon-accessible" style="left:5px"><div class="sites-translucent sites-symbol" aria-label="File" title="File">ċ</div></div><div class="sites-attachments-inner-div"><div class="sites-attachments-name"><a href="https://docs.google.com/viewer?a=v&amp;pid=sites&amp;srcid=ZGVmYXVsdGRvbWFpbnxzcmlkaGFya3JpdGhhfGd4OjJkNWU3NGRjZTJkODI0N2U" target="_blank" rel="noopener noreferrer">server.js</a> <div class="sites-translucent">(1k)</div></div><div class="sites-attachments-author">Sridhar Krishnan, <div class="sites-translucent">Dec 29, 2013, 11:09 AM</div></div></div><div class="sites-attachments-version sites-attachments-version-accessible"><a href="https://sites.google.com/site/sridharkritha/system/app/pages/admin/revisions?wuid=wuid:gx:2d5e74dce2d8247e">v.1</a></div><div id="attachment-download-wuid:gx:2d5e74dce2d8247e" class="sites-attachments-icon sites-attachments-icon-accessible" style="right:0px"><a href="https://sites.google.com/site/sridharkritha/home/web/redis/sockjs/server.js?attredirects=0&amp;d=1" aria-label="Download server.js" title="Download" role="button" target="_blank" rel="noopener noreferrer"><span class="sites-symbol" aria-hidden="true">ď</span></a></div></div><div class="sites-attachments-separator"></div></div>
<div style="height: 10px"></div>
</div>
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/ServiceLogin?continue=https://sites.google.com/site/sridharkritha/home/web/redis/sockjs&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../../../../../ssl.gstatic.com/sites/p/a71eef/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXtASf_M2E6cjJ9Hgufts3RfM7MwuhM--x9xhZTQT2CPH4a-Jbk4YtUdMftst3Eb2WyYC9iXOT83NvO1KLbiMV6dp-J_YWHrxHv613-VWuHHVAARBlyOlDTqQqu2WoohTCB0g18N/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
    gsites.Xhr.send('../../../_/tz.html', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, '../../../../../../gg.google.com/csi.gif');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>

<!-- Mirrored from sites.google.com/site/sridharkritha/home/web/redis/sockjs by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 11:36:35 GMT -->
</html>
