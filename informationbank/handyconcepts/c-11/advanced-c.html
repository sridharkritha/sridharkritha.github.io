<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="../../../../../schema.org/WebPage.html">

<!-- Mirrored from sites.google.com/site/sridharkritha/handyconcepts/c-11/advanced-c by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 10:31:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { /*

Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="../../../../../www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/sridharkritha/handyconcepts","deleted":false,"title":"handyconcepts","dir":"ltr"},{"path":"/site/sridharkritha/handyconcepts/c-11","deleted":false,"title":"C++ 11","dir":"ltr"},{"path":"/site/sridharkritha/handyconcepts/c-11/advanced-c","deleted":false,"title":"Advanced C++","dir":"ltr"}];
  var JOT_clearDotPath = '../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":false,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://1473080791-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"sridharkritha","experiments":{"enableSubpagesGadgetInTakeout":true,"DisableSiteEditingFeature__disable_site_editing":true,"disableDomainEditing":false},"jot2atari":{"eligibility":"INELIGIBLE"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"moreMobileStyleImprovements":null,"subscriptionDataMigrationInProgress":null,"plusBadge":false},"configProperties":{"disableSiteEditing":null},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/sridharkritha/handyconcepts/c-11/advanced-c\u0026service\u003djotspot","analyticsAccountId":"","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/a71eef/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/a71eef/system/js/codemirror.js","../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codemirror_css.css","../../../../../ssl.gstatic.com/sites/p/a71eef/system/js/trog_edit__en.js","../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/trogedit.css","../../_/rsrc/1624520311000/system/app/css/editor.css","../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codeeditor.css","/site/sridharkritha/_/rsrc/1624520311000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/sridharkritha","name":"sridharkritha","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":"/handyconcepts/c-11","parentWuid":"wuid:gx:62048820bd9fddf3","siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"Advanced C++","locale":"en","wuid":"wuid:gx:530440478eb5c9e3","revision":75,"path":"/handyconcepts/c-11/advanced-c","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"advanced-c","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/site/sridharkritha/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Advanced C++ - sridharkritha" />
<meta itemprop="name" content="Advanced C++ - sridharkritha" />
<meta property="og:title" content="Advanced C++ - sridharkritha" />
<meta name="description" content="Information Bank - Computer Science" />
<meta itemprop="description" content="Information Bank - Computer Science" />
<meta id="meta-tag-description" property="og:description" content="Information Bank - Computer Science" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="../../../../../ssl.gstatic.com/sites/p/a71eef/system/app/themes/ember/standard-css-ember-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1624520311000/system/app/css/overlaydd2a.css?cb=ember150goog-ws-noside" />
<link rel="stylesheet" type="text/css" href="../../_/rsrc/1624520311000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/sridharkritha/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Advanced C++ - sridharkritha</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2></h2></div></td><td class="sites-layout-searchbox  "></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="display: none; width: 150px">
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="../../handyconcepts.html" dir="ltr">handyconcepts</A>‎ &gt; ‎<A href="../c-11.html" dir="ltr">C++ 11</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Advanced C++</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-left-sidebar-hf sites-layout-vbox"><div class="sites-layout-tile sites-tile-name-header sites-layout-empty-tile"><div dir="ltr"><br /></div></div><table cellspacing="0" class="sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1 sites-canvas-sidebar sites-layout-empty-tile"><div dir="ltr"><br /></div></td><td class="sites-layout-tile sites-tile-name-content-2"><div dir="ltr"><b>1. const</b><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: const</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=7arYbAhu0aw&amp;list=PLE28375D4AC946CC3</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>()</div><div>{</div><div><span style="color:#6a9955">    // const - A COMPILE time constraint that an object can not be modified</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span> i = <span style="color:#b5cea8">5</span>;</div><div><span style="color:#6a9955">    // i = 10; // ERROR - compile time not run time error</span></div><br /><div>    <span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span> *p1 = &amp;i;<span style="color:#6a9955">  // data is const, pointer is not</span></div><div><span style="color:#6a9955">    // *p1 = 5;          // ERROR - compile time not run time error</span></div><div>    p1++;<span style="color:#6a9955">                // OK</span></div><br /><div>    <span style="color:#569cd6">int</span> j;</div><div>    <span style="color:#569cd6">int</span>* <span style="color:#569cd6">const</span> p2 = &amp;j;<span style="color:#6a9955">       // pointer is const, data is not</span></div><div><span style="color:rgb(106,153,85)">    // p2 = &amp;i;               // ERROR - compile time - pointer is const</span></div><div><span style="color:#6a9955">    // int* const pt = &amp;i;    // ERROR - </span><span style="color:rgb(106,153,85)">'initializing': cannot convert from 'const int *' to 'int *'</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span>* <span style="color:#569cd6">const</span> p3 = &amp;i; <span style="color:#6a9955">// data and pointer are both const</span></div><br /><div><span style="color:#6a9955">    // Tricky one</span></div><div>    <span style="color:#569cd6">int</span> <span style="color:#569cd6">const</span> *p4 = &amp;i;<span style="color:#6a9955">   // data is const, pointer is not</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span> *p4 = &amp;i;<span style="color:#6a9955">   // same as above and more readable</span></div><div><span style="color:#6a9955">    // If const is on the left  of *, data is const</span></div><div><span style="color:#6a9955">    // If const is on the right of *, pointer is const</span></div><br /><div><span style="color:#6a9955">    // Remove the constness</span></div><div><div style="line-height:22px"><div style="line-height:22px"><div>    <span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span> x = <span style="color:#b5cea8">9</span>;<span style="color:#6a9955"> // const - stored in ReadOnly segment</span></div><div><span style="color:#6a9955">    // x = 10; // Error</span></div><div>    <span style="color:#569cd6">const_cast</span>&lt;<span style="color:#569cd6">int</span>&amp;&gt;(x) = <span style="color:#b5cea8">10</span>;<span style="color:#6a9955"> // undefined but OK for compiler - DO NOT DO THIS !!</span></div><div>    cout &lt;&lt; x;<span style="color:#6a9955"> // 9 - value can NOT be changed in ReadOnly segment</span></div><div>    <span style="color:#dcdcaa">foo</span>(x);</div></div></div></div><br /><div><span style="color:#6a9955">    // Adding constness</span></div><div>    <span style="color:#569cd6">int</span> y = <span style="color:#b5cea8">2</span>;</div><div>    <span style="color:#569cd6">static_cast</span>&lt;<span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span>&amp;&gt;(y) = <span style="color:#b5cea8">8</span>;<span style="color:#6a9955"> // ERROR - Y is const at this point</span></div><div>    y = <span style="color:#b5cea8">10</span>;<span style="color:#6a9955"> // OK - Y is not const at this point so you can change</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">foo</span>(<span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span> <span style="color:#9cdcfe">y</span>) {<span style="color:#6a9955">       // const - but stored in stack segment</span></div><div>    <span style="color:#569cd6">const_cast</span>&lt;<span style="color:#569cd6">int</span>&amp;&gt;(y) = <span style="color:#b5cea8">10</span>;<span style="color:#6a9955"> // undefined - do NOT cast away the constness</span></div><div>    cout &lt;&lt; y;<span style="color:#6a9955"> // 10 - bcos of stack segment value has change but do NOT do this !!</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    Why use <span style="color:#569cd6">const</span></div><div>    a.) Guard against inadvertent write to the variable.</div><div>    b.) Self-documenting</div><div>    c.) Enable compiler to do more optimization, making code tighter.</div><div>    d.) <span style="color:#569cd6">const</span> usually means the variable is put in 'ROM'.</div></div></div><div><br /></div><div><b>2. const and Function:</b></div><div><b><br /></b></div><div><span style="font-size:13.3333px">Functions are the <b>SAME </b>so you can <b>NOT </b>be overloaded:</span></div><div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    void foo(int a)  {}         &lt;==SAME==&gt;      void foo(int&amp; a)       {}</span></div><div><span style="color:#6a9955">                                                void foo(const int a)  {}                                           </span></div><div><span style="color:#6a9955">                                                void foo(const int&amp; a) {}</span></div><br /><div><span style="color:#6a9955">    void foo(int&amp; a) {}         &lt;==SAME==&gt;      void foo(const int a)  {}</span></div></div></div></div><div><span style="font-size:13.3333px"><b><br /></b></span></div><div><span style="font-size:13.3333px">Functions are the <b>DIFFERENT </b>so you can <b>overloaded</b>:</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#6a9955">    void foo(int&amp; a) {}         &lt;==Diff==&gt;      void foo(const int&amp; a) {}</span></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: const and Functions</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=RC7uE_wl1Uc&amp;list=PLE28375D4AC946CC3&amp;index=2</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#6a9955">// const used with functions</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div>   <span style="color:#569cd6">int</span> age;</div><div>   string name;</div><div><span style="color:#569cd6">public:</span></div><div>   <span style="color:#dcdcaa">Dog</span>() { age = <span style="color:#b5cea8">3</span>; name = <span style="color:#ce9178">"dummy"</span>; }</div><div>   </div><div><span style="color:#6a9955">   // 1. const reference input parameters - most common in c++</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">setAge</span>(<span style="color:#569cd6">const</span> <span style="color:#569cd6">int&amp;</span> <span style="color:#9cdcfe">a</span>)<span style="color:#6a9955"> // here 'const' is even can be used for FUNCTION 'overloading' </span></div><div>    {   age = a; </div><div><span style="color:#6a9955">      // ++a; // ERROR - Cannot modifiable</span></div><div>    } </div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">setAge</span>(<span style="color:#569cd6">int&amp;</span> <span style="color:#9cdcfe">a</span>) { }<span style="color:#6a9955">         // Function overloading by removing 'const'</span></div><div><span style="color:#6a9955">   // void setAge(const int a) { } // CANNOT be overloded by '&amp;'</span></div><div><span style="color:#6a9955">   // void setAge(int a) { }       // CANNOT be overloded </span><span style="color:rgb(106,153,85)">by '&amp;'</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">setAgeDouble</span>(<span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span> <span style="color:#9cdcfe">a</span>) { }<span style="color:#6a9955"> // const is NOT useful in this case bcos pass by value</span></div><div>   </div><div><span style="color:#6a9955">   // 2. Const reference return</span></div><div>   <span style="color:#569cd6">const</span> <span style="color:#4ec9b0">string</span><span style="color:#569cd6">&amp;</span> <span style="color:#dcdcaa">getName</span>() { <span style="color:#c586c0">return</span> name; }</div><div>   <span style="color:#569cd6">const</span> <span style="color:#4ec9b0">string</span> <span style="color:#dcdcaa">getLastName</span>() { }<span style="color:#6a9955"> // const is NOT useful in this case bcos return by value</span></div><div><span style="color:#6a9955">   // cannot overload functions distinguished by return type alone</span></div><div>   <span style="color:#569cd6">const</span> <span style="color:#4ec9b0">string</span><span style="color:#569cd6">&amp;</span> <span style="color:#dcdcaa">getFirstName</span>() { }<span style="color:#6a9955"> </span></div><div><span style="color:#6a9955">   //    string&amp; getFirstName() { } // ERROR - cannot overload functions distinguished by return type alone</span></div><div><span style="color:#6a9955">   // const string getFirstName() { } // ERROR - cannot overload functions distinguished by return type alone</span></div><div>   </div><div><span style="color:#6a9955">   // 3. const FUNCTION</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">printDogName</span>() <span style="color:#569cd6">const</span><span style="color:#6a9955">  // here const is even can be used for FUNCTION overloading </span></div><div>   { </div><div>       cout &lt;&lt; name &lt;&lt; <span style="color:#ce9178">"const"</span> &lt;&lt; endl; </div><div><span style="color:#6a9955">        //  age++;    // ERROR - MEMBER variable CANNOT be changed</span></div><div><span style="color:#6a9955">        //  getName() // ERROR - getName() is NOT const FUNCTION</span></div><div>   }</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">printDogName</span>() { cout &lt;&lt; <span style="color:#dcdcaa">getName</span>() &lt;&lt; <span style="color:#ce9178">" non-const"</span> &lt;&lt; endl; }<span style="color:#6a9955"> // FUNCTION overloading</span></div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   Dog d;</div><div>   <span style="color:#569cd6">int</span> i = <span style="color:#b5cea8">9</span>;</div><div>   <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">setAge</span>(i);</div><div>   <span style="color:#569cd6">const</span> string&amp; n = <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">getName</span>();</div><div>   <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">printDogName</span>();<span style="color:#6a9955"> // non const object can call BOTH 1. non-const or 2. const member function</span></div><div>   </div><div>   <span style="color:#569cd6">const</span> Dog d2;</div><div>   <span style="color:#9cdcfe">d2</span>.<span style="color:#dcdcaa">printDogName</span>();<span style="color:#6a9955"> // const object </span><span style="color:rgb(106,153,85)">call ONLY 1. const member function</span></div><div>}</div></div></div><div><br /></div><div><b>3. Logic constness and Bitwise constness :</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Logic Constness and Bitwise Constness</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=8A5AwX6XExw&amp;list=PLE28375D4AC946CC3&amp;index=3</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;vector&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">BigArray</span> {</div><div>   <span>    </span>vector&lt;<span style="color:#569cd6">int</span>&gt; v;<span style="color:#6a9955"> // huge vector</span></div><div>   <span>    </span><span style="color:#569cd6">int</span>* v2;<span style="color:#6a9955">       // another int array</span></div><br /><div>   <span>    </span><span style="color:#569cd6">mutable</span> <span style="color:#569cd6">int</span> accessCounter;</div><div>   <span>    </span><span style="color:#569cd6">int</span> updateCounter;</div><div><span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">int</span> <span style="color:#dcdcaa">getItem</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">index</span>) <span style="color:#569cd6">const</span><span style="color:#6a9955"> // We can CHANGE the member variable even it is a const function !!!</span></div><div><span style="color:#6a9955">   </span>{<span style="color:rgb(106,153,85)">  // Method 1: Change to mutable</span></div><div>      accessCounter++;</div><div><span style="color:#6a9955">      // Method 2: casting - Not recommended</span></div><div>      <span style="color:#569cd6">const_cast</span>&lt;BigArray*&gt;(<span style="color:#569cd6">this</span>)-&gt;<span style="color:#9cdcfe">updateCounter</span>++;</div><div>      <span style="color:#c586c0">return</span> <span style="color:#9cdcfe">v</span>[index];</div><div>   }</div><div>   </div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">setV2Item</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">index</span>, <span style="color:#569cd6">int</span> <span style="color:#9cdcfe">x</span>)  <span style="color:#569cd6">const </span>{</div><div><span style="color:#6a9955">      // Compiler make sure that constness by bitwise operation</span></div><div>      *(v2+index) = x;<span style="color:#6a9955"> // it maintains the bitwise constness so it is OK to change the member variable</span></div><div>   }</div><div>    </div><div><span style="color:#6a9955">   // Quiz:</span></div><div>   <span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span>*<span style="color:#569cd6">const</span> <span style="color:#dcdcaa">fun</span>(<span style="color:#569cd6">const</span> <span style="color:#569cd6">int</span>*<span style="color:#569cd6">const</span>&amp; p)<span style="color:#569cd6">const</span>;</div><div> };</div><br /><div> <span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>(){</div><div>    BigArray b;</div><div> }</div></div></div><div><br /></div><div><br /></div><div><b>4. Disallow the use of compiler generated functions:</b></div><div><div style="background-color:rgb(30,30,30);line-height:22px"><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// Ref: Advanced C++: Disallow the use of compiler generated functions </span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// https://www.youtube.com/watch?v=EL30-a2gblQ&amp;list=PLE28375D4AC946CC3&amp;index=5</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;string&gt;</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">public:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">   // STOP the DEFAULT constructor generation by defining your own constructor</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#dcdcaa">Dog</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { cout &lt;&lt; name; }<span style="color:#6a9955">  // Dog() { } - will NOT be generated by compiler</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    </div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">   // C++ 11 way of STOPPING the COPY constructor generation by compiler</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#dcdcaa">Dog</span>(<span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">&amp;</span> ) = <span style="color:#569cd6">delete</span>;</div><div><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">   </span></font><span style="color:rgb(78,201,176);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">Dog</span><span style="color:rgb(86,156,214);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">&amp;</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre"> </span></font><span style="color:rgb(197,134,192);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">operator=</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">(</span></font><span style="color:rgb(86,156,214);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">const</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre"> </span></font><span style="color:rgb(78,201,176);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">Dog</span><span style="color:rgb(86,156,214);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">&amp;</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">) = </span></font><span style="color:rgb(197,134,192);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">delete</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">;</span></font><span style="color:rgb(106,153,85);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"> // </span><font color="#6a9955" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">similarly</span></font><span style="color:rgb(106,153,85);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"> STOP the COPY ASSIGNMENT</span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // Useful only for heap</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">destroyME</span>() { <span style="color:#c586c0">delete</span> <span style="color:#569cd6">this</span>; }</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">private:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">   // C++ 98 way of STOPPING the COPY constructor/ASSIGNMENT generation by compiler</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#dcdcaa">Dog</span>(<span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">&amp;</span> );<span style="color:#6a9955"> // DECLARE BUT NOT DEFINE in the PRIVATE section</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">&amp;</span>);<span style="color:#6a9955"> // similliarly STOP the COPY ASSIGNMENT</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">   // </span><font color="#6a9955" face="Consolas, Courier New, monospace" style="font-size:13.3333px;white-space:normal"><span style="font-size:16px;white-space:pre">similarly</span></font><span style="color:rgb(106,153,85)"> </span><span style="color:#6a9955">any function can be disabled from use</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">getName</span>();<span style="color:#6a9955"> // DISABLED by PRIVATE DECLARATION not DEFINITION</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // STOP the DESTRUCTOR from use. </span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // If an object is created in STACK then the result of stack unwinding the </span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // destructor will be called for sure so destructor should be defined in public.</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // But if an object was created in HEAP then it is OK to have privately declared destructor</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // and free allocated memory by user defined function like destroyME</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#dcdcaa">~Dog</span>() { cout&lt;&lt; <span style="color:#ce9178">"Dog destructed which was created in </span><span style="color:rgb(206,145,120)">HEAP</span><span style="color:rgb(206,145,120)"> NOT in </span><span style="color:rgb(206,145,120)">STACK</span><span style="color:rgb(206,145,120)">"</span>; }</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">};</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // Dog d; // there is NO default constructor </span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955"><br /></span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // Object is stored in STACK</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:rgb(106,153,85)">// Dog d(string("hello STACK"));</span><span style="color:rgb(106,153,85)"> // STOP the DEFAULT constructor generation by defining your own constructor.</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:rgb(106,153,85)">                                     // Error: Stack object needs </span><span style="color:rgb(106,153,85)">PUBLIC DESTRUCTOR</span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:rgb(106,153,85)">// Dog d2(d); </span><span style="color:rgb(106,153,85)">         // </span><span style="color:rgb(106,153,85)">Error: </span><span style="color:rgb(106,153,85)">there is NO copy constructor </span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:rgb(106,153,85)">// Dog d3(string(""));</span> <span style="color:rgb(106,153,85)">// Error: Stack object needs </span><span style="color:rgb(106,153,85)">PUBLIC DESTRUCTOR</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:rgb(106,153,85)">// d3 = d;  </span><span style="color:rgb(106,153,85)">           // Error: there is NO copy assignment</span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">destroyME</span>();<span style="color:#6a9955">         // USELESS. It needs PUBLIC DESTRUCTOR to be defined.</span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    Dog *h = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Dog</span>(<span style="color:#dcdcaa">string</span>(<span style="color:#ce9178">"hello HEAP"</span>));<span style="color:#6a9955"> // Object is stored in HEAP</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:#9cdcfe">h</span>-&gt;<span style="color:#dcdcaa">destroyME</span>();<span style="color:#6a9955"> </span><span style="color:rgb(106,153,85)">// Private DESTRUCTOR is OK. - Dog destructed which was created in HEAP NOT in STACK</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div> Summary of Disallowing Functions</div><div>    <span style="color:#b5cea8">1.</span> Private Destructor: All Objects MUST be created in HEAP.</div><div>    <span style="color:#b5cea8">2.</span> C++ <span style="color:#b5cea8">11</span>: <span style="color:#dcdcaa">f</span>() = <span style="color:#c586c0">delete</span>;</div><div>    <span style="color:#b5cea8">3.</span> C++ <span style="color:#b5cea8">03</span>: <span style="color:#dcdcaa">Declare</span> (not define) the function to be private.</div></div></div><div><br /></div><div><b>5. Virtual Destructor and Smart Destructor:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: https://www.youtube.com/watch?v=ZiNGWHg5Z-o&amp;list=PLE28375D4AC946CC3&amp;index=6</span></div><div><span style="color:#6a9955">// Advanced C++: Virtual Destructor and Smart Destructor</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;memory&gt;</span><span style="color:#569cd6"> </span><span style="color:#6a9955">// shared_ptr</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#6a9955">// WITHOUT virtual base class destructor</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> { </div><div><span style="color:#569cd6">public:</span></div><div> ~<span style="color:#dcdcaa">Dog</span>() { cout &lt;&lt; <span style="color:#ce9178">" Dog Destroyed"</span> &lt;&lt; endl; } </div><div><span style="color:#569cd6">  virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { }<span style="color:#6a9955"> // Existance of some virtual function gives a CLUE that base class </span><span style="color:rgb(106,153,85)">most likely</span></div><div><span style="color:#6a9955">                          // used as in POLIMORPHIC way. So better to have VIRTUAL base class DESTRUCTOR.</span></div><div>};</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">YellowDog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {  <span style="color:#569cd6">public:</span> ~<span style="color:#dcdcaa">YellowDog</span>() { cout &lt;&lt; <span style="color:#ce9178">" YellowDog Destroyed"</span> &lt;&lt; endl; } };</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// WITH virtual base class destructor</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Cat</span> { <span style="color:#569cd6">public:</span> <span style="color:#569cd6">virtual</span> ~<span style="color:#dcdcaa">Cat</span>() { cout &lt;&lt; <span style="color:#ce9178">" Cat Destroyed"</span> &lt;&lt; endl; } };</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">RedCat</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Cat</span> { <span style="color:#569cd6">public:</span> ~<span style="color:#dcdcaa">RedCat</span>() { cout &lt;&lt; <span style="color:#ce9178">" RedCat Destroyed"</span> &lt;&lt; endl; } };</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// WITHOUT virtual base class destructor but with 'shared_ptr'(NOTE: 'unique_ptr' only calls </span><span style="color:rgb(106,153,85)">the base destructor</span></div><div><span style="color:#6a9955">// and NOT calls the derived destruction unlike 'shared_prt' which calls both) </span><span style="color:rgb(106,153,85)">is used for creating the object</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Lion</span> { <span style="color:#569cd6">public:</span> ~<span style="color:#dcdcaa">Lion</span>() { cout &lt;&lt; <span style="color:#ce9178">" Lion Destroyed"</span> &lt;&lt; endl; } };</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">BlueLion</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Lion</span> {  <span style="color:#569cd6">public:</span> ~<span style="color:#dcdcaa">BlueLion</span>() { cout &lt;&lt; <span style="color:#ce9178">" BlueLion Destroyed"</span> &lt;&lt; endl; } };</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">AnimalFactory</span> {</div><div>    <span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // If an object is created in polymorphic way (inherited YellowDog class object is created and </span></div><div><span style="color:#6a9955">    // cast into base Dog class type) </span><span style="color:rgb(106,153,85)">then Dog base class SHOULD have VIRTUAL DESTRUCTOR.</span></div><div>    <span style="color:#569cd6">static</span> <span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">createYellowDog</span>() { <span style="color:#c586c0">return</span> (<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">YellowDog</span>()); }</div><div>    <span style="color:#569cd6">static</span> <span style="color:#4ec9b0">Cat</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">createRedCat</span>()    { <span style="color:#c586c0">return</span> (<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">RedCat</span>()); }</div><div>    <span style="color:#569cd6">static</span> <span style="color:#4ec9b0">shared_ptr</span>&lt;<span style="color:#4ec9b0">BlueLion</span>&gt; <span style="color:#dcdcaa">createBlueLion</span>() { <span style="color:#c586c0">return</span> <span style="color:#dcdcaa">shared_ptr</span>&lt;<span style="color:#4ec9b0">BlueLion</span>&gt; (<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">BlueLion</span>()); }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    Dog* pd = <span style="color:#4ec9b0">AnimalFactory</span>::<span style="color:#dcdcaa">createYellowDog</span>();</div><div>    <span style="color:#c586c0">delete</span> pd;<span style="color:#6a9955">  // Only dog's destructor is invoked, not yellowdog's.</span></div><div>    </div><div>    Cat* pc = <span style="color:#4ec9b0">AnimalFactory</span>::<span style="color:#dcdcaa">createRedCat</span>();</div><div>    <span style="color:#c586c0">delete</span> pc;<span style="color:#6a9955"> // Both Cat and RedCat destructors are called</span></div><br /><div>    shared_ptr&lt;Lion&gt; pl = <span style="color:#4ec9b0">AnimalFactory</span>::<span style="color:#dcdcaa">createBlueLion</span>();</div><div>    <span style="color:#c586c0">return</span> <span style="color:#b5cea8">0</span>;</div><div>}<span style="color:#6a9955"> // Both Lion and BlueLion destructors are called</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Output:</div><div>        Dog Destroyed</div><div>        </div><div>        RedCat Destroyed</div><div>        Cat Destroyed</div><br /><div>        BlueLion Destroyed</div><div>        Lion Destroyed</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Note: </div><div>    All classes in STL have no <span style="color:#569cd6">virtual</span> destructor, so be careful inheriting from them. Better use <span style="color:#9cdcfe">shared_ptr</span>.</div><div>    </div><div><span>    </span>When we should use <span style="color:#569cd6">virtual</span> destructor ? Any <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">with</span> <span style="color:#9cdcfe">virtual</span> functions should have a <span style="color:#569cd6">virtual</span> destructor.</div><br /><div>    When not to use <span style="color:#569cd6">virtual</span> destructor:</div><div>    <span>    </span><span style="color:#b5cea8">1.</span> Size of the <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">needs</span> <span style="color:#9cdcfe">to</span> be small;</div><div>    <span>    </span><span style="color:#b5cea8">2.</span> Size of the <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">needs</span> <span style="color:#9cdcfe">to</span> be precise, <span style="color:#9cdcfe">e</span>.<span style="color:#9cdcfe">g</span>. <span style="color:#9cdcfe">passing</span> an object from C++ to C.</div></div></div><div><br /></div><div><b>6. Exception in Destructor:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><div style="line-height:22px"><div><span style="color:#6a9955">// Ref: Advanced C++: Exceptions in Destructors</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=LQMYwvM8RF8&amp;list=PLE28375D4AC946CC3&amp;index=7</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;string&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div>    string m_name;</div><div>    <span style="color:#dcdcaa">dog</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { m_name = name; cout &lt;&lt; name &lt;&lt; <span style="color:#ce9178">" is born."</span> &lt;&lt; endl; }</div><div>    <span style="color:#dcdcaa">~dog</span>()           { cout &lt;&lt; m_name &lt;&lt; <span style="color:#ce9178">" is destroyed."</span> &lt;&lt; endl; }</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>()      { cout &lt;&lt; m_name &lt;&lt; <span style="color:#ce9178">" barks."</span> &lt;&lt; endl;}</div><div>};</div></div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    <span style="color:#c586c0">try</span> {</div><div>        dog <span style="color:#dcdcaa">dog1</span>(<span style="color:#ce9178">"Henry"</span>);</div><div>        dog <span style="color:#dcdcaa">dog2</span>(<span style="color:#ce9178">"Bob"</span>);</div><div>        <span style="color:#c586c0">throw</span> <span style="color:#b5cea8">20</span>; <span style="color:rgb(106,153,85)">// Throwing exception in dog's CLIENT (main) - NOT a problem</span></div><div>        <span style="color:#9cdcfe">dog1</span>.<span style="color:#dcdcaa">bark</span>(); </div><div>        <span style="color:#9cdcfe">dog2</span>.<span style="color:#dcdcaa">bark</span>();</div><div>    } <span style="color:#c586c0">catch</span> (<span style="color:#569cd6">int</span> e) {</div><div>        cout &lt;&lt; e &lt;&lt; <span style="color:#ce9178">" is caught"</span> &lt;&lt; endl;</div><div>    }</div><div>    <span style="color:#c586c0">return</span> <span style="color:#b5cea8">0</span>;</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// OUTPUT:</span></div><div>    Henry is born.</div><div>    Bob is born.</div><div>    Bob is destroyed.<span style="color:#6a9955"> // objects are created in STACK. Bcos of stack Unwind. Last created obj destroyed </span><span style="color:rgb(106,153,85)">first.</span></div><div>    Henry is destroyed.</div><div>    <span style="color:#b5cea8">20</span> is caught</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955"> // Throwing exception inside destructor -  PROBLEM</span></div><div> <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div>    string m_name;</div><div>    <span style="color:#dcdcaa">dog</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { m_name = name; cout &lt;&lt; name &lt;&lt; <span style="color:#ce9178">" is born."</span> &lt;&lt; endl; }</div><div>    <span style="color:#dcdcaa">~dog</span>() { cout&lt;&lt; m_name &lt;&lt; <span style="color:#ce9178">" is destroyed."</span> &lt;&lt; endl; </div><div>        <span style="color:#c586c0">throw</span> <span style="color:#b5cea8">20</span>;<span style="color:#6a9955"> // RUN TIME ERROR - Shouldn't throw any EXCEPTION inside DESTRUCTOR</span></div><div><span style="color:#6a9955">                  // C++11 destructors default to noexcept</span></div><div><span style="color:#6a9955">                  // https://www.modernescpp.com/index.php/c-core-guidelines-the-noexcept-specifier-and-operator</span></div><div>    }</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout&lt;&lt; m_name &lt;&lt; <span style="color:#ce9178">" barks."</span> &lt;&lt; endl;}</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 1: S</span><span style="color:rgb(106,153,85)">wallow the exception inside the </span><span style="color:rgb(106,153,85)">Destructor . Disadvantage of this approach is the dog's </span></div><div><span style="color:rgb(106,153,85)">// client (main) </span><span style="color:rgb(106,153,85)">will not know anything about the happened exception.</span></div><div>~<span style="color:#dcdcaa">dog</span>() { </div><div>    <span style="color:#c586c0">try</span> {</div><div><span style="color:#6a9955">        // Enclose all the exception prone code here</span></div><div>    } <span style="color:#c586c0">catch</span> (MYEXCEPTION e) {</div><div><span style="color:#6a9955">        // Catch exception</span></div><div>    } <span style="color:#c586c0">catch</span> (...) {</div><div>    }</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 2: Move the exception-prone code to a different function. Here the dog's client (main) will get</span></div><div><span style="color:#6a9955">// exception and have catch method to handle that.</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div>    string m_name;</div><div>    <span style="color:#dcdcaa">dog</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { m_name = name; cout &lt;&lt; name &lt;&lt; <span style="color:#ce9178">" is born."</span> &lt;&lt; endl; }</div><div>    <span style="color:#dcdcaa">~dog</span>() { cout&lt;&lt; m_name &lt;&lt; <span style="color:#ce9178">" is destroyed."</span> &lt;&lt; endl; }</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">prepareForException</span>() {  <span style="color:#c586c0">throw</span> <span style="color:#b5cea8">20</span>; }<span style="color:#6a9955"> // exception-prone code   </span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout&lt;&lt; m_name &lt;&lt; <span style="color:#ce9178">" barks."</span> &lt;&lt; endl;}</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    <span style="color:#c586c0">try</span> {</div><div>        dog <span style="color:#dcdcaa">dog1</span>(<span style="color:#ce9178">"Henry"</span>);</div><div>        dog <span style="color:#dcdcaa">dog2</span>(<span style="color:#ce9178">"Bob"</span>);</div><div>        <span style="color:#9cdcfe">dog1</span>.<span style="color:#dcdcaa">bark</span>(); </div><div>        <span style="color:#9cdcfe">dog2</span>.<span style="color:#dcdcaa">bark</span>();</div><div>        <span style="color:#9cdcfe">dog1</span>.<span style="color:#dcdcaa">prepareForException</span>();<span style="color:#6a9955"> // Extra call to handle exception in client side</span></div><div>        <span style="color:#9cdcfe">dog2</span>.<span style="color:#dcdcaa">prepareForException</span>();</div><div>    } <span style="color:#c586c0">catch</span> (<span style="color:#569cd6">int</span> e) {</div><div>        cout &lt;&lt; e &lt;&lt; <span style="color:#ce9178">" is caught"</span> &lt;&lt; endl;</div><div>    }</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    Which one to use ?</div><div>    It depends on who is the better person to handle the exception, inside dog or dog<span style="color:#ce9178">'s client.</span></div></div></div><div><br /></div><div><br /></div><div><b>6. Virtual Functions inside Constructor or Destructors:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++ 5: Virtual Function in Constructor or Destructor</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=mTE5jaXaOuE&amp;list=PLE28375D4AC946CC3&amp;index=8</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;string&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#6a9955">// Never call virtual functions inside constructor or destructor.</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>    <span style="color:#569cd6">public:</span></div><div>        <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout&lt;&lt; <span style="color:rgb(206,145,120)">"Dog is barking "</span> &lt;&lt; endl;}</div><div>        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>() { cout&lt;&lt; <span style="color:rgb(206,145,120)">"Dog is running"</span> &lt;&lt; endl;}</div><div><br /></div><div>        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">seeCat</span>() {</div><div>            <span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // Yellow dog is barking - follows DYNAMIC BINDING</span></div><div>            <span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // Dog is running</span></div><div>        }</div><br /><div>        <span style="color:#dcdcaa">dog</span>() { </div><div>            cout&lt;&lt; <span style="color:#ce9178">"Dog born"</span> &lt;&lt; endl; </div><div>            <span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // Dog is barking - DON'T follows DYNAMIC BINDING</span></div><div>            <span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // Dog is running</span></div><div>        }</div><div>        <span style="color:#dcdcaa">~dog</span>() { </div><div>            cout&lt;&lt; <span style="color:#ce9178">"Dog destroyed"</span> &lt;&lt; endl; </div><div>            <span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // Dog is barking </span><span style="color:rgb(106,153,85)">- DON'T follows DYNAMIC BINDING</span></div><div>            <span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // Dog is running</span></div><div>        }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">dog</span> {</div><div>    <span style="color:#569cd6">public:</span></div><div>        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout &lt;&lt; <span style="color:rgb(206,145,120)">"Yellow dog is barking "</span> &lt;&lt; endl; }</div><div>        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>()  { cout &lt;&lt; <span style="color:rgb(206,145,120)">"Yellow dog is running"</span> &lt;&lt; endl;}</div><br /><div>        <span style="color:#dcdcaa">yellowdog</span>() { </div><div>            cout&lt;&lt; <span style="color:#ce9178">"Yellow dog born"</span> &lt;&lt; endl; </div><div>            <span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // Yellow dog is barking</span></div><div>            <span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // Yellow dog is running</span></div><div>        }</div><div>        <span style="color:#dcdcaa">~yellowdog</span>() { </div><div>            cout&lt;&lt; <span style="color:#ce9178">"Yellow dog destroyed"</span> &lt;&lt; endl;</div><div>            <span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // Yellow dog is barking</span></div><div>            <span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // Yellow dog is running</span></div><div>        } </div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span> ()</div><div>{</div><div>  yellowdog y;</div><div>  <span style="color:#9cdcfe">y</span>.<span style="color:#dcdcaa">seeCat</span>(); </div><div>  <span style="color:#c586c0">return</span> <span style="color:#b5cea8">0</span>;</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Output: </div><div>    Dog born</div><div>    Dog is barking   <span style="color:rgb(106,153,85)">// expected =&gt; Yellow dog is barking</span></div><div>    Dog is running</div><div><br /></div><div>    Yellow dog born</div><div>    Yellow dog is barking</div><div>    Yellow dog is running</div><div><br /></div><div>    Yellow dog is barking</div><div>    Dog is running</div><div><br /></div><div>    Yellow dog destroyed</div><div>    Yellow dog is barking</div><div>    Yellow dog is running</div><div><br /></div><div>    Dog destroyed</div><div>    Dog is barking <span style="color:rgb(106,153,85)">// expected =&gt; Yellow dog is barking</span></div><div>    Dog is running</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    During the object construction/destruction, all <span style="color:#569cd6">virtual</span> function works like non-<span style="color:#569cd6">virtual</span> function.</div><br /><div> Why?</div><div>    Base class<span style="color:#ce9178">'s constructor runs before the derived class'</span>s <span style="color:#9cdcfe">constructor</span>. <span style="color:#9cdcfe">So</span> at the time of <span style="color:rgb(220,220,170)">bark</span>(), </div><div>    the yellowdog is not constructed yet.</div></div></div><div><br /></div><div><b>7. Handling self-assignment in operator=</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    dog dd;</div><div>    dd = dd;<span style="color:#6a9955">            // Looks silly assignement so we should avoid them</span></div><div>    <span style="color:#9cdcfe">dogs</span>[i] = <span style="color:#9cdcfe">dogs</span>[j];<span style="color:#6a9955">  // OK but it is same as above if i = j</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Handling the self-assignment in operator=</span></div><div><span style="color:#6a9955">// Ref: Advanced C++: Assignment to Self in Assignment Operator</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=4qhz7E59QBs&amp;list=PLE28375D4AC946CC3&amp;index=9</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#6a9955">/* Implementing Assignment Operator */</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">collar</span> { };<span style="color:#6a9955"> // some class</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>   collar* pCollar;</div><div>   <span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>)<span style="color:#6a9955"> // copy everything from rhs dog to itself</span></div><div>   {</div><div><span style="color:#6a9955">       // first delete my own pCollar pointing memory</span></div><div>       <span style="color:#c586c0">delete</span> pCollar;<span style="color:#6a9955"> // PROBLEM 1: if 'rhs' and 'this' are same. We cann't copy from rhs if it is deleted.</span></div><div>       pCollar = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">collar</span>(*<span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">pCollar</span>);<span style="color:#6a9955"> // create a new collar from rhs</span></div><div>       <span style="color:#c586c0">return</span> *<span style="color:#569cd6">this</span>; </div><div>   }</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 1:</span></div><div><span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>)<span style="color:#6a9955"> // copy everything from rhs dog to itself</span></div><div>{</div><div>     <span style="color:#c586c0">if</span> (<span style="color:#569cd6">this</span> == &amp;rhs)  <span style="color:#c586c0">return</span> *<span style="color:#569cd6">this</span>;<span style="color:#6a9955"> // Check self referencing</span></div><div>    </div><div>    <span style="color:#c586c0">delete</span> pCollar;<span style="color:#6a9955"> // delete my own pCollar pointing memory</span></div><div>    pCollar = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">collar</span>(*<span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">pCollar</span>);<span style="color:#6a9955"> // PROBLEM 2: If there is an exception in new copy then pCollar </span></div><div><span style="color:#6a9955">                                        // lost its old value</span></div><div>    <span style="color:#c586c0">return</span> *<span style="color:#569cd6">this</span>; </div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 2:</span></div><div><span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>) {</div><div>      <span style="color:#c586c0">if</span> (<span style="color:#569cd6">this</span> == &amp;rhs)  <span style="color:#c586c0">return</span> *<span style="color:#569cd6">this</span>;</div><br /><div>      collar* pOrigCollar = pCollar;<span style="color:#6a9955">      // Don't delete the old value until a new copy is successful</span></div><div>      pCollar = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">collar</span>(*<span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">pCollar</span>);<span style="color:#6a9955"> // Even exception we haven't lost the old memory</span></div><div>      <span style="color:#c586c0">delete</span> pOrigCollar;</div><div>      <span style="color:#c586c0">return</span> *<span style="color:#569cd6">this</span>;</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 3: Delegation</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>   collar* pCollar;</div><div>   <span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">dog</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>) {</div><div>      *pCollar = *<span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">pCollar</span>;<span style="color:#6a9955">   // member by member copying of collars or call collar's operator=</span></div><div>      <span style="color:#c586c0">return</span> *<span style="color:#569cd6">this</span>;</div><div>   }</div><div>}</div></div></div><div><br /></div><div><b>8. Resource Acquisition is Initialization (RAII):</b></div><div><span style="font-size:13.3333px">Example 1:</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++.Resource Acquisition is Initialization.</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=ojOUIg13g3I&amp;list=PLE28375D4AC946CC3&amp;index=10</span></div><br /><div><span style="color:#6a9955">// Resource Acquisition is Initialization (RAII): </span></div><div><span style="color:#6a9955">// Technique used to manage resources: memory, hardware device, network handle, etc.</span></div><br /><div><span style="color:#4ec9b0">Mutex_t</span>   mu = MUTEX_INITIALIZER;</div><div> </div><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">functionA</span>() </div><div>{</div><div>   <span style="color:#dcdcaa">Mutex_lock</span>( &amp;mu );</div><div><span style="color:#6a9955">   // If there is an exception then locked for ever !</span></div><div>   <span style="color:#dcdcaa">Mutex_unlock</span>( &amp;mu );<span style="color:#6a9955"> // This line will not be executed</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution:</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Lock</span> {</div><div>   privat:</div><div>      <span style="color:#4ec9b0">Mutext_t</span>* m_pm;</div><div>   <span style="color:#569cd6">public:</span></div><div>      <span style="color:#569cd6">explicit</span> <span style="color:#dcdcaa">Lock</span>(<span style="color:#4ec9b0">Mutex_t</span> <span style="color:#569cd6">*</span><span style="color:#9cdcfe">pm</span>) { <span style="color:#dcdcaa">Mutex_lock</span>(pm); m_pm = pm;};</div><div>      <span style="color:#dcdcaa">~Lock</span>() { <span style="color:#dcdcaa">Mutex_unlock</span>(m_pm); };</div><div>}</div><br /><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">functionA</span>() {</div><div>   Lock <span style="color:#dcdcaa">mylock</span>(&amp;mu);</div><div><span style="color:#6a9955">   // Do a bunch of things</span></div><div>}<span style="color:#6a9955">  // The mutex will always be released when mylock is destroyed from stack</span></div></div></div><div><br /></div><div><span style="font-size:13.3333px">Example 2:</span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>What happens when a resource management object is copied?</div><div>   Lock <span style="color:#dcdcaa">mylock1</span>(&amp;mu);</div><div>   Lock <span style="color:#dcdcaa">mylock2</span>(mylock1);</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Solution <span style="color:#b5cea8">1</span>: Do not support copying. </div><div>            Prohibit copying by <span style="color:#dcdcaa">declaring</span>(not defining) private copy constructor and copy assignment operator.</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Solution <span style="color:#b5cea8">2</span>: If you really want the resource management object copy then support by <span style="color:rgb(197,134,192)">shared_ptr</span>.</div><div>            <span style="color:rgb(78,201,176)">Reference-count</span> the underlying resource by using <span style="color:rgb(197,134,192)">shared_ptr</span>.</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Shared pointer template example</span></div><div><span style="color:#569cd6">template</span>&lt;<span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Other</span>, <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D</span>&gt; <span style="color:#dcdcaa">shared_ptr</span>(Other* ptr, D deleter);</div><br /><div><span style="color:#6a9955">// The default value for D is "delete", e.g.:</span></div><div><span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">shared_ptr</span>&lt;<span style="color:#4ec9b0">dog</span>&gt; <span style="color:#dcdcaa">pd</span>(<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>());</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Lock</span> {</div><div>   <span style="color:#569cd6">private:</span></div><div>      <span style="color:#4ec9b0">std</span>:::shared_ptr&lt;<span style="color:#4ec9b0">Mutex_t</span>&gt; pMutex;</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">explicit</span> <span style="color:#dcdcaa">Lock</span>(<span style="color:#4ec9b0">Mutex_t</span> <span style="color:#569cd6">*</span><span style="color:#9cdcfe">pm</span>):<span style="color:#dcdcaa">pMutex</span>(pm, Mutex_unlock)<span style="color:#6a9955">//2nd param of shared_ptr constructor is "deleter"</span><span style="color:rgb(106,153,85)"> function. </span></div><div>   { </div><div>      <span style="color:#dcdcaa">Mutex_lock</span>(pm);</div><div>   }</div><div> };</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>   <span style="color:#4ec9b0">Lock</span> <span style="color:#dcdcaa">mylock1</span>(&amp;<span style="color:#9cdcfe">mu</span>);<span style="color:#6a9955">       // ref count  = 1</span></div><div>   <span style="color:#4ec9b0">Lock</span> <span style="color:#dcdcaa">mylock2</span>(<span style="color:#4ec9b0">mylock1</span>);<span style="color:#6a9955">   // ref count  = 2</span></div></div></div><div><br /></div><div>Example 3:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><div style="line-height:22px"><span style="color:#6a9955">// Some classes</span></div></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span>;</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Trick</span>;</div><br /><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">train</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">shared_ptr</span>&lt;<span style="color:#4ec9b0">dog</span>&gt; <span style="color:#9cdcfe">pd</span>, <span style="color:#4ec9b0">Trick</span> <span style="color:#9cdcfe">dogtrick</span>);</div><div><span style="color:#4ec9b0">Trick</span>  <span style="color:#dcdcaa">getTrick</span>();</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#dcdcaa">train</span>(shared_ptr&lt;dog&gt; <span style="color:#dcdcaa">pd</span>(<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>()), <span style="color:#dcdcaa">getTrick</span>());<span style="color:#6a9955"> /</span><span style="color:rgb(106,153,85)">/ Problem - order of param processing is undefined and </span></div><div><span style="color:rgb(106,153,85)">                                                     // compiler dependent</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Suppose a compiler process the argument in the below order</div><div><span style="color:#b5cea8">1.</span> <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>();</div><div><span style="color:#b5cea8">2.</span> <span style="color:#dcdcaa">getTrick</span>();<span style="color:#6a9955"> // If there is an exception then memory of 'new dog()' will leaks !!!</span></div><div><span style="color:#b5cea8">3.</span> construct <span style="color:#4ec9b0">std</span>::shared_ptr&lt;dog&gt;.</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution</span></div><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">std</span>::shared_ptr&lt;dog&gt; <span style="color:#dcdcaa">pd</span>(<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>());</div><div>   <span style="color:#dcdcaa">train</span>(pd, <span style="color:#dcdcaa">getTrick</span>());</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">Conclusion: Don<span style="color:#ce9178">'t combine storing objects in a shared pointer with other statements.</span></div></div><div><br /></div><div><span style="background-color:transparent;font-size:10pt"><b>9. Initialization Fiasco:</b></span></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Static Initialization Fiasco</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=hE77OSTE2J0&amp;list=PLE28375D4AC946CC3&amp;index=11</span></div><br /><div><span style="color:#6a9955">////////////////////////////////  main.cpp  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Dog.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Cat.h"</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#4ec9b0">Dog</span> <span style="color:#dcdcaa">d</span>(<span style="color:#ce9178">"Gunner"</span>);<span style="color:#6a9955"> // global object creation REQUEST for the Dog CONSTRUCTOR</span></div><div><span style="color:#6a9955">// Inside Dog.cpp we have another global object creation request [ Cat c("Smokey"); ] which calls the Cat</span></div><div><span style="color:#6a9955">// constructor BEFORE the Dog constructor. So Cat object is constructed before Dog object.<br /></span></div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>()</div><div>{</div><div>    <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">bark</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Dog.h  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;string&gt;</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div>    <span style="color:#4ec9b0">std</span>::string _name;</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>();</div><div>    <span style="color:#dcdcaa">Dog</span>(<span style="color:#569cd6">char*</span> <span style="color:#9cdcfe">name</span>);</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Dog.cpp  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Dog.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Cat.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><br /><div><span style="color:#4ec9b0">Cat</span> <span style="color:#dcdcaa">c</span>(<span style="color:#ce9178">"Smokey"</span>);<span style="color:#6a9955"> // global object creation.</span></div><br /><div><span style="color:#569cd6">void</span> <span style="color:#4ec9b0">Dog</span>::<span style="color:#dcdcaa">bark</span>() { <span style="color:rgb(78,201,176)">std</span>::cout &lt;&lt; <span style="color:rgb(206,145,120)">"Barking Dog is "</span> &lt;&lt; _name &lt;&lt; <span style="color:rgb(78,201,176)">std</span>::endl; }</div><div><br /></div><span style="color:rgb(106,153,85)">// global cat object is created first and then Dog object is created by the below constructor.</span><br /><div><span style="color:#4ec9b0">Dog</span>::<span style="color:#dcdcaa">Dog</span>(<span style="color:#569cd6">char*</span> <span style="color:#9cdcfe">name</span>) { </div><div>    _name = name;</div><div>    <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"Construction Dog "</span> &lt;&lt; _name &lt;&lt; <span style="color:#4ec9b0">std</span>::endl;</div><br /><div>    <span style="color:#9cdcfe">c</span>.<span style="color:#dcdcaa">meow</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Cat.h  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;string&gt;</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Cat</span> {</div><div>    <span style="color:#4ec9b0">std</span>::string _name;</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">meow</span>();</div><div>    <span style="color:#dcdcaa">Cat</span>(<span style="color:#569cd6">char*</span> <span style="color:#9cdcfe">name</span>);</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Cat.cpp  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Cat.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Dog.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><br /><div><span style="color:#569cd6">extern</span> Dog d;<span style="color:#6a9955"> // extern is NEEDED bcos 'd' is defined in another source file</span></div><br /><div><span style="color:#569cd6">void</span> <span style="color:#4ec9b0">Cat</span>::<span style="color:#dcdcaa">meow</span>() { <span style="color:rgb(78,201,176)">std</span>::cout &lt;&lt; <span style="color:rgb(206,145,120)">"Meowing Cat is "</span> &lt;&lt; _name &lt;&lt; <span style="color:rgb(78,201,176)">std</span>::endl; }</div><br /><div><span style="color:#4ec9b0">Cat</span>::<span style="color:#dcdcaa">Cat</span>(<span style="color:#569cd6">char*</span> <span style="color:#9cdcfe">name</span>) {</div><div>    _name = name;</div><div>    <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"Construction Cat "</span> &lt;&lt; _name &lt;&lt; <span style="color:#4ec9b0">std</span>::endl;</div><br /><div>    <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">bark</span>(); <span style="color:rgb(106,153,85)">// CRASHES bcos the global dog object is not fully created yet even though it is </span></div><div><span style="color:rgb(106,153,85)">              // called first in the main.</span></div><div>}</div></div></div><div><br /></div><div>The <b>solution </b>to Initialization Fiasco by the <b>Singleton Pattern (</b><b>Avoids </b>global object creation) + <b>Lazy Initialization.</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Singleton.h  ////////////////////////</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span>;</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Cat</span>;</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Singleton</span> {</div><div>    <span style="color:#569cd6">static</span> Dog* pd;</div><div>    <span style="color:#569cd6">static</span> Cat* pc;</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#dcdcaa">~Singleton</span>();</div><div>    <span style="color:#569cd6">static</span> <span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">getDog</span>();</div><div>    <span style="color:#569cd6">static</span> <span style="color:#4ec9b0">Cat</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">getCat</span>();</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Singleton.cpp  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Singleton.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Dog.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Cat.h"</span></div><br /><div>Dog* <span style="color:#4ec9b0">Singleton</span>::pd = <span style="color:#b5cea8">0</span>;</div><div>Cat* <span style="color:#4ec9b0">Singleton</span>::pc = <span style="color:#b5cea8">0</span>;</div><br /><div><span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">*</span> <span style="color:#4ec9b0">Singleton</span>::<span style="color:#dcdcaa">getDog</span>() {</div><div>    <span style="color:#c586c0">if</span>(!pd) pd = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Dog</span>(<span style="color:#ce9178">"Gunner"</span>);<span style="color:#6a9955"> // Initialize Upon First Usage Idion</span></div><div>    <span style="color:#c586c0">return</span> pd;</div><div>}</div><br /><div><span style="color:#4ec9b0">Cat</span><span style="color:#569cd6">*</span> <span style="color:#4ec9b0">Singleton</span>::<span style="color:#dcdcaa">getCat</span>() {</div><div>    <span style="color:#c586c0">if</span>(!pc) pc = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Cat</span>(<span style="color:#ce9178">"Smokey"</span>);</div><div>    <span style="color:#c586c0">return</span> pc;</div><div>}</div><br /><div><span style="color:#4ec9b0">Singleton</span>::<span style="color:#dcdcaa">~Singleton</span>() {</div><div>    <span style="color:#c586c0">if</span>(pd) <span style="color:#c586c0">delete</span> pd;</div><div>    <span style="color:#c586c0">if</span>(pc) <span style="color:#c586c0">delete</span> pc;</div><div>    pd = <span style="color:#b5cea8">0</span>; pc = <span style="color:#b5cea8">0</span>;</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  main.cpp  ////////////////////////</span></div><div><span style="color:#6a9955">// Dog d("Gunner"); // NO more global object creation</span></div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>()</div><div>{</div><div><span style="color:#6a9955">    // Singleton::getDog()-&gt;bark();</span></div><div>    Singleton s;</div><div>    <span style="color:#4ec9b0">Singleton</span>::<span style="color:#dcdcaa">getCat</span>()-&gt;<span style="color:#dcdcaa">meow</span>();</div><div>    <span style="color:#c586c0">return</span> <span style="color:#b5cea8">0</span>;</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Dog.cpp  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Dog.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Cat.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Singleton.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><br /><div><span style="color:#6a9955">// Cat c("Smokey"); // NO more global object creation</span></div><br /><div><span style="color:#569cd6">void</span> <span style="color:#4ec9b0">Dog</span>::<span style="color:#dcdcaa">bark</span>() { <span style="color:rgb(78,201,176)">std</span>::cout &lt;&lt; <span style="color:rgb(206,145,120)">"Barking Dog is "</span> &lt;&lt; _name &lt;&lt; <span style="color:rgb(78,201,176)">std</span>::endl; }</div><br /><div><span style="color:#4ec9b0">Dog</span>::<span style="color:#dcdcaa">Dog</span>(<span style="color:#569cd6">char*</span> <span style="color:#9cdcfe">name</span>) {</div><div>    _name = name;</div><div>    <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"Construction Dog "</span> &lt;&lt; _name &lt;&lt; <span style="color:#4ec9b0">std</span>::endl;</div><br /><div><span style="color:#6a9955">    // c.meow(); // CRASH if global cat object creation haven't done yet.</span></div><div>    <span style="color:#4ec9b0">Singleton</span>::<span style="color:#dcdcaa">getCat</span>()-&gt;<span style="color:#dcdcaa">meow</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">////////////////////////////////  Cat.cpp  ////////////////////////</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Dog.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Cat.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">"Singleton.h"</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><br /><div><span style="color:#6a9955">// extern Dog d; // NO more global object access</span></div><br /><div><span style="color:#569cd6">void</span> <span style="color:#4ec9b0">Cat</span>::<span style="color:#dcdcaa">meow</span>() { <span style="color:rgb(78,201,176)">std</span>::cout &lt;&lt; <span style="color:rgb(206,145,120)">"Meowing Cat is "</span> &lt;&lt; _name &lt;&lt; <span style="color:rgb(78,201,176)">std</span>::endl; }</div><br /><div><span style="color:#4ec9b0">Cat</span>::<span style="color:#dcdcaa">Cat</span>(<span style="color:#569cd6">char*</span> <span style="color:#9cdcfe">name</span>) {</div><div>    _name = name;</div><div>    <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"Construction Cat "</span> &lt;&lt; _name &lt;&lt; <span style="color:#4ec9b0">std</span>::endl;</div><br /><div><span style="color:#6a9955">    // d.bark();</span></div><div>    <span style="color:#4ec9b0">Singleton</span>::<span style="color:#dcdcaa">getDog</span>()-&gt;<span style="color:#dcdcaa">bark</span>();</div><div>}</div></div></div><div><br /></div><div><b>10. Managing Resource:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Resource Managing Class</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=juQBXTNz4mo&amp;list=PLE28375D4AC946CC3&amp;index=13</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;vector&gt;</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;string&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Person</span> {</div><div><span style="color:#569cd6">private:</span></div><div>    string* pName_;<span style="color:#6a9955"> // Person owns the string through its pointer BUT don't have COPY Constructor and</span></div><div><span style="color:#6a9955">                    // ASSIGNMENT operator</span></div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">printName</span>()    { cout &lt;&lt; *pName_; }</div><div>    <span style="color:#dcdcaa">~Person</span>()           { <span style="color:#c586c0">delete</span> pName_; }</div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { pName_ = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">string</span>(name); }</div><div>};</div></div></div><div><br /></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    vector&lt;Person&gt; persons;</div><div>    <span style="color:#9cdcfe">persons</span>.<span style="color:#dcdcaa">push_back</span>(<span style="color:#dcdcaa">Person</span>(<span style="color:#ce9178">"George"</span>));</div><div><span style="color:#6a9955">    // 1. "George" is constructed</span></div><div><span style="color:#6a9955">    // 2. A copy of pointer(</span><span style="color:rgb(106,153,85)">not real resource)</span><span style="color:rgb(106,153,85)"> pointing to "George" is saved in the vector (default SHALLOW copy) </span></div><div><span style="color:rgb(106,153,85)">    // 3. "George" is destroyed before going to next line of statement.</span></div><br /><div>    <span style="color:#9cdcfe">persons</span>.<span style="color:#dcdcaa">front</span>().<span style="color:#dcdcaa">printName</span>();<span style="color:#6a9955"> // CRASH - Copied pointer points to already deleted memory</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 1: Define your own copy constructor and copy assignment operator for DEEP copying</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Person</span> {</div><div><span style="color:#569cd6">private:</span></div><div>    string* pName_;</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">printName</span>()    { cout &lt;&lt; *pName_; }</div><div>    <span style="color:#dcdcaa">~Person</span>()           { <span style="color:#c586c0">delete</span> pName_; }</div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { pName_ = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">string</span>(name); }</div><br /><div>    <span style="color:#4ec9b0">string</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">pName</span>() <span style="color:#569cd6">const</span> { <span style="color:#c586c0">return</span> pName_; }</div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>) {<span style="color:#6a9955">   // deep copying by COPY constructor</span></div><div>        pName_ = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">string</span>(*(<span style="color:#9cdcfe">rhs</span>.<span style="color:#dcdcaa">pName</span>()));</div><div>    }</div><div>    <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>);<span style="color:#6a9955">  // deep copying by copy ASSIGNMENT operator</span></div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 2: delete the default copy constructor &amp; copy assignment operator AND manage the object </span></div><div><span style="color:#6a9955">//             in CLIENT level.</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Person</span> {</div><div><span style="color:#569cd6">private:</span></div><div><span style="color:#6a9955">    // delete the default copy constructor and copy assignment operator by PRIVATE DECLARATION </span></div><div>    <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>);<span style="color:#6a9955">  // deep copying</span></div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>);</div><div><span style="color:#569cd6">public:</span></div><div>    string* pName_; </div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">printName</span>() { cout &lt;&lt; *pName_; }</div><div>    <span style="color:#dcdcaa">~Person</span>() { <span style="color:#c586c0">delete</span> pName_; }</div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { pName_ = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">string</span>(name); }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div><span style="color:#6a9955">   // STL container requires containee should copiable [should have COPY constructor and copy ASSIGNMENT operator] </span></div><div>   vector&lt;Person*&gt; persons;<span style="color:#6a9955"> // workaround: Store the object POINTER instead of object itself</span></div><div>   <span style="color:#9cdcfe">persons</span>.<span style="color:#dcdcaa">push_back</span>(<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Person</span>(<span style="color:#ce9178">"George"</span>));<span style="color:#6a9955"> // NOTE: creating an new object</span></div><div>   <span style="color:#9cdcfe">persons</span>.<span style="color:#dcdcaa">front</span>()-&gt;<span style="color:#dcdcaa">printName</span>(); </div><div><span style="color:#6a9955">   // Manually delete the created objects after use</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 3: delete the copy constructor &amp; copy assignment operator AND define CLONE</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Person</span> {</div><div><span style="color:#569cd6">private:</span></div><div><span style="color:#6a9955">    // delete the default copy constructor and copy assignment operator by PRIVATE DECLARATION </span></div><div>    <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator=</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>);<span style="color:#6a9955">  // deep copying</span></div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>);</div><div><span style="color:#569cd6">public:</span></div><div>    string* pName_;</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">printName</span>()    { cout &lt;&lt; *pName_; }</div><div>    <span style="color:#dcdcaa">~Person</span>()           { <span style="color:#c586c0">delete</span> pName_; }</div><div>    <span style="color:#dcdcaa">Person</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { pName_ = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">string</span>(name); }<span style="color:rgb(106,153,85)">    </span></div><div>    <span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">Clone</span>()     { <span style="color:#c586c0">return</span> <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Person</span>(*pName_); } <span style="color:rgb(106,153,85)">// Identical COPY of object itself</span></div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div><span style="color:#6a9955">    // STL container requires containee should copiable [should have COPY constructor and copy ASSIGNMENT operator] </span></div><div>    vector&lt;Person*&gt; persons;</div><div>    <span style="color:#9cdcfe">persons</span>.<span style="color:#dcdcaa">push_back</span>(<span style="color:#dcdcaa">Person</span>(<span style="color:#ce9178">"George"</span>).<span style="color:#dcdcaa">Clone</span>());</div><div>    <span style="color:#9cdcfe">persons</span>.<span style="color:#dcdcaa">front</span>()-&gt;<span style="color:#dcdcaa">printName</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>Which solution to use ? Prefer clonable solution-<span style="color:#b5cea8">3.</span> Bcos Copy constructor and copy Assignment operator do the deep</div><div>copy operation <span style="color:rgb(220,220,170)">IMPLICITLY</span> (error prone) BUT using clone we can do the deep copy operation explicitly.</div></div></div><div><br /></div><div><b>11. Virtual Constructor by Clone() function:</b></div><div><div style="background-color:rgb(30,30,30);line-height:22px"><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// Ref: Advanced C++: Virtual Constructor - Clone() Function</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// https://www.youtube.com/watch?v=UHP-DKrxgBs&amp;list=PLE28375D4AC946CC3&amp;index=14</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">public:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // copy constructed by itself</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:#569cd6">virtual</span> <span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">clone</span>() { <span style="color:#c586c0">return</span> (<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Dog</span>(*<span style="color:#569cd6">this</span>));  }</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">};</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">private:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // copy constructed by itself</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:#569cd6">virtual</span> <span style="color:#4ec9b0">Yellowdog</span><span style="color:#569cd6">*</span> <span style="color:#dcdcaa">clone</span>() { <span style="color:#c586c0">return</span> (<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Yellowdog</span>(*<span style="color:#569cd6">this</span>));    </div><div><font color="#6a9955" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">    // CO-VARIANT RETURN TYPE - i.e., return Yellowdog instead of Dog eventhough it is a overridden function - clone.</span></font></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    }</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">};</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">foo</span>(<span style="color:#4ec9b0">Dog</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">yell</span>) {<span style="color:#6a9955">        // yell is a Yellowdog</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // calls default copy constructor</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    Dog* x = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Dog</span>(*yell);<span style="color:#6a9955"> // But x is a Dog (NOT a Yellowdog). NOT identical copy even after default copy constructor</span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // Clone functions act like a VIRTUAL CONSTRUCTOR. Exact object type(Yellowdog) is created regardless of </span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // cast type (Dog).</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    Dog* y = <span style="color:#9cdcfe">yell</span>-&gt;<span style="color:#dcdcaa">clone</span>();<span style="color:#6a9955">  // y is a Yellowdog by clone</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">}</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    Yellowdog yell;</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:#dcdcaa">foo</span>(&amp;yell);</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">    <span style="color:#c586c0">return</span> <span style="color:#b5cea8">0</span>;</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">}</div></div></div><div><br /></div><div><b>12. Type Conversions:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    Categories of Type Conversion:   </span><span style="color:rgb(106,153,85)">                            Implicit      Explicit(casting)</span></div><div><span style="color:#6a9955">    Standard Type Conversion (between build-in types)                 A            B</span></div><div><span style="color:#6a9955">    User-Defined Type Conversion (between user-defined and build in)  C            D</span></div></div></div><div><br /></div><div><b>Category A: Implicit Standard Type Conversion:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">    char</span> c = <span style="color:#ce9178">'A'</span>;</div><div>    <span style="color:#569cd6">int</span> i = c;<span style="color:#6a9955">  // Integral promotion</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">f</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">i</span>) { }</div><div>    <span style="color:#dcdcaa">f</span>(c);<span style="color:#6a9955">  // Integral promotion</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span style="color:#569cd6"><span>    </span>char</span>* pc = <span style="color:#b5cea8">0</span>;<span style="color:#6a9955"> // int -&gt; Null pointer</span></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><span>    </span>dog* pd = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">yellowdog</span>();<span style="color:#6a9955">  // pointer type conversion NOT a user defined type conversion</span></div></div><div><br /></div><div><b>Category C: Implicit User Defined Type Conversions:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    Defined inside a class (user-defined type)</span></div><div><span style="color:#6a9955">    There are 2 methods to define implicit user-defined type conversion:</span></div><div><span style="color:#6a9955">        Method 1: Use a constructor that can accept a single parameter.</span></div><div><span style="color:#6a9955">                    - convert other types of an object into your class type</span></div><div><span style="color:#6a9955">        Method 2: Use the type conversion function  </span></div><div><span style="color:#6a9955">                    - convert an object of your class into other types</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Define Implicit Type Conversion</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=S7MNPX73FSQ&amp;list=PLE28375D4AC946CC3&amp;index=15</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955"> // Method 1: convert other types of object into your class type</span></div><div><span style="color:#6a9955"> // Convert string type (name) into dog type using constructor      </span></div><div><span style="color:#6a9955"> // NO explicit key word and 1 arg constuctor -&gt; do object construction and BOTH implicit and explicit conversions</span></div><div>      <span style="color:#dcdcaa">dog</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">name</span>) { m_name = name; }<span style="color:#6a9955">  // NO explicit</span></div><div><span style="color:#6a9955"> // WITH explicit key word and 1 arg constuctor -&gt; do object construction and explicit type conversion </span></div><div><span style="color:#6a9955">                                                                                         (NOT implicit conversion)</span></div><div><span style="color:#6a9955">      // explicit dog(string name) {m_name = name; } // Avoids  inadvertent implicit type conversion.</span></div><br /><div>      <span style="color:#4ec9b0">string</span> <span style="color:#dcdcaa">getName</span>() { <span style="color:#c586c0">return</span> m_name; }</div><br /><div><span style="color:#6a9955">      // Method 2: convert an object of your class into other(string) type</span></div><div>      <span style="color:#c586c0">operator</span> <span style="color:#c586c0">string</span> () <span style="color:#569cd6">const</span> { <span style="color:#c586c0">return</span> m_name; }<span style="color:#6a9955"> // Type Conversion function - NO return type</span></div><div>  <span style="color:#569cd6">private:</span></div><div>      string m_name;</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>()</div><div>{</div><div>    <span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">dogname</span> = <span style="color:#ce9178">"Bob"</span>;</div><div>    dog <span style="color:#9cdcfe">dog1</span> = <span style="color:#9cdcfe">dogname</span>;<span style="color:#6a9955"> // Method 1: Convert string type ("Bob") into dog type using constructor</span></div><div>    cout &lt;&lt; <span style="color:#9cdcfe">dog1</span>.<span style="color:#dcdcaa">getName</span>();</div><div><span style="color:#6a9955">    // cout &lt;&lt; dog1;    // Need overload &lt;&lt;</span></div><div><span style="color:#6a9955">    // NO need of getName() function if you have a type conversion function(Method 2)</span></div><div>    <span style="color:#dcdcaa">printf</span>(<span style="color:#ce9178">"My name is %s </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>, <span style="color:#9cdcfe">dog1</span>.<span style="color:#dcdcaa">c_str</span>());<span style="color:#6a9955"> // Method 2: Converts dog type into string type (%s) using type </span></div><div><span style="color:#6a9955">                                              // conversion function</span></div><div><span style="color:#6a9955">    // printf("My name is %s .\n", dog1); //  ∞√/☺ - .c_str() need to convert 'string' to 'const char*' </span></div><div><span style="color:#6a9955">                                          // (null terminated c-string)</span></div><div>}</div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    DESIGN PRINCIPLE: make the interface easy to use correctly and hard to use incorrectly.</span></div><div><span style="color:#6a9955">    How hard is enough?  Ideally, 'uncompilable'.</span></div><div><span style="color:#6a9955">    General guideline: </span></div><div><span style="color:#6a9955">       1. Avoid defining seemingly unexpected conversion.</span></div><div><span style="color:#6a9955">       2. Avoid defining two-way implicit conversion.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Implicit type conversion is useful when creating numerical types of class, such as a rational class.</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Rational</span> {</div><div><span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // Bcos of default values, it can take single argument as well. So it can be considered as </span></div><div><span style="color:#6a9955">    // 1 arg constructor with implicit/explicit conversions</span></div><div>    <span style="color:#dcdcaa">Rational</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">numerator</span> = <span style="color:#b5cea8">0</span>, <span style="color:#569cd6">int</span> <span style="color:#9cdcfe">denominator</span> = <span style="color:#b5cea8">1</span>): <span style="color:#dcdcaa">num</span>(numerator),<span style="color:#dcdcaa">den</span>(denominator) {}</div><div>    <span style="color:#569cd6">int</span> num;<span style="color:#6a9955">  // Demo only, public data members are not recommended</span></div><div>    <span style="color:#569cd6">int</span> den;</div><br /><div><span style="color:#6a9955">    // * is overloaded for Rational * Rational</span></div><div>    <span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Rational</span> <span style="color:#c586c0">operator*</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Rational</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>) {</div><div><span style="color:#6a9955">        // Covert the result(internal multiplication result) into object</span></div><div>        <span style="color:#c586c0">return</span> <span style="color:#dcdcaa">Rational</span>(num * <span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">num</span>, den * <span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">den</span>);<span style="color:#6a9955"> // num * rhs.num =&gt; 23 * 2</span></div><div>    }</div><div><span style="color:#6a9955">    // Converts Rational Object to integer</span></div><div>    <span style="color:#c586c0">operator</span> <span style="color:#c586c0">int</span> () <span style="color:#569cd6">const</span> { <span style="color:#c586c0">return</span> num / den; }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span> ()</div><div>{</div><div>    Rational r1 = <span style="color:#b5cea8">23</span>;     <span style="color:rgb(106,153,85)">// numerator = 23</span></div><div><span style="color:#6a9955">    // LEFT to RIGHT evaluation</span></div><div><span style="color:#6a9955">    // rational * rational(2) =&gt; rational(2) can be done by 1 arg constructor,</span></div><div>    Rational r2 = r1 * <span style="color:#b5cea8">2</span>;<span style="color:#6a9955"> // * is overloaded for rational multiplication(Rational * Rational) can be done by </span></div><div><span style="color:#6a9955">                          // Rational operator*</span></div><div><span style="color:#6a9955">    // integer * integer(r1) =&gt; Needs Rational to Integer conversion</span></div><div>    Rational r3 = <span style="color:#b5cea8">3</span> * r1;<span style="color:#6a9955"> // * is global ARITHMETIC interger multiplication(like 5x6). AMBIGUOUS to above </span></div><div><span style="color:#6a9955">    // multiplication.</span><span style="color:rgb(106,153,85)"> So ONLY either of the one only works not BOTH!. Better to avoid defining two-way </span></div><div><span style="color:rgb(106,153,85)">    // implicit conversion.</span></div><div>    <span style="color:#c586c0">return</span> <span style="color:#b5cea8">0</span>;</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution - Remove two-way implicit conversion and define single way NON-MEMBER rational multiplication </span></div><div><span style="color:#6a9955">//            operator </span><span style="color:rgb(106,153,85)">- which works for BOTH</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Rational</span> {</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:rgb(220,220,170)">Rational</span>(<span style="color:rgb(86,156,214)">int</span> <span style="color:rgb(156,220,254)">numerator</span> = <span style="color:rgb(181,206,168)">0</span>, <span style="color:rgb(86,156,214)">int</span> <span style="color:rgb(156,220,254)">denominator</span> = <span style="color:rgb(181,206,168)">1</span>): <span style="color:rgb(220,220,170)">num</span>(numerator),<span style="color:rgb(220,220,170)">den</span>(denominator) {}</div><div>    <span style="color:#569cd6">int</span> num;<span style="color:#6a9955"> </span></div><div>    <span style="color:#569cd6">int</span> den;</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Define NON-MEMBER rational mulitiplication operator - which works for BOTH</span></div><div><span style="color:#6a9955">// Rational r2 = r1 * 2; =&gt; r1 * rational(2)</span></div><div><span style="color:#6a9955">// Rational r3 = 3 * r1; =&gt; rational(3) * r1</span></div><div><span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Rational</span> <span style="color:#c586c0">operator*</span>(<span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Rational</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">lhs</span>, <span style="color:#569cd6">const</span> <span style="color:#4ec9b0">Rational</span><span style="color:#569cd6">&amp;</span> <span style="color:#9cdcfe">rhs</span>) {</div><div><span style="color:#c586c0"><span>    </span><span>    </span><span>    </span>return</span> <span style="color:#dcdcaa">Rational</span>(<span style="color:#9cdcfe">lhs</span>.<span style="color:#9cdcfe">num</span>*<span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">num</span>, <span style="color:#9cdcfe">lhs</span>.<span style="color:#9cdcfe">den</span>*<span style="color:#9cdcfe">rhs</span>.<span style="color:#9cdcfe">den</span>);</div><div>}</div></div></div><div><br /></div><div><b>13. All Castings:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: All Castings Considered - Part I</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=lglGKxNrLgM&amp;list=PLE28375D4AC946CC3&amp;index=16</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// 1. static_cast</span></div><div><span style="color:#569cd6">int</span> i = <span style="color:#b5cea8">9</span>;</div><div><span style="color:#569cd6">float</span> f = <span style="color:#569cd6">static_cast</span>&lt;<span style="color:#569cd6">float</span>&gt;(i);<span style="color:#6a9955">              // convert object from one type to another</span></div><div>dog d1 = <span style="color:#569cd6">static_cast</span>&lt;dog&gt;(<span style="color:#dcdcaa">string</span>(<span style="color:#ce9178">"Bob"</span>));<span style="color:#6a9955">     // Type conversion NEEDS to be defined.</span></div><div>dog* pd = <span style="color:#569cd6">static_cast</span>&lt;dog*&gt;(<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">yellowdog</span>());<span style="color:#6a9955"> // convert pointer/reference from one type to a RELATED type </span></div><div><span style="color:#6a9955">                                                                                              (down/up cast)</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// 2. dynamic_cast</span></div><div>dog* pd = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">yellowdog</span>();<span style="color:#6a9955"> // static cast</span></div><div>yellowdog py = <span style="color:#569cd6">dynamic_cast</span>&lt;yellowdog*&gt;(pd); </div><div><span style="color:#6a9955">// a. It convert pointer/reference from one type to a RELATED type (down cast - Base to Derived)</span></div><div><span style="color:#6a9955">// b. perform run-time type check.  If succeed, py==pd; if fail, py==0;</span></div><div><span style="color:#6a9955">// c. It requires the 2 types to be polymorphic (atleast one </span><span style="color:rgb(106,153,85)">have </span><span style="color:rgb(106,153,85)">virtual function).</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// 3. const_cast</span></div><div><span style="color:#6a9955">                                           // only works on pointer/reference</span></div><div><span style="color:#569cd6">const</span> <span style="color:#569cd6">char</span>* str = <span style="color:#ce9178">"Hello, world."</span>;<span style="color:#6a9955">         // only works on SAME type</span></div><div><span style="color:#569cd6">char</span>* modifiable = <span style="color:#569cd6">const_cast</span>&lt;<span style="color:#569cd6">char</span>*&gt;(str);<span style="color:#6a9955"> // cast away constness of the object being pointed to</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// 4. reinterpret_cast </span></div><div><span style="color:#569cd6">long</span> p = <span style="color:#b5cea8">51110980</span>;</div><div>dog* dd = <span style="color:#569cd6">reinterpret_cast</span>&lt;dog*&gt;(p);<span style="color:#6a9955">  // re-interpret the bits of the object pointed to.</span></div><div><span style="color:#6a9955">// The ultimate cast that can cast one pointer to ANY other type of pointer.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    // C-Style Casting: A mixture of static_cast, const_cast and reinterpret_cast [NO dynamic_cast] </span></div><div>    <span style="color:#569cd6">short</span> a = <span style="color:#b5cea8">2000</span>;</div><div>    <span style="color:#569cd6">int</span> i = (<span style="color:#569cd6">int</span>)a;<span style="color:#6a9955">   // c-like cast notation</span></div><div>    <span style="color:#569cd6">int</span> j = <span style="color:#569cd6">int</span>(a);<span style="color:#6a9955">   // functional notation</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    Generally, C++ style of casts is preferred over the C-style, because:</span></div><div><span style="color:#6a9955">    1. Easier to identify in the code by keyword(static_cast, dynamic_cast etc.,).</span></div><div><span style="color:#6a9955">    2. Less usage error. C++ style provides:</span></div><div><span style="color:#6a9955">       a. Narrowly specified purpose of each cast, and</span></div><div><span style="color:#6a9955">       b. Run-time type check capability.</span></div></div></div><div><br /></div><div><b>More Examples:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: All Castings Considered - Part II</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=UfrR1nNfoeY&amp;list=PLE28375D4AC946CC3&amp;index=17</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><div><span style="color:#6a9955">// Casting could be risky.</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // Atleast one virtual function is needed to use dynamic_cast. Having only Virtual destructor is also OK.</span></div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#dcdcaa">~dog</span>() {} </div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">fly</span>() {  cout&lt;&lt; <span style="color:#ce9178">"Dog cannot fly"</span> &lt;&lt; endl;  }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">dog</span> {</div><div>    <span style="color:#569cd6">int</span> age = <span style="color:#b5cea8">5</span>;</div><div><span style="color:#569cd6">public:</span>  </div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>()  { cout&lt;&lt; <span style="color:#ce9178">"I run fast"</span>  &lt;&lt; endl; }</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout&lt;&lt; <span style="color:#ce9178">"woof. I am "</span> &lt;&lt; age  &lt;&lt; endl; }</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">fly</span>()  { cout&lt;&lt; <span style="color:#ce9178">"Yellow Dog cannot fly. I am "</span> &lt;&lt; age  &lt;&lt; endl; }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    dog* pd = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>();</div><br /><div><span style="color:#6a9955">    // STATIC CAST</span></div><div>    yellowdog* py_sc = <span style="color:#569cd6">static_cast</span>&lt;yellowdog*&gt;(pd);<span style="color:#6a9955"> // ALWAYS SUCCEED. BE-CAREFUL !!!</span></div><div>    cout &lt;&lt; <span style="color:#ce9178">"pd = "</span> &lt;&lt; pd &lt;&lt; endl;<span style="color:#6a9955">       // 0106A2C0</span></div><div>    cout &lt;&lt; <span style="color:#ce9178">"py_sc = "</span> &lt;&lt; py_ds &lt;&lt; endl;<span style="color:#6a9955"> // 0106A2C0 (SAME ADDRESS)</span></div><div><span style="color:#6a9955">    // compiler considers run() as STATIC FUNCTION </span></div><div>    <span style="color:#9cdcfe">py_sc</span>-&gt;<span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // I run fast</span></div><div>    <span style="color:#9cdcfe">py_sc</span>-&gt;<span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // woof. I am -33686019 (some random number) - WRONG</span></div><br /><div>    </div><div><span style="color:#6a9955">    // DYNAMIC CAST - WRONG</span></div><div><span style="color:#6a9955">    // NOT all dog's are yellowdog's</span></div><div>    yellowdog* py_dc = <span style="color:#569cd6">dynamic_cast</span>&lt;yellowdog*&gt;(pd);<span style="color:#6a9955"> // dynamic_cast FAIL </span></div><div>    cout &lt;&lt; <span style="color:#ce9178">"pd = "</span> &lt;&lt; pd &lt;&lt; endl;<span style="color:#6a9955">       // 00EDB8B8</span></div><div>    cout &lt;&lt; <span style="color:#ce9178">"py_dc = "</span> &lt;&lt; py_dc &lt;&lt; endl;<span style="color:#6a9955"> // 00000000</span></div><div><span style="color:#6a9955">    // compiler considers run() as STATIC FUNCTION </span></div><div>    <span style="color:#9cdcfe">py_dc</span>-&gt;<span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">  // I run fast &lt;- EVENTHOUGH py is a NULL POINTER</span></div><div>    <span style="color:#9cdcfe">py_dc</span>-&gt;<span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955"> // CRASH - CANNOT consider as STATIC FUNCTION bcos it uses member variable</span></div><br /><div><span style="color:#6a9955">    // POLYMORPHIC way without any cast</span></div><div>    yellowdog* deriverPtr = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">yellowdog</span>();<span style="color:#6a9955">  // yellowdog* pd = new dog(); &lt;- WRONG way of usage</span></div><div>    dog* basePtr = deriverPtr;           <span style="color:rgb(106,153,85)">// (or) </span><span style="color:rgb(106,153,85)">dog</span><span style="color:rgb(106,153,85)">* basePtr = new </span><span style="color:rgb(106,153,85)">yellowdog</span><span style="color:rgb(106,153,85)">(); &lt;= Correct way</span></div><div>    <span style="color:#9cdcfe">basePtr</span>-&gt;<span style="color:#dcdcaa">fly</span>();<span style="color:#6a9955">    // YellowDog or Dog depends on existance of virtual key word</span></div><div>    <span style="color:#9cdcfe">deriverPtr</span>-&gt;<span style="color:#dcdcaa">fly</span>();<span style="color:#6a9955"> // Yellow Dog cannot fly. I am 5 &lt;- ALWAYS YellowDog</span></div><br /><div><span style="color:#6a9955">    // Polymorphic way (STACK based objects)</span></div><div>    yellowdog derived;</div><div>    dog* basePtr = &amp;derived;</div><div>    <span style="color:#9cdcfe">basePtr</span>-&gt;<span style="color:#dcdcaa">fly</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// CONST CAST - casting could be a handy hack tool</span></div><div><div style="line-height:22px"><div><span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">dog</span> {</div><div>    string m_name;<span style="color:#6a9955">    // MUST be 'non- const'</span></div><div>    <span style="color:#569cd6">const</span> string m_LastName;<span style="color:#6a9955"> //  'const'</span></div><div>    <span style="color:#dcdcaa">dog</span>() : <span style="color:#dcdcaa">m_name</span>(<span style="color:#ce9178">"Bob"</span>), <span style="color:#dcdcaa">m_LastName</span>(<span style="color:#ce9178">"Tommy"</span>) {}</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() <span style="color:#569cd6">const</span> {<span style="color:#6a9955"> // object pointed by *this is CONST so you can NOT change its content.</span></div><div><span style="color:#6a9955">        // m_name = "Henry";</span></div><div>        <span style="color:#569cd6">const_cast</span>&lt;dog*&gt;(<span style="color:#569cd6">this</span>)-&gt;<span style="color:#9cdcfe">m_name</span> = <span style="color:#ce9178">"Henry"</span>;<span style="color:#6a9955"> // BUT you can change by const_cast</span></div><div><span style="color:#6a9955">        // const_cast&lt;dog*&gt;(this)-&gt;m_LastName = "Henry"; // Error: NOT allowed for real const member</span></div><div>        <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"My name is "</span> &lt;&lt; m_name &lt;&lt; <span style="color:#4ec9b0">std</span>::endl;</div><div>    }</div><div>};</div></div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">/*</span></div><div><span style="color:#6a9955"> * =========================================  C++ Style Casting ================================</span></div><div><span style="color:#6a9955"> *                             Generate_Code   Generate_data      risky   data_type</span></div><div><span style="color:#6a9955"> * Object Casting:            </span></div><div><span style="color:#6a9955"> *    static_cast                 yes              yes             2      any types</span></div><div><span style="color:#6a9955"> *                                                                       (as long as type </span></div><div><span style="color:#6a9955"> *                                                                       conversion is defined)</span></div><div><span style="color:#6a9955"> * Pointer/Reference Casting:</span></div><div><span style="color:#6a9955"> *    static_cast                 no               no              4     related types</span></div><div><span style="color:#6a9955"> *    dynamic_cast                yes              no              3     related types(down-cast)</span></div><div><span style="color:#6a9955"> *    const_cast                  no               no              1     same type</span></div><div><span style="color:#6a9955"> *    reinterpret_cast            no               no              5     any types</span></div><div><span style="color:#6a9955"> *</span></div><div><span style="color:#6a9955"> </span><span style="color:rgb(106,153,85)">* =========================================  C Style Casting ================================</span></div><div><span style="color:#6a9955"> *                             Generate_Code  Generate_data      risky   data_type</span></div><div><span style="color:#6a9955"> * Object Casting:               yes              yes             5      any types</span></div><div><span style="color:#6a9955"> *                                                                       (as long as type </span></div><div><span style="color:#6a9955"> *                                                                       conversion is defined)</span></div><div><span style="color:#6a9955"> * Pointer/Reference Casting:    no               no              5      any types</span></div><div><span style="color:#6a9955"> *</span></div><div><span style="color:#6a9955"> *</span></div><div><span style="color:#6a9955"> * Notes can be downloaded at my website: boqian.weebly.com</span></div><div><span style="color:#6a9955"> *</span></div><div><span style="color:#6a9955"> * Note:</span></div><div><span style="color:#6a9955"> * 1. const_cast, dynamic_cast and reinterpret_cast can ONLY work on pointers/references.</span></div><div><span style="color:#6a9955"> * 2. static_cast of objects is very different from static_cast of pointers. </span></div><div><span style="color:#6a9955"> * 3. reinterpret_cast basically reassigning the type information of the bit pattern. </span></div><div><span style="color:#6a9955"> *    It should only be used in low-level coding.</span></div><div><span style="color:#6a9955"> * 4. dynamic_cast does static_cast + run-time type check.</span></div><div><span style="color:#6a9955"> * 5. dynamic_cast and static_cast for pointers can only work on the related type (e.g., </span></div><div><span style="color:#6a9955"> *    base &lt;-&gt; derived).</span></div><div><span style="color:#6a9955"> *</span></div><div><span style="color:#6a9955"> */</span></div></div></div><div><br /></div><div><b>14. Inheritance - Public, Protected, and Private</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:#6a9955">    // Ref: https://www.youtube.com/watch?v=EYuPBkgJtCQ&amp;list=PLE28375D4AC946CC3&amp;index=18</span></div></div><div><span style="color:rgb(106,153,85)">    // Advanced C++: Inheritance - Public, Protected, and Private</span><span style="color:#6a9955">    </span></div><div><span style="color:#6a9955">    // Public, Protected, Private Inheritance </span></div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">B</span> { };</div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D_pub</span>  : <span style="color:#569cd6">public</span>    <span style="color:#4ec9b0">B</span> { };</div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D_prot</span> : <span style="color:#569cd6">protected</span> <span style="color:#4ec9b0">B</span> { };</div><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D_priv</span> : <span style="color:#569cd6">private</span>   <span style="color:#4ec9b0">B</span> { };</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    They specify different access control from the derived class to the base class.</span></div><div><span style="color:#6a9955">    Access Control:</span></div><div><span style="color:#6a9955">    1. NONE of the derived classes can access anything that is PRIVATE in B.</span></div><div><span style="color:#6a9955">    2. D_pub  inherits public members of B as PUBLIC and the protected members of B as PROTECTED</span></div><div><span style="color:#6a9955">    3. D_prot inherits the public and protected members of B as PROTECTED.</span></div><div><span style="color:#6a9955">    4. D_priv inherits the public and protected members of B as PRIVATE.</span></div><br /><div><span style="color:#6a9955">    Casting:</span></div><div><span style="color:#6a9955">    1. ANYONE can cast a D_pub* to B*. D_pub IS A special kind of B. [only IS-A / Derived IS A kind of Base]</span></div><div><span style="color:#6a9955">    2. D_prot's MEMBERS, FRIENDS, and CHILDREN can cast a D_prot* to B*.</span></div><div><span style="color:#6a9955">    3. D_priv's MEMBERS and FRIENDS can cast a D_priv* to B*. [HAS-A / ]</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Detailed Example</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">B</span> { </div><div>   <span style="color:#569cd6">public:</span>    <span style="color:rgb(86,156,214)">void</span> <span style="color:rgb(220,220,170)">f_pub</span>()  { cout &lt;&lt; <span style="color:rgb(206,145,120)">"f_pub is called.</span><span style="color:rgb(215,186,125)">\n</span><span style="color:rgb(206,145,120)">"</span>; }</div><div>   <span style="color:#569cd6">protected: </span><span style="color:rgb(86,156,214)">void</span> <span style="color:rgb(220,220,170)">f_prot</span>() { cout &lt;&lt; <span style="color:rgb(206,145,120)">"f_prot is called.</span><span style="color:rgb(215,186,125)">\n</span><span style="color:rgb(206,145,120)">"</span>; }</div><div>   <span style="color:#569cd6">private:</span>   <span style="color:rgb(86,156,214)">void</span> <span style="color:rgb(220,220,170)">f_priv</span>() { cout &lt;&lt; <span style="color:rgb(206,145,120)">"f_priv is called.</span><span style="color:rgb(215,186,125)">\n</span><span style="color:rgb(206,145,120)">"</span>; }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Public Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D_pub</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">B</span> { </div><div>   <span style="color:#569cd6">public:</span> </div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">foo</span>() {</div><div>         <span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">   // OK. D_pub's PUBLIC function</span></div><div>         <span style="color:#dcdcaa">f_prot</span>();<span style="color:#6a9955">  // OK. D_pub's protected function</span></div><div>         <span style="color:#dcdcaa">f_priv</span>();<span style="color:#6a9955">  // Error. B's private function </span></div><div>      }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Protected Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D_prot</span> : <span style="color:#569cd6">protected</span> <span style="color:#4ec9b0">B</span> { </div><div>   <span style="color:#569cd6">public:</span> </div><div><span style="color:#6a9955">    // using B::f_pub; // Declaration brings 'f_pub' function into the scope D_prot</span></div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">foo</span>() {</div><div>         <span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">   // OK. D_pub's protected function</span></div><div>         <span style="color:#dcdcaa">f_prot</span>();<span style="color:#6a9955">  // OK. D_pub's protected function</span></div><div>         <span style="color:#dcdcaa">f_priv</span>();<span style="color:#6a9955">  // Error. B's private function </span></div><div>      }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Private Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D_priv</span> : <span style="color:#569cd6">private</span> <span style="color:#4ec9b0">B</span> { </div><div>   <span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // using B::f_pub; // Declaration brings 'f_pub' function into the scope D_priv</span></div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">f</span>() {</div><div>         <span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">   // OK. D_priv's private function</span></div><div>         <span style="color:#dcdcaa">f_prot</span>();<span style="color:#6a9955">  // OK. D_priv's private function</span></div><div>         <span style="color:#dcdcaa">f_priv</span>();<span style="color:#6a9955">  // Error. B's private function </span></div><div>      }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   D_pub D1;</div><div>   <span style="color:#9cdcfe">D1</span>.<span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">  // OK. f_pub() is D_pub's public function.</span></div><div>   <span style="color:#9cdcfe">D1</span>.<span style="color:#dcdcaa">f_prot</span>();<span style="color:#6a9955"> // Error. f_prot() is D_pub's PROTECTED function you cann't access from main function.</span></div><br /><div>   D_prot D2;</div><div>   <span style="color:#9cdcfe">D2</span>.<span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">  // Error. f_pub() is D_priv's </span><span style="color:rgb(106,153,85)">PROTECTED </span><span style="color:#6a9955">function.</span></div><div>   <span style="color:#9cdcfe">D2</span>.<span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">  // OK if you have a declartion 'using B::f_pub' under PUBLIC of D_prot</span></div><br /><div>   D_priv D2;</div><div>   <span style="color:#9cdcfe">D2</span>.<span style="color:#dcdcaa">f_pub</span>();<span style="color:#6a9955">  // OK if you have a declartion 'using B::f_pub' under PUBLIC of D_priv</span></div><br /><div>   B* pB = &amp;D1;<span style="color:#6a9955"> // OK</span></div><div>   pB = &amp;D2;<span style="color:#6a9955">    // Error - You cann't do outside </span></div><div>}</div></div></div><div><br /></div><div><b>Similarity </b>between <b>Private Inheritance</b> and <b>Composition:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Private inheritance: HAS-A relation. Similar to COMPOSITION - one contains another.</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Ring</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tinkle</span>() { }</div><div>};</div></div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Private Inheritance == Composition</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog_Priv</span> : <span style="color:#569cd6">private</span> <span style="color:#4ec9b0">Ring</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#c586c0">using</span> <span style="color:#4ec9b0">Ring</span>::tinkle;<span style="color:#6a9955"> // Brings Dog's public interface</span></div><div>};</div><br /><div><span style="color:#6a9955">// Composition == Private Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div>   Ring m_ring;</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tinkle</span>() { <span style="color:#9cdcfe">m_ring</span>.<span style="color:#dcdcaa">tinkle</span>(); }<span style="color:#6a9955">  // call forwarding</span></div><div>};</div></div></div><div><br /></div><div><b>Difference </b>between <b>Private Inheritance </b>and <b>Composition:</b></div><div><b>Ex 1:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Ring</span> {</div><div>   <span>    </span><span style="color:#569cd6">virtual</span> <span style="color:#dcdcaa">tremble</span>();</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tinkle</span>() { <span style="color:#dcdcaa">tremble</span>(); }</div><div>   <span style="color:#569cd6">protected:</span></div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">foo</span>() { }</div><div>};</div></div></div><div><br /></div><div><div style="background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="color:rgb(212,212,212)"><span style="color:#6a9955">// Private Inheritance</span></div><div style="color:rgb(212,212,212)"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog_Priv</span> : <span style="color:#569cd6">private</span> <span style="color:#4ec9b0">Ring</span> {</div><div style="color:rgb(212,212,212)"><span style="color:#6a9955">   // Still have an ACCESS to Dog's PROTECT members</span></div><div style="color:rgb(212,212,212)">   <span style="color:#569cd6">public:</span></div><div style="color:rgb(212,212,212)">   <span>    </span><span style="color:#c586c0">using</span> <span style="color:#4ec9b0">Ring</span>::tinkle;<span style="color:#6a9955"> // Brings Dog's public interface</span>  </div><div style="color:rgb(212,212,212)">};</div><font color="#d4d4d4"><br /></font><div style="color:rgb(212,212,212)"><span style="color:#6a9955">// Composition</span></div><div style="color:rgb(212,212,212)"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {<span style="color:rgb(106,153,85)">    </span></div><div style="color:rgb(212,212,212)">   Ring m_ring; <span style="color:rgb(106,153,85)">// OK but NO access to Dog's PROTECT members</span></div><div style="color:rgb(212,212,212)"><font color="#d4d4d4"> </font><span style="color:rgb(86,156,214)">public:</span></div><div style="color:rgb(212,212,212)">   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tinkle</span>() { <span style="color:#9cdcfe">m_ring</span>.<span style="color:#dcdcaa">tinkle</span>(); }<span style="color:#6a9955">   // call forwarding using m_ring</span></div><div style="color:rgb(212,212,212)">};</div></div></div><div><b><br /></b></div><div><b>Ex: 2</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Ring</span> {</div><div>   <span style="color:#569cd6">private:</span></div><div>   <span>    </span><span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tremble</span>() { cout&lt;&lt; <span style="color:#ce9178">"Ring::temble()"</span> &lt;&lt; endl; };</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tinkle</span>()  { <span style="color:#dcdcaa">tremble</span>(); }</div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">glitter</span>() { cout&lt;&lt; <span style="color:#ce9178">"Ring::glitter()"</span> &lt;&lt; endl; };</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Private Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog_Priv</span> : <span style="color:#569cd6">private</span> <span style="color:#4ec9b0">Ring</span> {</div><div><span style="color:rgb(86,156,214)"><span>  </span>private:</span></div><div>    <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">tremble</span>() { cout&lt;&lt; <span style="color:#ce9178">"Dog_Priv::temble()"</span> &lt;&lt; endl; };</div><div>    <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">glitter</span>() { cout&lt;&lt; <span style="color:#ce9178">"Dog_Priv::glitter()"</span> &lt;&lt; endl; };</div><div><span style="color:#6a9955">     <span>   </span>// Also have an ACCESS to Dog's PROTECT members</span></div><div>   <span style="color:#569cd6">public:</span></div><div>   <span>    </span><span style="color:#c586c0">using</span> <span style="color:#4ec9b0">Ring</span>::tinkle;<span style="color:#6a9955"> // Brings Dog's public interface</span></div><div>   <span>    </span><span style="color:#c586c0">using</span> <span style="color:#4ec9b0">Ring</span>::glitter; <span style="color:rgb(106,153,85)">// It is hidden by Dog_Priv's glitter()</span></div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    Dog_Priv d;</div><div>    <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">tinkle</span>();<span style="color:#6a9955">  // Dog_Priv::temble() - INDIRECTLY ACCESSING Dog_Priv private function in main</span></div><div>    <span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">glitter</span>();<span style="color:#6a9955"> // ERROR - Dog_Priv private function CANN'T be accessed in main</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Preference:</span></div><div><span style="color:#6a9955">    composition: Decoupled and better object-oriented design. More preferred!.</span></div><div><span style="color:#6a9955">    private inheritance: more elegant polymorphism.</span></div></div></div><div><br /></div><div><b>15. Maintain 'is-a' Relation</b> </div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">  1. Don't override 'non-virtual' functions;</span></div><div><span style="color:#6a9955">  2. Don't override default parameter values for the 'virtual' functions;</span></div><div><span style="color:#6a9955">  3. Force inheritance of shadowed functions.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Maintain is-a Relation for Public Inheritance</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=97iK5r3zNug&amp;list=PLE28375D4AC946CC3&amp;index=19</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><div><span style="color:#6a9955">// 1. </span><span style="color:rgb(106,153,85)">Don't override non-virtual functions</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#6a9955">   // Add virtual key word if you want polymorphism</span></div><div>   <span style="color:#569cd6">public:</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am just a dog.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;};</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog </span>{</div><div>   <span style="color:#569cd6">public:</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am a yellow dog.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;};</div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   Yellowdog* py = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">Yellowdog</span>();</div><div>   <span style="color:#9cdcfe">py</span>-&gt;<span style="color:#dcdcaa">bark</span>();  </div><div>   Dog* pd = py;</div><div>   <span style="color:#9cdcfe">pd</span>-&gt;<span style="color:#dcdcaa">bark</span>(); </div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    // NOT a Polymorphism</span></div><div><span style="color:#6a9955">    I am a yellow dog.</span></div><div><span style="color:#6a9955">    I am just a dog.</span></div><div><span style="color:#6a9955">    // Polymorphism: DIFFERENT class objects that act on the SAME api will behave DIFFERENTLY.</span></div><div><span style="color:#6a9955">    I am a yellow dog.</span></div><div><span style="color:#6a9955">    I am a yellow dog.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">msg</span> = <span style="color:#ce9178">"just a"</span>) { cout &lt;&lt; <span style="color:#ce9178">"I am "</span> &lt;&lt; msg &lt;&lt; <span style="color:#ce9178">" dog.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; };</div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">speed</span>) { cout &lt;&lt; <span style="color:#ce9178">"I am run at speed of "</span> &lt;&lt; speed &lt;&lt; endl; };</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#6a9955">    // Virtual functions are bound dynamically.</span></div><div><span style="color:#6a9955">    // Default parameters are bound STATICALLY.</span></div><div><span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // Don't override default parameter values for the virtual functions;</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">msg</span> = <span style="color:#ce9178">"a special "</span>) { cout &lt;&lt; <span style="color:#ce9178">"I am "</span> &lt;&lt; <span style="color:#9cdcfe">msg</span> &lt;&lt; <span style="color:#ce9178">" yellow dog.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; };</div><br /><div><span style="color:#6a9955">    // 3. Shadowing: After seeing the run(string), compiler STOP searching for another run() eventhough they </span></div><div><span style="color:#6a9955">    //               have different args. </span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">txt</span> = <span style="color:#ce9178">"I cann't run"</span>) { cout &lt;&lt; <span style="color:#9cdcfe">txt</span> &lt;&lt; endl; };</div><div><span style="color:#6a9955">    // Force inheritance of shadowed functions.</span></div><div><span style="color:#6a9955">    // using Dog::run;</span></div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    <span style="color:#4ec9b0">Yellowdog</span>* <span style="color:#9cdcfe">py</span> = <span style="color:#c586c0">new</span> <span style="color:#4ec9b0">Yellowdog</span>();</div><div>    Dog* pd = <span style="color:#9cdcfe">py</span>;</div><div>    <span style="color:#9cdcfe">py</span>-&gt;<span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955">     // I am a special  yellow dog.</span></div><div>    <span style="color:#9cdcfe">pd</span>-&gt;<span style="color:#dcdcaa">bark</span>();<span style="color:#6a9955">     // I am just a yellow dog.  WRONG polymorphism and default arg MixMatch. Calls Yellowdog's</span></div><div><span style="color:#6a9955">                    // </span><span style="color:rgb(106,153,85)">bark() </span><span style="color:rgb(106,153,85)">BUT gets </span><span style="color:rgb(106,153,85)">the default value from Dog NOT from the Yellodog</span></div><br /><div>    <span style="color:#9cdcfe">py</span>-&gt;<span style="color:#dcdcaa">run</span>(<span style="color:#b5cea8">45</span>);<span style="color:#6a9955">    // ERROR. It doesn't call Dog's run(int), it calls yellowdog run(string) BUT arg mismatch</span></div><div><span style="color:#6a9955">    // py-&gt;run(45); // OK. If you declare 'using Dog::run;' I am run at speed of 45</span></div><div>    <span style="color:#9cdcfe">py</span>-&gt;<span style="color:#dcdcaa">run</span>();<span style="color:#6a9955">      // I cann't run</span></div><div>}</div></div></div></div><div><br /></div><div><b>16. Convert Dynamic Polymorphism to Static Polymorphism:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Disadvantages of Dynamic Polymorphism:</span></div><div><span style="color:#6a9955">    1. Extra Memory needed to create V-table.</span></div><div><span style="color:#6a9955">    2. Extra run time cost due to dynamic binding.</span></div></div></div><div><br /></div><div><b>Dynamic Polymorphism:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Static Polymorphism</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=-WV9vWjhI3g&amp;list=PLE28375D4AC946CC3&amp;index=21</span></div><div><span style="color:#c586c0">#include</span><span style="color:#569cd6"> </span><span style="color:#ce9178">&lt;iostream&gt;</span></div><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div><br /><div><span style="color:#6a9955">// Dynamic Polymorphism</span></div><div><span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">Person</span> { </div><div>    string name;</div><div>    <span style="color:#569cd6">int</span> age;</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Profession</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">taxBand</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {</div><div>      <span style="color:#c586c0">if</span> (node) <span style="color:rgb(220,220,170)">salaryBenefits</span>(node);</div><div>   }</div><div>   <span style="color:#569cd6">private:</span></div><div>   <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">salaryBenefits</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) { }  <span style="color:rgb(106,153,85)">// private - Dynamic Polymorphism</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Doctor</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Profession</span> {</div><div>   <span style="color:#569cd6">private:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">salaryBenefits</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {</div><div>       cout &lt;&lt; <span style="color:#ce9178">"Customized salaryBenefits() for Doctor.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Police</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Profession</span> {</div><div>   <span style="color:#569cd6">private:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">salaryBenefits</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {</div><div>       cout &lt;&lt; <span style="color:#ce9178">"Customized salaryBenefits() for Police.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>   }</div><div>};</div><div>   </div><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   Person* p = <span style="color:#c586c0">new</span> Person { <span style="color:#ce9178">"Rajesh"</span>, <span style="color:#b5cea8">25</span> };</div><div>   Doctor doc;</div><div>   <span style="color:#9cdcfe">doc</span>.<span style="color:#dcdcaa">taxBand</span>(p);</div><br /><div>   Police pol;</div><div>   <span style="color:#9cdcfe">pol</span>.<span style="color:#dcdcaa">taxBand</span>(p);</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955"> 3 things to be maintained in DYNAMIC to STATIC polymorphism conversion:</span></div><div><span style="color:#6a9955">    * I).   is-a relationship(public inheritance) between the base class and derived class</span></div><div><span style="color:#6a9955">    * II).  Base class defines a "generic" algorithm(salaryBenefits) that's used by the derived class</span></div><div><span style="color:#6a9955">    * III). The "generic" algorithm is customized by the derived class</span></div></div></div><div><br /></div><div><b>Static Polymorphism </b>/ Simulated Polymorphism  -<b> Conversion technique</b> used is - <b>CURIOUSLY RECURRING TEMPLATE PATTERN</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// TMP - Template Metaprogramming - Moving computation from runtime to compile time</span></div><div><span style="color:#6a9955">// Non-virtual Interface Idiom (NVI)</span></div><div><span style="color:#569cd6">template</span> &lt;<span style="color:#569cd6">typename</span> <span style="color:#4ec9b0">T</span>&gt; </div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Profession</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">taxBand</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {</div><div>      <span style="color:#c586c0">if</span> (node) <span style="color:rgb(220,220,170)">salaryBenefits</span>(node);</div><div>   }</div><div>   <span style="color:#569cd6">private:</span><span style="color:#6a9955"> </span></div><div><div style="line-height:22px"><span style="color:#6a9955">    // virtual void salaryBenefits(Person* node) { }  // private - Dynamic Polymorphism</span></div></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">salaryBenefits</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {               <span style="color:rgb(106,153,85)">// NO more virtual function</span></div><div>        <span style="color:#569cd6">static_cast</span>&lt;T*&gt;(<span style="color:#569cd6">this</span>)-&gt;<span style="color:#dcdcaa">salaryBenefits</span>(node);<span style="color:#6a9955">  // Static Polymorphism</span></div><div>    }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Doctor</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Profession</span>&lt;<span style="color:#4ec9b0">Doctor</span>&gt; {</div><div>   <span style="color:#569cd6">private:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">salaryBenefits</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {</div><div>       cout &lt;&lt; <span style="color:#ce9178">"Customized salaryBenefits() for Doctor.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Police</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Profession</span>&lt;<span style="color:#4ec9b0">Police</span>&gt; {</div><div>   <span style="color:#569cd6">private:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">salaryBenefits</span>(<span style="color:#4ec9b0">Person</span><span style="color:#569cd6">*</span> <span style="color:#9cdcfe">node</span>) {</div><div>       cout &lt;&lt; <span style="color:#ce9178">"Customized salaryBenefits() for Police.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>   }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Disadvantage: Even though there is no usage of extra heap memory for V-table and no run time cost of late binding.</span></div><div><span style="color:#6a9955">Different template classes (Doctor/Police) own their separate memory space in the program image [Size of exe will</span></div><div><span style="color:#6a9955">bit bigger]</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Other Static Polymorphism by Template</span></div><div><span style="color:#569cd6">template</span>&lt;<span style="color:#569cd6">typename</span> <span style="color:#4ec9b0">T</span>&gt;</div><div><span style="color:#4ec9b0">T</span> <span style="color:#dcdcaa">Max</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">vector</span>&lt;<span style="color:#4ec9b0">T</span>&gt; <span style="color:#9cdcfe">v</span>) {</div><div>    T max = <span style="color:#9cdcfe">v</span>[<span style="color:#b5cea8">0</span>];</div><div>    <span style="color:#c586c0">for</span>(<span style="color:#569cd6">typename</span> <span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">vector</span>&lt;<span style="color:#4ec9b0">T</span>&gt;::<span style="color:#4ec9b0">iterator</span> it = <span style="color:#9cdcfe">v</span>.<span style="color:#dcdcaa">begin</span>(); it != <span style="color:#9cdcfe">v</span>.<span style="color:#dcdcaa">end</span>(); ++it) {</div><div>        <span style="color:#c586c0">if</span>(*it &gt; max) {</div><div>            max = *it;</div><div>        }</div><div>    }</div><div>    <span style="color:#c586c0">return</span> max;</div><div>}</div></div></div><div><br /></div><div><b>17. Multiple Inheritance</b> - Devil or Angel</div><div><div style="background-color:rgb(30,30,30);line-height:22px"><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// Ref: Advanced C++: Multiple Inheritance - Devil or Angel</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// https://www.youtube.com/watch?v=7APovvvftQs&amp;list=PLE28375D4AC946CC3&amp;index=22</span></div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">// Multiple Inheritance -- A class is directly derived from more than one base classes.</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">InputFile</span> {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#569cd6">private:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">open</span>();</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#569cd6">public:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">read</span>();</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">};</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">OutputFile</span> {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#569cd6">public:</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">open</span>();</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">write</span>();</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">};</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">IOFile</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">InputFile</span>, <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">OutputFile</span> {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#6a9955">    // 2 open() </span><span style="color:rgb(106,153,85)">instances from different classes</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">};</div><br /><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre"><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   IOFile f;</div><div><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">   </span></font><span style="color:rgb(156,220,254);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">f</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">.</span></font><span style="color:rgb(220,220,170);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">open</span><font color="#d4d4d4" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre">();</span></font><font color="#6a9955" face="Consolas, Courier New, monospace"><span style="font-size:16px;white-space:pre"> // Ambiguous ERROR even though private open() is NOT accessible in main()</span></font></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">   <span style="color:#9cdcfe">f</span>.<span style="color:#9cdcfe">OutputFile</span>::<span style="color:#dcdcaa">open</span>();<span style="color:#6a9955"> // OK</span></div><div style="color:rgb(212,212,212);font-family:Consolas,Courier New,monospace;font-size:16px;white-space:pre">}</div></div></div><div><br /></div><div>Move the <b>common parts</b> to a separate common <b>abstract base class.</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>class File {<span style="color:#6a9955">            //         File</span></div><div>   <span style="color:#569cd6">public:</span><span style="color:#6a9955">              //         /  \        </span></div><div>   string name;<span style="color:#6a9955">         // InputFile  OutputFile</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">open</span>();<span style="color:#6a9955">         //         \  /</span></div><div>};<span style="color:#6a9955">                      //         IOFile</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">InputFile</span>  : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">File</span> { };</div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">OutputFile</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">File</span> { };</div><br /><div><span style="color:#6a9955">// Diamond shape of hierarchy</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">IOFile</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">InputFile</span>, <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">OutputFile</span> {</div><div><span style="color:#6a9955">  // STILL 2 different open() instances and 2 different name instances even though it uses common base class File</span></div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   IOFile f;</div><div>   <span style="color:#9cdcfe">f</span>.<span style="color:#dcdcaa">open</span>();<span style="color:#6a9955"> // ambiguous error - open() from which path of the Diamond shape hierarchy</span></div><div>   <span style="color:#9cdcfe">f</span>.<span style="color:#9cdcfe">InputFile</span>::name = <span style="color:#ce9178">"File1"</span>; </div><div>   <span style="color:#9cdcfe">f</span>.<span style="color:#9cdcfe">OutputFile</span>::name = <span style="color:#ce9178">"File2"</span>;<span style="color:#6a9955"> // Why we need 2 instance of 'name' ???</span></div><div>}</div></div></div><div><br /></div><div><b>Use Virtual Inheritance : </b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">File</span> {<span style="color:#6a9955">            //         File</span></div><div>   <span style="color:#569cd6">public:</span><span style="color:#6a9955">              //         /  \ </span></div><div>   string name;<span style="color:#6a9955">         // InputFile  OutputFile</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">open</span>();<span style="color:#6a9955">         //         \  /</span></div><div>};<span style="color:#6a9955">                      //        IOFile</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">InputFile</span>  : <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">File</span> { };<span style="color:#6a9955"> // Virtual Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">OutputFile</span> : <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">File</span> { };</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">IOFile</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">InputFile</span>, <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">OutputFile</span> {</div><div><span style="color:#6a9955">    // Only one instance of open() and name bcos of virtual inheritance</span></div><div>};<span style="color:#6a9955">  // Diamond shape of hierarchy</span></div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   IOFile f;</div><div>   <span style="color:#9cdcfe">f</span>.<span style="color:#dcdcaa">open</span>();<span style="color:#6a9955">         // OK</span></div><div>   <span style="color:#9cdcfe">f</span>.<span style="color:#9cdcfe">name</span> = <span style="color:#ce9178">"File1"</span>;<span style="color:#6a9955"> // OK</span></div><div>}</div></div></div><div><br /></div><div><b>Problem by Initialization:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Virtual base class</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">File</span> {     </div><div>   <span style="color:#569cd6">public:</span>      </div><div>   <span style="color:#dcdcaa">File</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">fname</span>);</div><div>};             </div><br /><div><span style="color:#6a9955">//  1st. File(fname) {} initialization is MUST but IGNORED by the compiler </span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">InputFile</span> : <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">File</span> {</div><div>   <span style="color:#dcdcaa">InputFile</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">fname</span>) : <span style="color:#dcdcaa">File</span>(fname) {}</div><div>};</div><br /><div><span style="color:#6a9955">//  2nd. File(fname) {} initialization is </span><span style="color:rgb(106,153,85)">MUST but IGNORED by the compiler </span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">OutputFile</span> : <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">File</span> {</div><div>   <span style="color:#dcdcaa">OutputFile</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">fname</span>) : <span style="color:#dcdcaa">File</span>(fname) {}</div><div>};</div><br /><div><span style="color:#6a9955">// 3rd. File(fname) {} initialization USED by the compiler </span></div><div><span style="color:#6a9955">// C++ Rule: Initialization of base virtual class is the responsibility of LAST derived class</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">IOFile</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">InputFile</span>, <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">OutputFile</span> {</div><div>   <span style="color:#dcdcaa">IOFile</span>(<span style="color:#4ec9b0">string</span> <span style="color:#9cdcfe">fname</span>) : <span style="color:#dcdcaa">OutputFile</span>(fname), <span style="color:#dcdcaa">InputFile</span>(fname), <span style="color:#dcdcaa">File</span>(fname) {}</div><div>};  </div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   IOFile f;</div><div>}</div></div></div><div><br /></div><div><div><b>Better Solution</b> would be using <b>Pure Abstract Class</b> it <b>solves </b>the problem of <b>multiple </b>object <b>instances</b>, multiple object <b>initialization</b>, <span style="background-color:transparent;font-size:10pt">multiple member functions/Data and even we do <b>NOT need a virtual inheritance. </b></span></div><div><b>Note: </b>File, InputFile and OutputFile need to change to <b>PAC.</b></div></div><div><br /></div><div><div><b>Abstract Class:</b> A class has <b>one or more pure</b> virtual functions.</div><div> </div><div><b>Pure Abstract Classes: </b><span style="background-color:transparent;font-size:10pt"> A class containing <b>only pure</b> virtual functions</span></div><div>     <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span>- no data </div><div>     <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span>- no concrete functions</div><div>     <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span>- no private protected functions</div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">OutputFile</span> {</div><div>    <span style="color:#569cd6">public:</span></div><div>    <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">write</span>() = <span style="color:#b5cea8">0</span>;</div><div>    <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">open</span>() = <span style="color:#b5cea8">0</span>;</div><div>    };</div></div></div><div><br /></div><div><div><b>Interface Segregation Principle (ISP):</b> Split the <b>large interfaces into smaller </b>and more specific ones so that clients <span style="background-color:transparent;font-size:10pt">only need to know about the methods that are of interest to them.</span></div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Engineer</span> {<span style="color:#6a9955"> // Pure Abstract Classes</span></div><div>   <span style="color:#569cd6">public:</span></div><div>   ...;<span style="color:#6a9955"> // 40 APIs</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Son</span> {<span style="color:#6a9955"> // Pure Abstract Classes</span></div><div>   <span style="color:#569cd6">public:</span></div><div>   ...;<span style="color:#6a9955"> // 50 APIs</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Andy</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Engineer</span>, <span style="color:#4ec9b0">Son</span><span style="color:#6a9955">  // NO need for virtual inheritance</span></div><div>{</div><div>   <span style="color:#569cd6">public:</span></div><div>   ...;<span style="color:#6a9955"> // 500 APIs</span></div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    * Summary:</span></div><div><span style="color:#6a9955">    * 1. Multiple Inheritance is an important technique, e.g. ISP</span></div><div><span style="color:#6a9955">    * 2. Derive only from PACs when using Multiple Inheritance.</span></div></div></div><div><br /></div><div><b>18. <span style="background-color:transparent;font-size:10pt">The Duality of Public Inheritance:</span></b></div><div><div>            1. Inheritance of <b>Interface</b></div><div>            2. Inheritance of <b>Implementation</b></div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Duality Of Public Inheritance - Interface &amp; Implementation</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=iFK-D13LX2U&amp;list=PLE28375D4AC946CC3&amp;index=23</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // Pure Virtual Function - support ONLY Inheritance of Interface</span></div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() = <span style="color:#b5cea8">0</span>;</div><div><span style="color:#6a9955">    // Non Virtual Function - supports BOTH Inheritance of Interface and Implementation</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am running."</span>; }<span style="color:#6a9955"> // Don't override it. Otherwise it breaks IS-A relationship</span></div><div><span style="color:#6a9955">    // Impure Virtual Function - supports Inheritance of Interface and DEFAULT Implementation</span></div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">eat</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am eating. "</span>; }<span style="color:#6a9955"> // Can be overriden if needed.</span></div><div><span style="color:#569cd6">protected:</span></div><div><span style="color:#6a9955">    // protected function support ONLY Inheritance of Implementation</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">sleep</span>() { cout &lt;&lt; <span style="color:#ce9178">" I am sleeping. "</span>; }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#569cd6">public:</span></div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am a yellow dog.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;}</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">iSleep</span>() { <span style="color:#dcdcaa">sleep</span>(); }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Types of Inheritance in C++:</span></div><div><span style="color:#6a9955">    1. Pure virtual public function   - inherit interface only.</span></div><div><span style="color:#6a9955">    2. Non-virtual public function    - inherit both interface and implementation.</span></div><div><span style="color:#6a9955">    3. Impure virtual public function - inherit interface and default implementation</span></div><div><span style="color:#6a9955">    4. Protected function             - inherit implementation only</span></div><div><span style="color:#6a9955">As a software designer, it is very important to separate the concepts of interface and implementation.</span></div></div></div><div><br /></div><div><div><b> When to use - Interface Inheritance?</b></div><div> <span>    </span>1. Subtyping - One type can be safely used instead of another type</div><div><span>    </span> 2. Polymorphism</div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">bark</span>() = <span style="color:#b5cea8">0</span>;</div></div><div><br /></div><div><div><b> Disadvantages of Implementation Inheritance </b></div><div>    - Increase code complexity</div><div>    - Not encouraged to use it</div></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">    // Supports both Interface and Implementation - NOT bad.</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">run</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am running."</span>; }</div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">eat</span>() { cout &lt;&lt; <span style="color:#ce9178">"I am eating. "</span>; }</div><div><span style="color:#569cd6">protected:</span></div><div><span style="color:#6a9955">    // ONLY Implementation inheritance - NOT encouraged</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">sleep</span>() { cout &lt;&lt; <span style="color:#ce9178">" I am sleeping. "</span>; }</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Guidelines for Implementation Inheritance:</span></div><div><span style="color:#6a9955">    1. Do not use inheritance for code reuse, use composition.</span></div><div><span style="color:#6a9955">    2. Minimize the implementation in base classes. Base classes should be thin.</span></div><div><span style="color:#6a9955">    3. Minimize the level of hierarchies in implementation inheritance.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Inheritance Guideline:</span></div><div><span style="color:#6a9955">    Never use inheritance for code reuse!</span></div><div><span style="color:#6a9955">    Inherit interfaces only; never inherit implementation!</span></div><div><span style="color:#6a9955">    All base classes should be Pure Abstract Classes!</span></div></div></div><div><br /></div><div>19. Code Reuse - <b>Inheritance</b> vs <b>Composition:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Code Reuse - Inheritance vs Composition</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=tXFqS31ZOFM&amp;list=PLE28375D4AC946CC3&amp;index=24</span></div><br /><div><span style="color:#6a9955">// Code Reuse with Inheritance</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {<span style="color:#6a9955">   // BaseDog - Don't use 'Base' in the class name it breaks the implementation details</span></div><div><span style="color:#6a9955">    // common activities</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">BullDog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#6a9955">    // Call the common activities to perform more tasks.</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">ShepherdDog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div><span style="color:#6a9955">    // Call the common activities to perform more tasks.</span></div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Code Reuse with Composition</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">ActivityManager</span> {</div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">eatBiscuit</span>() { ... }<span style="color:#6a9955">    // common activities</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">Dog</span> {</div><div>    <span style="color:#569cd6">virtual</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">eatBiscuit</span>() = <span style="color:#b5cea8">0</span>;<span style="color:#6a9955"> // Inherit only from pure abstract class</span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">BullDog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div>    ActivityManager* pActMngr;</div><div><span style="color:#6a9955">    // Call the common activities through pActMngr</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">eatBiscuit</span>() { <span style="color:#9cdcfe">pActMngr</span>-&gt;<span style="color:#dcdcaa">eatBiscuit</span>(); }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">ShepherdDog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">Dog</span> {</div><div>    ActivityManager* pActMngr;</div><div><span style="color:#6a9955">    // Call the common activities through pActMngr</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">eatBiscuit</span>() { <span style="color:#9cdcfe">pActMngr</span>-&gt;<span style="color:#dcdcaa">eatBiscuit</span>(); }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">    Code reuse: Composition is better than Inheritance</span></div><div><span style="color:#6a9955">    1. Less code coupling between reused code and reuser of the code </span></div><div><span style="color:#6a9955">       a. Child class automatically inherits ALL parent class's public members.</span></div><div><span style="color:#6a9955">       b. Child class can access parent's protected members.</span></div><div><span style="color:#6a9955">          - Inheritance breaks encapsulation</span></div><br /><div><span style="color:#6a9955">    2. Dynamic binding</span></div><div><span style="color:#6a9955">       a. Inheritance is bound at compile time</span></div><div><span style="color:#6a9955">       b. Composition can be bound either at compile time or at run time.</span></div></div></div><div><br /></div><div><b>20.  Namespace and Keyword "using"</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Ref: Advanced C++: Namespace and Keyword "using"</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=YliqZh6s9ig&amp;list=PLE28375D4AC946CC3&amp;index=25</span></div><br /><div><span style="color:#6a9955">// 1. 'using namespace' - directive [ONLY namespace]: to bring ALL namespace members into the current scope</span></div><div>   <span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// 2. 'using' - declaration [namespace / Class]:</span></div><div><span style="color:#6a9955">//      a. Bring ONE specific namespace member to current scope. </span></div><div><span style="color:#6a9955">//      b. Bring a member from base class(NOT namespace) to current class's scope. </span></div><br /><div>   <span style="color:#c586c0">using</span> <span style="color:#4ec9b0">std</span>::cout;</div><div>   <span style="color:#c586c0">using</span> <span style="color:#4ec9b0">B</span>::f;</div></div></div><div><br /></div><div>Example:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;<span style="color:#6a9955">  // case 1:   global scope</span></div><div><span style="color:#c586c0">using</span> <span style="color:#4ec9b0">std</span>::cout;<span style="color:#6a9955">      // case 2a:  global scope</span></div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">B</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">f</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">a</span>) { cout &lt;&lt; a;<span style="color:rgb(206,145,120)"> </span>}</div><div>};</div><div> </div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">D</span> : <span style="color:#569cd6">private</span> <span style="color:#4ec9b0">B</span> { </div><div>   <span style="color:#569cd6">public:</span></div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>() { </div><div>         <span style="color:#c586c0">using</span> <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span>;<span style="color:#6a9955">  // case 1: local scope</span></div><div>         cout &lt;&lt; <span style="color:#ce9178">"From D: </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>      }</div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">h</span>() { </div><div>         <span style="color:#c586c0">using</span> <span style="color:#4ec9b0">std</span>::cout;<span style="color:#6a9955">     // case 2a: local scope</span></div><div>         cout &lt;&lt; <span style="color:#ce9178">"From D: </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>      }</div><div><span style="color:#6a9955">      // f() is privately derived so it can't be accessed outside. BUT 'using B::f;' brings to the current scope </span></div><div><span style="color:#6a9955">      // and made it possible !!!</span></div><div>      <span style="color:#c586c0">using</span> <span style="color:#4ec9b0">B</span>::f;<span style="color:#6a9955">             // case 2b:  class scope</span></div><br /><div><span style="color:#6a9955">      // using std::cout;     // illegal - it cann't be in class scope</span></div><div><span style="color:#6a9955">      // using namespace std; // illegal - it cann't be in class scope</span></div><div>};</div><br /><div>D d;</div><div><span style="color:#9cdcfe">d</span>.<span style="color:#dcdcaa">f</span>(<span style="color:#b5cea8">8</span>);<span style="color:#6a9955"> // works even it is privately derived function (Important !!!)</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Notes:</span></div><div><span style="color:#6a9955">   1. using declaration and using directive, when used on a namespace, can be used in the global or local scope.</span></div><div><span style="color:#6a9955">   2. using declaration, when used on class members. It should be used in the class scope.</span></div></div></div><div><br /></div><div><b>Anonymous Namespace:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Anonymous Namespace - Namespace doesn't have any name.</span></div><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>() { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"global g()</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><br /><div><span style="color:#569cd6">namespace</span> {</div><div><span style="color:#6a9955">    // Within a FILE you can access it like a global functions but it CANN'T be accessed from another FILE just </span></div><div><span style="color:#6a9955">    // like a STATIC function [ex: static void h() { } ]</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>() { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"g()</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">h</span>() { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"h()</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; <span style="color:#dcdcaa">g</span>(); }<span style="color:#6a9955"> // call the locall g() defined inside the namespace</span></div><div>}</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#dcdcaa">h</span>();<span style="color:#6a9955"> // calls h() which is inside the anonymous namespace</span></div><div>   <span style="color:#dcdcaa">g</span>(); <span style="color:rgb(106,153,85)">// Error - Ambiguous</span></div><div>}</div></div></div><div><br /></div><div><div><b>Name Hiding in CLASS:</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:rgb(106,153,85)">// Name Hiding in CLASS:</span></div><div><span style="color:rgb(86,156,214)">class</span> <span style="color:rgb(78,201,176)">B</span> {</div><div>   <span style="color:rgb(86,156,214)">public:</span></div><div>      <span style="color:rgb(86,156,214)">void</span> <span style="color:rgb(220,220,170)">f</span>(<span style="color:rgb(86,156,214)">int</span> <span style="color:rgb(156,220,254)">a</span>);</div><div>};</div><div> </div><div><span style="color:rgb(86,156,214)">class</span> <span style="color:rgb(78,201,176)">D</span> : <span style="color:rgb(86,156,214)">public</span> <span style="color:rgb(78,201,176)">B</span> { </div><div>   <span style="color:rgb(86,156,214)">public:</span></div><div><span style="color:rgb(106,153,85)">    // using B::f; // AVOIDS name hiding problem</span></div><div>    <span style="color:rgb(86,156,214)">void</span> <span style="color:rgb(220,220,170)">f</span>();<span style="color:rgb(106,153,85)">      // Name Hidding: f() hides the base f(int a)</span></div><div>};</div><br /><div><span style="color:rgb(86,156,214)">int</span> <span style="color:rgb(220,220,170)">main</span>() {</div><div>   D d;</div><div>   <span style="color:rgb(156,220,254)">d</span>.<span style="color:rgb(220,220,170)">f</span>(<span style="color:rgb(181,206,168)">8</span>);<span style="color:rgb(106,153,85)"> // ERROR bcos of name hiding</span></div><div>}</div></div></div><div><br /></div></div><div><span style="font-size:13.3333px;background-color:transparent"><b>21. Argument Dependent Lookup (ADL) </b>/ </span><b>Koenig Lookup  </b>(read as k-nig lookup): Increases the function <b>name search</b> scope</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:#6a9955">    // Ref: Advance C++: Koenig Lookup - Argument Dependent Lookup (ADL)</span></div><div><span style="color:#6a9955">    // https://www.youtube.com/watch?v=TxgPZXe8XTo&amp;list=PLE28375D4AC946CC3&amp;index=26</span></div><br /><div><span style="color:#6a9955">    // Koenig Lookup or Argument Dependent Lookup (ADL)</span></div><br /><div><span style="color:#6a9955">    // Example 1:</span></div><div>    <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span></div><div>    {</div><div>        <span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">X</span> { };</div><div>        <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">" calling A::g(X) </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>    }</div><br /><div><span style="color:#6a9955">    // void g(X)    { cout &lt;&lt; " calling g() \n"; }     // Error: X is undefined</span></div><div><span style="color:#6a9955">    // void g(A::X) { cout &lt;&lt; " calling g(A::X) \n"; } // Ambiguous with A::g(X)</span></div><div>    <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>()        { cout &lt;&lt; <span style="color:#ce9178">" calling g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }<span style="color:#6a9955">     // OK</span></div><br /><div>    <span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>        <span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">X</span> <span style="color:#9cdcfe">x1</span>;</div><div>        <span style="color:#4ec9b0">A</span>::<span style="color:#dcdcaa">g</span>(<span style="color:#9cdcfe">x1</span>);<span style="color:#6a9955"> // OK - calling A::g(X)</span></div><div>        <span style="color:#dcdcaa">g</span>(<span style="color:#9cdcfe">x1</span>);<span style="color:#6a9955">    // OK - calling A::g(X) - it works !! bcos of Koenig Lookup, or Argument Dependent Lookup (ADL)</span></div><div>        <span style="color:#dcdcaa">g</span>();<span style="color:#6a9955">      // calling g()</span></div><div><span style="color:#6a9955">        // Compiler searches function name 'g' in </span></div><div><span style="color:#6a9955">        // 1. current scope, </span></div><div><span style="color:#6a9955">        // 2. scope where it param type has defined - by Koenig lookup and </span></div><div><span style="color:#6a9955">        // 3. global scope.</span></div><div>    }</div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Example 2:</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">C</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span>    </span><span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">Y</span> {};</div><div>   <span>    </span><span style="color:#569cd6">static</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">h</span>(<span style="color:#4ec9b0">Y</span>) { cout &lt;&lt; <span style="color:#ce9178">"calling C::h() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">C</span>::Y y;</div><div>   <span style="color:#4ec9b0">C</span>::<span style="color:#dcdcaa">h</span>(y);<span style="color:#6a9955"> // OK</span></div><div>   <span style="color:#dcdcaa">h</span>(y);<span style="color:#6a9955">    // Error bcos Koenig Lookup NOT works for class. It works only for namespace.</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Example 3:</span></div><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span> {</div><div>   <span>    </span><span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">X</span> {};</div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">" calling A::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>   <span>    </span><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">h</span>(<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">" calling A::h() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>}</div><br /><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">C</span> {</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">X</span> ) { cout &lt;&lt; <span style="color:#ce9178">"calling C::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span> ; } <span style="color:rgb(106,153,85)">// NOT void g(X){ } - Definition will NOT use Koening Lookup </span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">j</span>() {</div><div>      <span style="color:#4ec9b0">A</span>::X x;</div><div>      <span style="color:#dcdcaa">h</span>(x);<span style="color:#6a9955"> // OK for function caller which uses Koenig Lookup (unlike function definition which doesn't)</span></div><div>      <span style="color:#dcdcaa">g</span>(x);<span style="color:#6a9955"> // ERROR - Ambiguous bcos it sees 2 versions - g(X) by local and g(A::X) by Koenig Lookup </span></div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">C</span>::<span style="color:#dcdcaa">j</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:rgb(106,153,85)">// Example 4:</span></div><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span> {</div><div>   <span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">X</span> {};</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">" calling A::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">h</span>(<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">" calling A::h() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>}</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">C</span> {<span style="color:#6a9955">    // Changed from namespace to class</span></div><div><span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">X</span> ) { cout &lt;&lt; <span style="color:#ce9178">"calling C::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span> ; }</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">j</span>() {</div><div>      <span style="color:#4ec9b0">A</span>::X x;</div><div>      <span style="color:#dcdcaa">h</span>(x);<span style="color:#6a9955"> // OK by Koenig Lookup</span></div><div>      <span style="color:#dcdcaa">g</span>(x);<span style="color:#6a9955"> // OK - NO ambiguity. In class, once g is found in the local scope it STOPS further search.</span></div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>    C c;</div><div>    <span style="color:#9cdcfe">c</span>.<span style="color:#dcdcaa">j</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Example 5:</span></div><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span></div><div>{</div><div>   <span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">X</span> {};</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">X</span>)    { cout &lt;&lt; <span style="color:#ce9178">"calling A::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>}</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">B</span> {</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">"calling B::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span> ; }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">C</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">B</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">j</span>() {</div><div>      <span style="color:#4ec9b0">A</span>::X x;</div><div>      <span style="color:#dcdcaa">g</span>(x);<span style="color:#6a9955"> // OK - no ambiguity. calling B::g()</span></div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   C c;</div><div>   <span style="color:#9cdcfe">c</span>.<span style="color:#dcdcaa">j</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Name hiding for NAMESPACE</span></div><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span></div><div>{</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#569cd6">int</span>) { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">" calling A::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><br /><div>   <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">C</span> {</div><div><span style="color:#6a9955">      // Name hiding: g() hides g(int)</span></div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>() { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"calling C:g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span> ; }</div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">j</span>() {</div><div><span style="color:#6a9955">         //using A::g; // solves the name hiding problem</span></div><div>         <span style="color:#dcdcaa">g</span>(<span style="color:#b5cea8">9</span>);<span style="color:#6a9955"> // Error - Ambiguous</span></div><div>      }</div><div>   }</div><div>}</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">C</span>::<span style="color:#dcdcaa">j</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span></div><div>{</div><div>   <span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">X</span> {};</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">X</span>) { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">" calling A::g(X) </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><br /><div>   <span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">C</span> {</div><div><span style="color:#6a9955">      // Name hiding: g() hides g(X)</span></div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>() { <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"calling C:g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span> ; }</div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">j</span>() {</div><div>         X x;</div><div>         <span style="color:#dcdcaa">g</span>(x);<span style="color:#6a9955"> // NO Error by name hiding. Bcos it uses Koenig Lookup and prints - calling A::g(X)</span></div><div>      }</div><div>   }</div><div>}</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">C</span>::<span style="color:#dcdcaa">j</span>();</div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Name Lookup Resolution Sequence:</span></div><br /><div><span style="color:#6a9955"> With namespaces:</span></div><div><span style="color:#6a9955">    current namespace scope(higher priority) &gt; next enclosed scope(lower priority) &gt; ... &gt; global scope(lowest priority)</span></div><div><span style="color:#6a9955">      To override the resolution sequence:</span></div><div><span style="color:#6a9955">      <span>    </span>1. Qualifier or using declaration</span></div><div><span style="color:#6a9955">      <span>    </span>2. Koenig lookup</span></div><br /><div><span style="color:#6a9955"> With classes:</span></div><div><span style="color:#6a9955">    current class scope(higher priority) &gt; parent scope(lower priority) &gt; ... &gt; global scope(lowest priority)</span></div><div><span style="color:#6a9955">      To override the resolution sequence:</span></div><div><span style="color:#6a9955">          1. Qualifier or using declaration (CAN'T use Koenig lookup)   </span></div><br /><div><span style="color:#6a9955"> Name hiding: name in the higher priority scope overrides the same name in the next lower priority scope</span></div></div></div><div><br /></div><div><b>22. Koenig Lookup and Interface Principles</b></div><div><span>    </span>Why Koenig Lookup?</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Example 1:</span></div><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span></div><div>{</div><div>   <span style="color:#569cd6">struct</span> <span style="color:#4ec9b0">X</span> {};</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>(<span style="color:#4ec9b0">X</span>) { cout &lt;&lt; <span style="color:#ce9178">" calling A::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>()  { cout &lt;&lt; <span style="color:#ce9178">" calling A::g() </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>; }</div><div>}</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">A</span>::X x1;</div><div>   <span style="color:#dcdcaa">g</span>(x1);<span style="color:#6a9955">   // Koenig Lookup, or Argument Dependent Lookup (ADL)</span></div><div>   <span style="color:#dcdcaa">g</span>();<span style="color:#6a9955">     // Error</span></div><div>}</div></div></div><div><br /></div><div><b>2 reason for using Koenig Lookup :</b></div><div>1. The Practical Reason for using Koenig Lookup:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div>    <span style="color:rgb(78,201,176)">std</span>::<span style="color:rgb(197,134,192)">operator&lt;&lt;</span>(<span style="color:rgb(78,201,176)">std</span>::<span style="color:rgb(78,201,176)">cout</span>, <span style="color:rgb(206,145,120)">"Hi. </span><span style="color:rgb(215,186,125)">\n</span><span style="color:rgb(206,145,120)">"</span>);</div><div><span style="color:#6a9955">    // Other way of writing above by using Koenig Lookup</span></div><div>    <span style="color:#4ec9b0">std</span>::cout &lt;&lt; <span style="color:#ce9178">"Hi.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;<span style="color:#6a9955"> // definition of &lt;&lt; (std::operator&lt;&lt;) is found inside std namespace by Koenig Lookup</span></div><div><span style="color:#6a9955">    // If there is NO Koenig Lookup then </span></div><div>    <span style="color:#4ec9b0">std</span>::cout <span style="color:#4ec9b0">std</span>::&lt;&lt; <span style="color:#ce9178">"Hi.</span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;<span style="color:#6a9955"> // Error</span></div></div></div><div><br /></div><div>2. Theoretical Reason: What is the <b>interface of a class ?</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span></div><div>{</div><div>   <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">C</span> {</div><div>      <span style="color:#569cd6">public:</span></div><div><span style="color:#6a9955">      // Inferfaces of class C</span></div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">f</span>() = <span style="color:#b5cea8">0</span>;</div><div>      <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">g</span>() = <span style="color:#b5cea8">0</span>;</div><div>   };</div><div>   <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">h</span>(<span style="color:#4ec9b0">C</span>);<span style="color:#6a9955"> // ALSO Inferface of </span><span style="color:rgb(106,153,85)">class C</span></div><div>   <span style="color:#4ec9b0">ostream</span><span style="color:#569cd6">&amp;</span> <span style="color:#c586c0">operator&lt;&lt;</span>(<span style="color:#4ec9b0">ostream</span><span style="color:#569cd6">&amp;</span>, <span style="color:#569cd6">const</span> <span style="color:#4ec9b0">C</span><span style="color:#569cd6">&amp;</span> );<span style="color:#6a9955"> // ALSO Inferface of </span><span style="color:rgb(106,153,85)">class C</span></div><div>}</div><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">j</span>(<span style="color:#4ec9b0">C</span>);<span style="color:#6a9955"> // NOT an Interface of </span><span style="color:rgb(106,153,85)">class C</span><span style="color:#6a9955"> bcos outside the namespace A</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Definition of class: </span></div><div><span style="color:#6a9955">   A class describes a set of data, along with the functions(NOT only member function) that operate on that data.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">Class Interface includes: </span></div><div><span style="color:#6a9955">    1. Functions that operate on class C and in the same namespace with C are part of C's interface.</span></div><div><span style="color:#6a9955">    2. Functions that are part of C's interface should be in the same namespace as C.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">   // C class interfaces</span></div><div>   <span style="color:#4ec9b0">A</span>::C c; </div><div>   <span style="color:#9cdcfe">c</span>.<span style="color:#dcdcaa">f</span>();</div><div>   <span style="color:#dcdcaa">h</span>(c);</div></div></div><div><br /></div><div>Example:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">A</span> { </div><div>   <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">C</span> {}; </div><div>   <span style="color:#569cd6">int</span> <span style="color:#c586c0">operator+</span>(<span style="color:#569cd6">int</span> <span style="color:#9cdcfe">n</span>, <span style="color:#4ec9b0">A</span>::<span style="color:#4ec9b0">C</span>) { <span style="color:#c586c0">return</span> n+<span style="color:#b5cea8">1</span>; }<span style="color:#6a9955"> // User defined operator +</span></div><div>}</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">A</span>::C <span style="color:#9cdcfe">arr</span>[<span style="color:#b5cea8">3</span>]; </div><div>   <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">accumulate</span>(arr, arr+<span style="color:#b5cea8">3</span>, <span style="color:#b5cea8">0</span>);<span style="color:#6a9955">  // return 3</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// accumulate - Defined in C++ standard library &lt;numeric&gt;</span></div><div><span style="color:#569cd6">namespace</span> <span style="color:#4ec9b0">std</span> {</div><div>   <span style="color:#569cd6">template</span> &lt;<span style="color:#569cd6">class</span> <span style="color:#4ec9b0">InputIterator</span>, <span style="color:#569cd6">class</span> <span style="color:#4ec9b0">T</span>&gt;</div><div>   <span style="color:#4ec9b0">T</span> <span style="color:#dcdcaa">accumulate</span> (<span style="color:#4ec9b0">InputIterator</span> <span style="color:#9cdcfe">first</span>, <span style="color:#4ec9b0">InputIterator</span> <span style="color:#9cdcfe">last</span>, <span style="color:#4ec9b0">T</span> <span style="color:#9cdcfe">init</span>)</div><div>   {</div><div>     <span style="color:#c586c0">while</span> ( first!=last )</div><div>       init = init + *first++;<span style="color:#6a9955">  // calls user defined operator + Koenig lookup instead of operator + from std namespace.</span></div><div>     <span style="color:#c586c0">return</span> init;</div><div>   }</div><div>}</div></div></div><div><span style="background-color:transparent;font-size:10pt"><br /></span></div><div><span style="background-color:transparent;font-size:10pt"><b>23.  Demystifying Operator new/delete :</b></span></div><div>What happens when the following code is executed ? </div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">   dog* pd = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>();</div></div><div><span style="background-color:transparent;font-size:10pt">  Step 1. </span><b style="background-color:transparent;font-size:10pt">operator new</b><span style="background-color:transparent;font-size:10pt"> is called to allocate memory for dog.</span></div><div><div>  Step 2. dog's <b>constructor </b>is called to create dog.</div><div>  Step 3. if step 2 throws an exception, call <b>operator delete</b> to free the memory allocated in step 1.</div><div> <b> Note:</b> if step 1 throws an exception, delete wouldn't be called bcos C++ assumes that step 1 <b>always </b>succeed.<span style="background-color:transparent;font-size:10pt"> </span></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre">  <span style="color:#c586c0">delete</span> pd;</div></div><div><span style="background-color:transparent;font-size:10pt">  Step 1. dog's <b>destructor </b>is called.</span></div><div><div>  Step 2. <b>operator delete</b> is called to free the memory.</div></div><div><br /></div><div>Global <b>'Operator new':</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><div style="line-height:22px"><div><span style="color:#6a9955">// Ref: Advanced C++: Demystifying Operator new/delete</span></div><div><span style="color:#6a9955">// https://www.youtube.com/watch?v=IO0EmgOagMY&amp;list=PLE28375D4AC946CC3&amp;index=28</span></div><div><span style="color:#6a9955"><br /></span></div></div></div><div><span style="color:#6a9955">//   This is how the 'operator new' may look like if you re-implement it. </span></div><div><span style="color:#6a9955">//   Note: new handler is a function invoked when the operator new failed to allocate memory.</span></div><div><span style="color:#6a9955">//         set_new_handler() installs a new handler and returns current new handler.</span></div><div><span style="color:#569cd6">void*</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">new</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#569cd6">size_t</span> <span style="color:#9cdcfe">size</span>) <span style="color:#c586c0">throw</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">bad_alloc</span>) {</div><div>   <span style="color:#c586c0">while</span> (<span style="color:#569cd6">true</span>) {</div><div>      <span style="color:#569cd6">void</span>* pMem = <span style="color:#dcdcaa">malloc</span>(size);<span style="color:#6a9955">   // Allocate memory</span></div><div>      <span style="color:#c586c0">if</span> (pMem) </div><div>         <span style="color:#c586c0">return</span> pMem;<span style="color:#6a9955">              // Return the memory if successful</span></div><br /><div><span style="color:#6a9955">      // memory allocation is NOT successful</span></div><div>      <span style="color:#4ec9b0">std</span>::new_handler Handler = <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">set_new_handler</span>(<span style="color:#b5cea8">0</span>);<span style="color:#6a9955">  // Get new handler</span></div><div>      <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">set_new_handler</span>(Handler);</div><br /><div>      <span style="color:#c586c0">if</span> (Handler)</div><div>         (*Handler)();<span style="color:#6a9955">      // Invoke new handler and finally call the operator new again for memory allocation</span></div><div>      <span style="color:#c586c0">else</span></div><div>         <span style="color:#c586c0">throw</span> <span style="color:#dcdcaa">bad_alloc</span>();<span style="color:#6a9955"> // If new handler is null, throw exception</span></div><div>   }</div><div>}</div></div></div><div><br /></div><div>Member <b>'Operator new':</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">static</span> <span style="color:#569cd6">void*</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">new</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#569cd6">size_t</span> <span style="color:#9cdcfe">size</span>) <span style="color:#c586c0">throw</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">bad_alloc</span>)<span style="color:#6a9955"> // User defined 'operator new'</span></div><div>   {</div><div>         <span style="color:#dcdcaa">customNewForDog</span>(size);<span style="color:#6a9955"> // PROBLEM: Dog memory size is allocated for Yellowdog</span></div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">dog</span> { };</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   yellowdog* py= <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">yellowdog</span>();<span style="color:#6a9955"> // calls user defined 'operator new' NOT a global 'operator new'</span></div><div>}</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 1: </span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">static</span> <span style="color:#569cd6">void*</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">new</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#569cd6">size_t</span> <span style="color:#9cdcfe">size</span>) <span style="color:#c586c0">throw</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">bad_alloc</span>)<span style="color:#6a9955"> // User defined 'operator new'</span></div><div>   {</div><div>      <span style="color:#c586c0">if</span> (size == <span style="color:#569cd6">sizeof</span>(dog))</div><div>         <span style="color:#dcdcaa">customNewForDog</span>(size);</div><div>      <span style="color:#c586c0">else</span></div><div>         ::operator <span style="color:#c586c0">new</span>(size);<span style="color:#6a9955"> // call global 'operator new' for Yellowdog</span></div><div>   }</div><div>};</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Solution 2: Overload 'operator new' for yellowdog too</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">dog</span> {</div><div>   <span style="color:#569cd6">static</span> <span style="color:#569cd6">void*</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">new</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#569cd6">size_t</span> <span style="color:#9cdcfe">size</span>) <span style="color:#c586c0">throw</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">bad_alloc</span>) </div><div>};</div></div></div><div><br /></div><div><b>operator delete</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div><span style="color:#6a9955">   // virtual static void operator delete(void* pMemory) throw() // virtual &amp; static will NOT go together</span></div><div>   <span style="color:#569cd6">static</span> <span style="color:#569cd6">void</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">delete</span>(<span style="color:#569cd6">void*</span> <span style="color:#9cdcfe">pMemory</span>) <span style="color:#c586c0">throw</span>()<span style="color:#6a9955"> // You cann't make polymorphic by adding virtual keyword</span></div><div>   {</div><div>      cout &lt;&lt; <span style="color:#ce9178">"Bo is deleting a dog, </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>      <span style="color:#dcdcaa">customDeleteForDog</span>();</div><div>      <span style="color:#dcdcaa">free</span>(pMemory);</div><div>   }</div><div><span style="color:#6a9955">  // ~dog() {};</span></div><div>  virtural ~<span style="color:#dcdcaa">dog</span>() { };<span style="color:#6a9955"> // Even it is a do nothing destructor it MUST be a virtual otherwise </span></div><div><span style="color:#6a9955">  // 1. Class will not be polymorphic 2. ONLY dog memory will get deleted (Yellowdog stay forever in the memory). </span></div><div>};</div><br /><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">yellowdog</span> : <span style="color:#569cd6">public</span> <span style="color:#4ec9b0">dog</span> {</div><div>   <span style="color:#569cd6">static</span> <span style="color:#569cd6">void</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">delete</span>(<span style="color:#569cd6">void*</span> <span style="color:#9cdcfe">pMemory</span>) <span style="color:#c586c0">throw</span>() {</div><div>      cout &lt;&lt; <span style="color:#ce9178">"Bo is deleting a yellowdog, </span><span style="color:#d7ba7d">\n</span><span style="color:#ce9178">"</span>;</div><div>      <span style="color:#dcdcaa">customDeleteForYellowDog</span>();</div><div>      <span style="color:#dcdcaa">free</span>(pMemory);</div><div>   }</div><div>};</div><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   dog* pd = <span style="color:#c586c0">new</span> <span style="color:#dcdcaa">yellowdog</span>();</div><div>   <span style="color:#c586c0">delete</span> pd;</div><div>}</div></div></div><div><br /></div><div>Why do we want to customize<b> new/delete</b></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">     1. Usage error detection: </span></div><div><span style="color:#6a9955">        - Memory leak detection/garbage collection. </span></div><div><span style="color:#6a9955">        - Array index overrun/underrun.</span></div><div><span style="color:#6a9955">     2. Improve efficiency:</span></div><div><span style="color:#6a9955">        a. Clustering related objects to reduce page fault.</span></div><div><span style="color:#6a9955">        b. Fixed-size allocation (good for application with many small objects).</span></div><div><span style="color:#6a9955">        c. Align similar size objects to the same places to reduce fragmentation.</span></div><div><span style="color:#6a9955">     3. Perform additional tasks:</span></div><div><span style="color:#6a9955">        a. Fill the deallocated memory with 0's - security.</span></div><div><span style="color:#6a9955">        b. Collect usage statistics.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955"> Writing a GOOD memory manager is HARD! </span></div><div><span style="color:#6a9955">     Before writing your own version of new/delete, consider:</span><span style="color:rgb(106,153,85)">    </span></div><div><span style="color:#6a9955">     <span>    </span>1. Tweak your compiler toward your needs;</span></div><div><span style="color:#6a9955">     <span>    </span>2. Search for memory management library, E.g. Pool library from Boost.</span></div></div></div><div><br /></div><div>24. Define your own new handler:</div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:#6a9955">// Ref: Advanced C++: How to Define new Handler</span></div></div><div><span style="color:rgb(106,153,85)">// https://www.youtube.com/watch?v=lfqiH422WUc&amp;list=PLE28375D4AC946CC3&amp;index=29</span></div><div><span style="color:#6a9955"><br /></span></div><div><span style="color:#6a9955"> new-handler must do one of the following things:</span></div><div><span style="color:#6a9955">     1). Make more memory available.</span></div><div><span style="color:#6a9955">     2). Install a different new-handler. If the last handler couldn't find/allocate memory</span></div><div><span style="color:#6a9955">     3). Uninstall the new-handler (passing a null pointer).</span></div><div><span style="color:#6a9955">     4). Throw an exception bad_alloc or its descendent.</span></div><div><span style="color:#6a9955">     5). Terminate the program.</span></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div style="line-height:22px"><div><span style="color:#6a9955">// Example 1:</span></div><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#569cd6">int</span> *pGiant = <span style="color:#c586c0">new</span> <span style="color:#569cd6">int</span>[<span style="color:#b5cea8">10000000000L</span>];</div><div>   <span style="color:#c586c0">delete[]</span> pGiant;</div><div>}</div><br /><div><span style="color:#6a9955">// Output:</span></div><div>terminate called after throwing an instance of <span style="color:#ce9178">'std::bad_alloc'</span></div></div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Example 2: Global new-handler</span></div><div><span style="color:#569cd6">void</span> <span style="color:#dcdcaa">NoMoreMem</span>() {</div><div>   <span style="color:#4ec9b0">std</span>::cerr &lt;&lt; <span style="color:#ce9178">"Unable to allocate memory, Bo."</span> &lt;&lt; endl;</div><div>   <span style="color:#dcdcaa">abort</span>();</div><div>}</div><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">set_new_handler</span>(NoMoreMem);</div><div>   <span style="color:#569cd6">int</span> *pGiant = <span style="color:#c586c0">new</span> <span style="color:#569cd6">int</span>[<span style="color:#b5cea8">10000000000L</span>];</div><div>   <span style="color:#c586c0">delete[]</span> pGiant;</div><div>}</div><br /><div><span style="color:#6a9955">// Output:</span></div><div>Unable to allocate memory, Bo.</div></div></div><div><br /></div><div><div style="color:rgb(212,212,212);background-color:rgb(30,30,30);font-family:Consolas,Courier New,monospace;font-size:16px;line-height:22px;white-space:pre"><div><span style="color:#6a9955">// Example 3:  Class specific new-handler</span></div><div><span style="color:#569cd6">class</span> <span style="color:#4ec9b0">dog</span> {</div><div>   <span style="color:#569cd6">int</span> <span style="color:#9cdcfe">hair</span>[<span style="color:#b5cea8">10000000000L</span>];</div><div>   <span style="color:#4ec9b0">std</span>::new_handler origHandler;</div><div>   <span style="color:#569cd6">public:</span></div><div>   <span style="color:#569cd6">static</span> <span style="color:#569cd6">void</span> <span style="color:#dcdcaa">NoMemForDog</span>() {</div><div>      <span style="color:#4ec9b0">std</span>::cerr &lt;&lt; <span style="color:#ce9178">"No more memory for doggy, Bo."</span> &lt;&lt; endl;</div><div><span style="color:#6a9955">      // Duplicate restore the origHander incase '::operator new' throws exception</span></div><div>      <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">set_new_handler</span>(origHandler);</div><div>      <span style="color:#c586c0">throw</span> <span style="color:#4ec9b0">std</span>::bad_alloc;</div><div>   }</div><div>   <span style="color:#569cd6">void*</span> <span style="color:#c586c0">operator</span> <span style="color:#c586c0">new</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#569cd6">size_t</span> <span style="color:#9cdcfe">size</span>) <span style="color:#c586c0">throw</span>(<span style="color:#4ec9b0">std</span>::<span style="color:#4ec9b0">bad_alloc</span>) {</div><div>      origHandler = <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">set_new_handler</span>(NoMemForDog);<span style="color:#6a9955"> // get the old hander and set new handler</span></div><div>      <span style="color:#569cd6">void</span>* pV = ::operator <span style="color:#c586c0">new</span>(size);<span style="color:#6a9955">   // Call global operator new</span></div><div>      <span style="color:#4ec9b0">std</span>::<span style="color:#dcdcaa">set_new_handler</span>(origHandler);<span style="color:#6a9955"> // Restore old handler</span></div><div>      <span style="color:#c586c0">return</span> pV;</div><div>   }</div><div>};</div><br /><br /><div><span style="color:#569cd6">int</span> <span style="color:#dcdcaa">main</span>() {</div><div>   <span style="color:#4ec9b0">std</span>::shared_ptr&lt;dog&gt; <span style="color:#dcdcaa">pd</span>(<span style="color:#c586c0">new</span> <span style="color:#dcdcaa">dog</span>()); </div><div>}</div></div></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div><br /></div></div></td></tr></tbody></table><div class="sites-layout-tile sites-tile-name-footer sites-layout-empty-tile"><div dir="ltr"><br /></div></div></div>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/ServiceLogin?continue=https://sites.google.com/site/sridharkritha/handyconcepts/c-11/advanced-c&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="../../system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../../../../ssl.gstatic.com/sites/p/a71eef/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXtASf_M2E6cjJ9Hgufts3RfM7MwuhM--x9xhZTQT2CPH4TayaSydPvTW3i1i2BrgQ7WSiW1nubEAiXHKi7X7QysfP4_f2WyWwXse7Y7VTJ66SYOLNZjQXYPuLXYLFSZGE3YUXcw/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
    gsites.Xhr.send('../../_/tz.html', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, '../../../../../gg.google.com/csi.gif');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>

<!-- Mirrored from sites.google.com/site/sridharkritha/handyconcepts/c-11/advanced-c by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 10:31:35 GMT -->
</html>
