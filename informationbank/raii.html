<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="../../../schema.org/WebPage.html">

<!-- Mirrored from sites.google.com/site/sridharkritha/raii by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 09:42:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { /*

Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="../../../www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/sridharkritha/raii","deleted":false,"title":"RAII","dir":"ltr"}];
  var JOT_clearDotPath = '../../../ssl.gstatic.com/sites/p/a71eef/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":false,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://609780116-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"sridharkritha","experiments":{"enableSubpagesGadgetInTakeout":true,"DisableSiteEditingFeature__disable_site_editing":true,"disableDomainEditing":false},"jot2atari":{"eligibility":"INELIGIBLE"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"moreMobileStyleImprovements":null,"subscriptionDataMigrationInProgress":null,"plusBadge":false},"configProperties":{"disableSiteEditing":null},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/sridharkritha/raii\u0026service\u003djotspot","analyticsAccountId":"","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/a71eef/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/a71eef/system/js/codemirror.js","../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codemirror_css.css","../../../ssl.gstatic.com/sites/p/a71eef/system/js/trog_edit__en.js","../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/trogedit.css","_/rsrc/1624520311000/system/app/css/editor.css","../../../ssl.gstatic.com/sites/p/a71eef/system/app/css/codeeditor.css","/site/sridharkritha/_/rsrc/1624520311000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/sridharkritha","name":"sridharkritha","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":null,"isPageDraft":null,"parentPath":null,"parentWuid":null,"siteLocale":"en","timeZone":"America/Los_Angeles","type":"text","title":"RAII","locale":"en","wuid":"wuid:gx:6191dbc1889d002b","revision":10,"path":"/raii","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"raii","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":"","guest_":true,"displayNameOrEmail":"guest","userName":"guest","uid":"","renderMobile":false,"domain":"","namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"guest","hasAdminAccess":false},"gadgets":{"baseUri":"/site/sridharkritha/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="RAII - sridharkritha" />
<meta itemprop="name" content="RAII - sridharkritha" />
<meta property="og:title" content="RAII - sridharkritha" />
<meta name="description" content="Information Bank - Computer Science" />
<meta itemprop="description" content="Information Bank - Computer Science" />
<meta id="meta-tag-description" property="og:description" content="Information Bank - Computer Science" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="../../../ssl.gstatic.com/sites/p/a71eef/system/app/themes/ember/standard-css-ember-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="_/rsrc/1624520311000/system/app/css/overlaydd2a.css?cb=ember150goog-ws-noside" />
<link rel="stylesheet" type="text/css" href="_/rsrc/1624520311000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/sridharkritha/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>RAII - sridharkritha</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2></h2></div></td><td class="sites-layout-searchbox  "></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="display: none; width: 150px">
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
</div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">RAII</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-layout-name-left-sidebar-hf sites-layout-vbox"><div class="sites-layout-tile sites-tile-name-header sites-layout-empty-tile"><div dir="ltr"><br /></div></div><table cellspacing="0" class="sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1 sites-canvas-sidebar sites-layout-empty-tile"><div dir="ltr"><br /></div></td><td class="sites-layout-tile sites-tile-name-content-2"><div dir="ltr"><div><h3><a name="TOC-What-is-RAII-"></a>What is RAII ?</h3><ul><li>RAII means<b> 'resource acquisition is initialization'</b>. Stroustrup: "The <a href="http://www.research.att.com/~bs/bs_faq2.html#finally" target="_blank" rel="nofollow">basic idea</a> is to represent a resource by a local object, so that the local object's destructor will release the resource. That way, the programmer cannot forget to release the resource". A <a href="http://www.research.att.com/~bs/glossary.html#Gresource" target="_blank" rel="nofollow">resource</a> is "any entity that a program acquires and releases. Typical examples are free store, file handles, threads, sockets".</li><li>A misnomer: The important characteristic of RAII is that resources are released in the destructor. Resources may have been acquired in the constructor or in a member function. Weaker varieties of RAII like <code>std::auto_ptr</code> don't even acquire a resource.</li></ul></div><b><div><b style="background-color:transparent;font-size:10pt">Resource Acquisition Is Initialization - RAII:</b></div></b><br />* RAII is a very important and valuable idiom for managing resources in C++.<br /><br />* Resources are released in the destructor. Resources are acquired in the constructor or in a member function. The idea is that often you may happen to<div>   allocate resources  at the beginning of a
 block, and need to release it at the exit of a block. Exiting the block
 can happen by normal flow control, jumping</div><div>   out of it, and even by an 
exception.<br /><br />* In C++ language, the only code that can be <b>guaranteed </b>to be 
<b>executed after </b>an <b>exception </b>is thrown are the <b>destructors </b>of objects 
residing on <br />   the stack.<br />* RAII is vital in writing exception-safe C++ code<br /><br />* What can you achieve with RAII?<br />     - Automatic resource handling. Release (cleanup, deallocation, undo, rollback, ...) of various resources without manual interference  </div><div>     - Automatic resource management works for <b>normal </b>and <b>exceptional </b>program flow.<br />     - Encapsulation and information hiding. Resource acquisition and release are encapsulated in an object.<br />     - Locality of resources.<br />     - Deterministic Resource Management. You (can) know in advance when (where) the RAII objects go out of scope and therefore when the <br />       resources are released. Resources can be bound to a scope.<br /><br /><u><b>Examples 1:</b></u><span style="background-color:transparent;font-size:10pt">  A simple example of RAII is a File class. <b>Without RAII,</b> the code might look something like this:</span><pre><code><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    File <span style="color:#a6e22e">file</span>(<span style="color:#e6db74">"/path/to/file"</span>);</div><div>    <span style="color:#75715e">// Do stuff with file</span></div><div>    file.<span style="color:#a6e22e">close</span>();</div></div></code></pre>
<p>We must make sure that we close the file once we've finished with it. This has<b> two </b>drawbacks - <b>firstly,</b> wherever we use 
File, we will have to call File::close() - if we forget to do this, 
we're holding on to the file longer than we need to. The <b>second</b> problem is what if an exception is thrown before we close the file?</p><p>C++ solves both problems <b>using RAII</b> - that is, closing the file in the destructor of File. So as long as the File object is destroyed at the right time (which it should be anyway), closing the file is taken care of for us. So, our code now looks something like this:</p><pre><code><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    File <span style="color:#a6e22e">file</span>(<span style="color:#e6db74">"/path/to/file"</span>);</div><div>    <span style="color:#75715e">// Do stuff with file</span></div><div>    <span style="color:#75715e">// No need to close it - destructor will do that for us</span></div></div><span><br /><br /></span></code><u><b>Example 2:</b></u> Without RAII:
<div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    <span style="color:#66d9ef;font-style:italic">void</span> <span style="color:#a6e22e">o_really</span>() {</div><div>        resource <span style="color:#f92672">*</span> r <span style="color:#f92672">=</span> <span style="color:#a6e22e">allocate_resource</span>();</div><div>        <span style="color:#f92672">try</span> {</div><div>            <span style="color:#75715e">// something, which could throw.</span></div><div>        } <span style="color:#f92672">catch</span>(...) {</div><div>            <span style="color:#a6e22e">deallocate_resource</span>(r);</div><div>            <span style="color:#f92672">throw</span>;</div><div>        }</div><div>        <span style="color:#f92672">if</span>(...) { <span style="color:#f92672">return</span>; } <span style="color:#75715e">// oops, forgot to deallocate</span></div><div>        <span style="color:#a6e22e">deallocate_resource</span>(r);</div><div>    }</div></div>
</pre><p>The idea is that we encapsulate resource management into a class. Initialization of its object acquires the resource ("Resource Acquisition Is Initialization").
 At the time we exit the block (block scope), the resource is freed.</p><p><u>With RAII:</u><br /> </p>
<code><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px;white-space:pre"><div>    <span style="color:#66d9ef;font-style:italic">struct</span> <span style="color:rgb(166,226,46)">resource_holder</span> {</div><div>        <span style="color:#a6e22e">resource_holder</span>() {</div><div>            r <span style="color:#f92672">=</span> <span style="color:#a6e22e">allocate_resource</span>();</div><div>        }</div><div>        <span style="color:#a6e22e">~resource_holder</span>() {</div><div>            <span style="color:#a6e22e">deallocate_resource</span>(r);</div><div>        }</div><div>        resource <span style="color:#f92672">*</span> r;</div><div>    };</div><br /><div>    <span style="color:#66d9ef;font-style:italic">void</span> <span style="color:#a6e22e">o_really</span>() {</div><div>        resource_holder r;</div><div>        <span style="color:#75715e">// something, which could throw</span></div><div>        <span style="color:#f92672">if</span>(...) { <span style="color:#f92672">return</span>; }</div><div>    }</div></div><span><br /><u><b>Example 3:</b></u> Unlocking the critical section after the exception occurred inside the critical section after a lock<br />Problem: </span></code><code><u style="background-color:transparent;color:rgb(50,50,41);font-family:Lucida Grande,Lucida Sans Unicode,sans-serif;font-size:10pt">Without RAII:</u><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px;white-space:pre"><div>    <span style="color:#66d9ef;font-style:italic">void</span> <span style="color:#a6e22e">foo</span>() {</div><div>        mutex.<span style="color:#a6e22e">lock</span>()  <span style="color:rgb(117,113,94)">// CS - start</span></div><div>        <span>    </span>exception occurred <span style="color:#f92672">and</span> control goes out without unlocking the resource <span style="color:#f92672">-</span> Deadlock !!</div><div>        mutex.<span style="color:#a6e22e">unlock</span>() <span style="color:rgb(117,113,94)">// CS - end</span></div><div>    }</div></div><span><div><code><span><br /></span></code></div>Solution:</span></code><b> Exception Safe Code - </b>The idea is to encapsulate the act of 
acquiring and releasing the critical section in an object such that 
constructing the object acquires the CS and destroying the object 
releases it.<div>
<pre><code><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    <span style="color:#66d9ef;font-style:italic">struct</span> <span style="color:rgb(166,226,46)">CSHolder</span> {</div><div>        <span style="color:#f92672">explicit</span> <span style="color:#a6e22e">CSHolder</span>(CRITICAL_SECTION<span style="color:#f92672">&amp;</span><span style="color:#fd971f;font-style:italic"> cs</span>): <span style="color:#a6e22e">lock</span>(cs) {</div><div>            ::EnterCriticalSection(&amp;lock);</div><div>        }</div><div>        <span style="color:#f92672">~</span><span style="color:#a6e22e">CSHolder</span>() { ::LeaveCriticalSection(&amp;lock); }</div><div>        CRITICAL_SECTION<span style="color:#f92672">&amp;</span> lock;</div><div>    };</div><div><br /></div></div><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    CRITICAL_SECTION gLock;</div><div>    <span style="color:#66d9ef;font-style:italic">void</span> <span style="color:#a6e22e">foo</span>() {</div><div>        CSHolder <span style="color:#a6e22e">lockIt</span>(gLock);</div><div>        <span style="color:#75715e">// lock is held until lockIt is destroyed</span></div><div>    }</div></div></code></pre>
<p> It is a very common RAII C++ idiom in modern C++.</p><pre><code><span>Example: 4: </span></code><b>Problem: Without RAII:</b><br /><code><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    <span style="color:#66d9ef;font-style:italic">int</span> <span style="color:rgb(166,226,46)">Queue</span>::<span style="color:#a6e22e">push</span>( WorkUnit unit ) {</div><div>        <span style="color:#a6e22e">pthread_mutex_lock</span>( <span style="color:#f92672">&amp;</span>_writeMutex );</div><div>        <span style="color:#66d9ef;font-style:italic">int</span> errorCode <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;</div><div>        <span style="color:#f92672">try</span></div><div>        {</div><div>            _queue.<span style="color:#a6e22e">push_back</span>( unit );</div><div>        }</div><div>        <span style="color:#f92672">catch</span>( <span style="color:rgb(166,226,46)">std</span>::bad_alloc )</div><div>        {</div><div>            errorCode <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;</div><div>        }</div><br /><div>        <span style="color:#a6e22e">pthread_mutex_unlock</span>( <span style="color:#f92672">&amp;</span>_writeMutex );</div><br /><div>        <span style="color:#f92672">return</span> errorCode;</div><div>    }</div></div><span><br /><u>Solution: With RAII</u><br /><br /></span></code><code><div style="color:rgb(248,248,242);background-color:rgb(39,40,34);font-family:Consolas,Courier New,monospace;font-size:15px;line-height:20px"><div>    <span style="color:#66d9ef;font-style:italic">class</span> <span style="color:rgb(166,226,46)">Locker</span> {</div><div>        <span style="color:#66d9ef;font-style:italic">public:</span></div><div>            <span style="color:#a6e22e">Locker</span>(<span style="color:#66d9ef;font-style:italic">pthread_mutex_t</span> <span style="color:#f92672">&amp;</span><span style="color:#fd971f;font-style:italic">lock</span>) : <span style="color:#a6e22e">m_mutex</span>(lock)</div><div>            {</div><div>                <span style="color:#a6e22e">pthread_mutex_lock</span>(<span style="color:#f92672">&amp;</span>m_mutex);</div><div>            }</div><div>            <span style="color:#a6e22e">~Locker</span>()</div><div>            {</div><div>                <span style="color:#a6e22e">pthread_mutex_unlock</span>(<span style="color:#f92672">&amp;</span>m_mutex);</div><div>            }</div><div>        <span style="color:#66d9ef;font-style:italic">private:</span></div><div>            <span style="color:#66d9ef;font-style:italic">pthread_mutex_t</span><span style="color:#f92672">&amp;</span>    m_mutex;</div><div>    };</div><br /><div>    <span style="color:#66d9ef;font-style:italic">int</span> <span style="color:rgb(166,226,46)">Queue</span>::<span style="color:#a6e22e">push</span>( WorkUnit unit ) {</div><div>        <span style="color:#75715e">// building the object lock calls the constructor thus locking the mutex.</span></div><div>        Locker  <span style="color:#a6e22e">lock</span>(_writeMutex);</div><div>        <span style="color:#66d9ef;font-style:italic">int</span> errorCode <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;</div><br /><div>        <span style="color:#f92672">try</span></div><div>        {</div><div>            _queue.<span style="color:#a6e22e">push_back</span>( unit );</div><div>        }</div><div>        <span style="color:#f92672">catch</span>( <span style="color:rgb(166,226,46)">std</span>::bad_alloc )  <span style="color:#75715e">// Other exceptions may happen here !!!!</span></div><div>        {                        <span style="color:#75715e">// You catch one that you handle locally via error codes. </span></div><div>            errorCode <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;       <span style="color:#75715e">// That is fine. But there are other exceptions are also possible.</span></div><div>        }</div><br /><div>        <span style="color:#f92672">return</span> errorCode;</div><div>    }  <span style="color:#75715e">// lock destructor called here. Thus unlocking the mutex.</span></div></div></code><br /></pre></div><pre><u>Alternatives to RAII :</u><br />1. Manual Management of Dynamic Objects:  Placing delete statements in the appropriate places to  recollect the allocated memory - </pre><pre>   Disadv: Very hard to  maintain.</pre><pre>2. Smart Pointers: <br />3. Garbage Collection: You don't know when the collector kicks in and Exception handling are  complicated in GC languages.</pre><br /></div></div></td></tr></tbody></table><div class="sites-layout-tile sites-tile-name-footer sites-layout-empty-tile"><div dir="ltr"><br /></div></div></div>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/ServiceLogin?continue=https://sites.google.com/site/sridharkritha/raii&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="system/app/pages/recentChanges.html">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="system/app/pages/reportAbuse.html" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="../../../ssl.gstatic.com/sites/p/a71eef/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXtASf_M2E6cjJ9Hgufts3RfM7MwuhM--x9xhZTQT2CPH1mUiS1qzOT_kGuYhByCInt5NC08GwCxfRXJdx5dlGVVQkyezgUwGDBWUaAz61CBsaCZSXgSZqN2ScSMykdBOv9bN7D8/api/js?anon=true',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([1109635200000, 1128902400000, 1130657000000, 1143333000000, 1143806400000, 1145000000000, 1146380000000, 1152489600000, 1159800000000, 1159500000000, 1162095000000, 1162075000000, 1162105500000]);
    gsites.Xhr.send('_/tz.html', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, '../../../gg.google.com/csi.gif');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>

<!-- Mirrored from sites.google.com/site/sridharkritha/raii by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 09 Jul 2021 09:42:36 GMT -->
</html>
